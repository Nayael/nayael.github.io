(this["webpackJsonpn-editor"]=this["webpackJsonpn-editor"]||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"M",(function(){return a})),n.d(t,"L",(function(){return s})),n.d(t,"y",(function(){return i})),n.d(t,"v",(function(){return o})),n.d(t,"z",(function(){return l})),n.d(t,"w",(function(){return r})),n.d(t,"A",(function(){return c})),n.d(t,"x",(function(){return d})),n.d(t,"O",(function(){return u})),n.d(t,"D",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"r",(function(){return h})),n.d(t,"j",(function(){return y})),n.d(t,"B",(function(){return g})),n.d(t,"u",(function(){return f})),n.d(t,"H",(function(){return E})),n.d(t,"I",(function(){return v})),n.d(t,"J",(function(){return x})),n.d(t,"E",(function(){return I})),n.d(t,"G",(function(){return w})),n.d(t,"F",(function(){return O})),n.d(t,"s",(function(){return S})),n.d(t,"q",(function(){return j})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return D})),n.d(t,"C",(function(){return N})),n.d(t,"N",(function(){return L})),n.d(t,"f",(function(){return T})),n.d(t,"k",(function(){return B})),n.d(t,"b",(function(){return A})),n.d(t,"t",(function(){return R})),n.d(t,"g",(function(){return P})),n.d(t,"h",(function(){return F})),n.d(t,"K",(function(){return U})),n.d(t,"o",(function(){return $})),n.d(t,"n",(function(){return _})),n.d(t,"l",(function(){return M})),n.d(t,"m",(function(){return V})),n.d(t,"p",(function(){return q}));const a=194,s=54,i=85,o=85,l=62,r=62,c=48,d=48,u=38,p=50,m={BLACK:"#000000",WHITE:"#FFF",YELLOW:"#FFE565",PINK:"#F36",DARK_GREEN:"#65c554",GREEN:"#25F3BA",BLUE:"#3C4BFF",DARK_RED:"#b83a35",DARK_GREY:"#212324",DARKER_GREY:"#1b1b1c",DARKER_GREY_DARK:"rgb(24, 24, 24)",GREY:"#242626",LIGHT_GREY:"#828282",LIGHTER_GREY:"#C8C8C8"},b={EVENT_LISTENER:"EVENT_LISTENER",EVENT_TRIGGER:"EVENT_TRIGGER",FUSE_EVENT:"FUSE_EVENT",UNFUSE_EVENT:"UNFUSE_EVENT",CONDITION:"CONDITION",CALL_FUNCTION:"CALL_FUNCTION",ASSIGN_VARIABLE:"ASSIGN_VARIABLE",SET_STATE:"SET_STATE",SCRIPT:"SCRIPT"},h={BU:"bu",BU_EXT:".bu",NEDIT:"nedit",NEDIT_EXT:".nedit",PROCESS:"npr",PROCESS_EXT:".npr",names:{bu:"State Machines",nedit:"Encoded Behaviors",npr:"Process"}},y={EQUALS:"EQUALS",GREATER:"GREATER",LESSER:"LESSER",GREATER_EQUAL:"GREATER_EQUAL",LESSER_EQUAL:"LESSER_EQUAL",NOT_EQUAL:"NOT_EQUAL",BOOLEAN:"BOOLEAN",pretty:{EQUALS:"=",GREATER:">",LESSER:"<",GREATER_EQUAL:"≥",LESSER_EQUAL:"≤",NOT_EQUAL:"≠",BOOLEAN:"bool"},export:{EQUALS:"equal",GREATER:"greater",LESSER:"lesser",GREATER_EQUAL:"greater-equal",LESSER_EQUAL:"lesser-equal",NOT_EQUAL:"not-equal",BOOLEAN:"boolean"}},g={TASK:"task",BEGIN:"begin",MILESTONE:"milestone",BU:"bu"},f={LOCK:"lock",UNLOCK:"unlock",ENABLE:"activate",DISABLE:"deactivate",RESET:"reset"},E="selectAll",v="selectAllNodes",x="SELECT_NODES",I="save",w="saveAs",O="saveAll",S="import",j="export",C="closeFile",k="closeState",D="copyNodes",N="pasteNodes",L="switchTab",T="copySelectedNodes",B="deleteSelectedNode",A="BU_IMPORTED_TO_PROCESS",R="INSPECTOR_FOCUS_NODE",P="CREATE_SUBPROCESS_FROM_NODE",F="CREATE_SUBPROCESS_WITH_SELECTED_NODES",U="SELECT_ZONE",$=document.dispatchEvent.bind(document,new Event(B)),_=e=>document.dispatchEvent(new CustomEvent(P,{detail:e})),M=e=>document.dispatchEvent(new CustomEvent(D,{detail:e})),V=document.dispatchEvent.bind(document,new Event(T)),q=e=>document.dispatchEvent(new CustomEvent(N,{detail:e}))},10:function(e,t,n){"use strict";n.d(t,"r",(function(){return y})),n.d(t,"p",(function(){return g})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return E})),n.d(t,"m",(function(){return v})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return I})),n.d(t,"a",(function(){return w})),n.d(t,"v",(function(){return O})),n.d(t,"n",(function(){return S})),n.d(t,"g",(function(){return j})),n.d(t,"l",(function(){return C})),n.d(t,"h",(function(){return k})),n.d(t,"i",(function(){return D})),n.d(t,"o",(function(){return N})),n.d(t,"e",(function(){return L})),n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return B})),n.d(t,"u",(function(){return A})),n.d(t,"k",(function(){return R})),n.d(t,"q",(function(){return P})),n.d(t,"j",(function(){return U})),n.d(t,"L",(function(){return $})),n.d(t,"M",(function(){return _})),n.d(t,"N",(function(){return M})),n.d(t,"T",(function(){return V})),n.d(t,"O",(function(){return q})),n.d(t,"J",(function(){return G})),n.d(t,"K",(function(){return K})),n.d(t,"H",(function(){return z})),n.d(t,"S",(function(){return Y})),n.d(t,"G",(function(){return H})),n.d(t,"I",(function(){return ee})),n.d(t,"U",(function(){return te})),n.d(t,"w",(function(){return ne})),n.d(t,"W",(function(){return ae})),n.d(t,"X",(function(){return se})),n.d(t,"F",(function(){return ie})),n.d(t,"B",(function(){return oe})),n.d(t,"C",(function(){return le})),n.d(t,"Q",(function(){return re})),n.d(t,"z",(function(){return ce})),n.d(t,"P",(function(){return de})),n.d(t,"A",(function(){return ue})),n.d(t,"x",(function(){return pe})),n.d(t,"y",(function(){return me})),n.d(t,"V",(function(){return be})),n.d(t,"E",(function(){return he})),n.d(t,"R",(function(){return ye}));var a=n(17),s=n.n(a),i=n(8),o=n(1),l=n(50),r=n.n(l),c=n(12),d=n(32),u=n(45),p=n.n(u),m=n(28),b=n(21),h=n(19);const y="neditor/process/UNDO_BU",g="neditor/process/REDO_BU",f="neditor/process/BU_HISTORY_JUMP_TO_PAST",E="neditor/process/CLEAR_BU_HISTORY",v="neditor/bu/LOAD_BU_SUCCESS",x="neditor/bu/UPDATE_BU",I="neditor/bu/UPDATE_BU_NAME",w="neditor/bu/ADD_BU_STATE",O="neditor/bu/UPDATE_BU_STATE",S="neditor/bu/OPEN_BU_STATE",j="neditor/bu/CLOSE_BU_STATE",C="neditor/bu/DELETE_BU_STATE",k="neditor/bu/COPY_BU_STATES",D="neditor/bu/COPY_SELECTED_BU_STATES",N="neditor/bu/PASTE_BU_STATES",L="neditor/bu/CANCEL_DELETE_BU_STATE",T="neditor/bu/ADD_BU_TASK",B="neditor/bu/BU_TASK_ADDED",A="neditor/bu/UPDATE_BU_NODE",R="neditor/bu/DELETE_BU_NODE",P="neditor/bu/REORDER_BU_TASK",F={buStates:{byIds:{},allIds:[]},buActions:{byIds:{},allIds:[]},id:"",name:"",process:""},U=function(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:s()(),name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",buStates:{byIds:{},allIds:[]},buActions:{byIds:{},allIds:[]},process:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||""}};t.D=p()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case m.a:return n.bu?{...e,...n.bu}:{...e,...U(n.buID,n.name,n.procID)};case c.f:return n.filetype===o.r.BU&&n.bu?{...n.bu.bu}:e;case v:return{...n.bu};case m.d:return n.type===o.r.BU?{...e,name:Object(i.d)(n.path)||e.name}:e;case x:return n.buID!==e.id?e:{...e,...n.bu};case I:return{...e,name:n.name};case O:return{...e,buStates:{...e.buStates,byIds:{...e.buStates.byIds,[n.buState.id]:n.buState}}};case"neditor/bu/UPDATE_BU_STATES_POSITIONS":return{...e,buStates:{...e.buStates,byIds:Object(i.b)(e.buStates.allIds.map((t=>n.nodes.includes(t)?{...e.buStates.byIds[t],x:e.buStates.byIds[t].x+n.offset.x,y:e.buStates.byIds[t].y+n.offset.y}:e.buStates.byIds[t])),"id")}};case w:let t="STATE "+e.buStates.allIds.length;const a=n=>e.buStates.byIds[n].name===t;let l=0;for(;e.buStates.allIds.some(a);)t="STATE "+l,l++;const r={id:s()(),name:t,behavior:[],x:n.x||0,y:n.y||0};return{...e,buStates:{...e.buStates,byIds:{...e.buStates.byIds,[r.id]:r},allIds:[...e.buStates.allIds,r.id]}};case C:if(!n.forceDelete&&n.confirmBeforeDelete)return e;const d=X(e,e.buStates.byIds[n.id].behavior,!0).map((e=>e.id));return{...e,buStates:{...e.buStates,byIds:Object(i.b)(e.buStates.allIds.filter((e=>e!==n.id)).map((t=>e.buStates.byIds[t])),"id"),allIds:e.buStates.allIds.filter((e=>e!==n.id))},buActions:{allIds:e.buActions.allIds.filter((e=>!d.includes(e))),byIds:Object(i.b)(e.buActions.allIds.filter((e=>!d.includes(e))).map((t=>e.buActions.byIds[t].type===o.a.SET_STATE&&e.buActions.byIds[t].value===n.id?{...e.buActions.byIds[t],value:t}:e.buActions.byIds[t])),"id")}};case N:const u=[],p={x:50,y:50};if(n.mouse){n.buStates=n.buStates.sort(((e,t)=>e.x<t.x?-1:1));const e=n.buStates[0].x+(n.buStates[n.buStates.length-1].x-n.buStates[0].x)/2;n.buStates=n.buStates.sort(((e,t)=>e.y<t.y?-1:1));const t=n.buStates[0].y+(n.buStates[n.buStates.length-1].y-n.buStates[0].y)/2;p.x=n.mouse.x-e,p.y=n.mouse.y-t}const b=n.buStates.map((e=>{const t=W(e.behavior);return t.actions.forEach((e=>u.push(e))),{...e,behavior:t.behavior,id:s()(),x:n.mouse&&1===n.buStates.length?n.mouse.x:e.x+p.x,y:n.mouse&&1===n.buStates.length?n.mouse.y:e.y+p.y}}));return{...e,buActions:{byIds:{...e.buActions.byIds,...Object(i.b)(u,"id")},allIds:[...e.buActions.allIds,...u.map((e=>e.id))]},buStates:{byIds:{...e.buStates.byIds,...Object(i.b)(b,"id")},allIds:[...e.buStates.allIds,...b.map((e=>e.id))]}};case T:const{id:h,buState:y,parentTask:g,arrayName:f,taskType:E}=n,S={id:h,type:E};return y?S.name="Operation #"+(e.buStates.byIds[y].behavior.length+1):g&&f&&(S.name="Operation #"+(e.buActions.byIds[g][f].length+1)),E===o.a.CONDITION?(S.success=[],S.failure=[]):E===o.a.EVENT_LISTENER?(S.handler=[],S.name=""):E===o.a.ASSIGN_VARIABLE?S.variable={name:"",value:"",global:!1}:E===o.a.CALL_FUNCTION&&(S.params=[],S.localAttrName=""),{...e,buActions:{byIds:{...Object(i.b)(e.buActions.allIds.map((t=>t===g?{...e.buActions.byIds[t],[f]:[...e.buActions.byIds[t][f],S.id]}:e.buActions.byIds[t])),"id"),[S.id]:S},allIds:[...e.buActions.allIds,S.id]},buStates:{...e.buStates,byIds:Object(i.b)(e.buStates.allIds.map((t=>t===y?{...e.buStates.byIds[t],behavior:[...e.buStates.byIds[t].behavior,S.id]}:e.buStates.byIds[t])),"id")}};case A:return{...e,buActions:{...e.buActions,byIds:{...e.buActions.byIds,[n.node.id]:n.node}}};case R:const j={...e.buActions.byIds};delete j[n.id];let k="";for(k in j)j.hasOwnProperty(k)&&(j[k].hasOwnProperty("success")&&(j[k].success=j[k].success.filter((e=>e!==n.id))),j[k].hasOwnProperty("failure")&&(j[k].failure=j[k].failure.filter((e=>e!==n.id))),j[k].hasOwnProperty("handler")&&(j[k].handler=j[k].handler.filter((e=>e!==n.id))));return{...e,buActions:{byIds:j,allIds:e.buActions.allIds.filter((e=>e!==n.id))},buStates:{allIds:e.buStates.allIds,byIds:Object(i.b)(e.buStates.allIds.map((t=>({...e.buStates.byIds[t],behavior:e.buStates.byIds[t].behavior.filter((e=>e!==n.id))}))),"id")}};case P:const{sourceID:D,destID:L}=n;let B=n.buStateID?[...e.buStates.byIds[n.buStateID].behavior]:[...e.buActions.byIds[n.parentTask][n.arrayName]];const F=B.filter((t=>e.buActions.byIds[t].type!==o.a.EVENT_LISTENER)),$=B.filter((t=>e.buActions.byIds[t].type===o.a.EVENT_LISTENER)),_=F[D];return D<L?(F.splice(L+1,0,_),F.splice(D,1)):(F.splice(L,0,_),F.splice(D+1,1)),B=[...F,...$],{...e,buStates:{...e.buStates,byIds:n.buStateID?{...e.buStates.byIds,[n.buStateID]:{...e.buStates.byIds[n.buStateID],behavior:B}}:e.buStates.byIds},buActions:{...e.buActions,byIds:n.buStateID?e.buActions.byIds:{...e.buActions.byIds,[n.parentTask]:{...e.buActions.byIds[n.parentTask],[n.arrayName]:B}}}};default:return e}}),{groupBy:Object(u.groupByActionTypes)([O,C]),filter:Object(u.excludeAction)([d.b,d.a,S,j,k,D,L,B,c.g,c.j,c.a,c.d,c.e,c.f,c.k,c.h,d.d,d.c,m.a]),ignoreInitialState:!0,undoType:y,redoType:g,jumpToPastType:f,clearHistoryType:E});const $=(e,t)=>e.buActions.byIds[t].type,_=(e,t)=>e.buStates.byIds[t],M=function(){let e={};return(t,n)=>{if(!t.buStates.byIds[n])return{x:0,y:0};const{x:a,y:s}=t.buStates.byIds[n];return e[n]&&a===e[n].x&&s===e[n].y||(e[n]={x:a,y:s}),e[n]}}(),V=Object(b.a)((e=>e.bu.ui),((e,t)=>t),((e,t)=>e[t]?e[t].statesToDelete:[])),q=Object(h.a)((e=>e.bu.entities.present.byIds),(e=>e.bu.ui),((e,t)=>t),((e,t,n)=>t.selectedBUStates.length>0&&!!e[n]&&e[n].present.buStates.allIds.some((e=>t.selectedBUStates.includes(e))))),G=Object(b.a)((e=>e.buStates.allIds),(e=>e)),K=function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.buStates.allIds:e.buStates.allIds.map((t=>({id:t,name:e.buStates.byIds[t].name,behavior:e.buStates.byIds[t].behavior,x:e.buStates.byIds[t].x,y:e.buStates.byIds[t].y}))):[]},z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={...e.buActions.byIds[t]};return n&&a.type===o.a.CONDITION?(a.success=H(e,a.success,n),a.failure=H(e,a.failure,n)):n&&a.type===o.a.EVENT_LISTENER&&(a.handler=H(e,a.handler,n)),a},Y=Object(b.a)((e=>e.bu.entities.present.allIds),(e=>e.bu.entities.present.byIds),(e=>e.file.files.filter((e=>e.type===o.r.BU))),((e,t)=>t),((e,t,n,a)=>e.filter((e=>t[e].present.process===a)).map((e=>({id:e,name:t[e].present.name,path:n.some((t=>t.id===e))?n.find((t=>t.id===e)).path:""}))))),H=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"string"!=typeof t?t.map((t=>z(e,t,n))):z(e,t,n)},W=e=>{e=Z(e,!0);const t=J(e,!0);return{behavior:e.map((e=>e.id)),actions:t}},Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((e=>t&&e.type===o.a.CONDITION?{...e,id:s()(),success:Z(e.success||[],t),failure:Z(e.failure||[],t)}:t&&e.type===o.a.EVENT_LISTENER?{...e,id:s()(),handler:Z(e.handler||[],t)}:{...e,id:s()()}))},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.reduce(((e,n)=>{switch(n.type){case o.a.CONDITION:e=(e=e.concat(J(n.success||[],t))).concat(J(n.failure||[],t)),t&&e.push({...n,success:n.success.map((e=>e.id)),failure:n.failure.map((e=>e.id))});break;case o.a.EVENT_LISTENER:e=e.concat(J(n.handler||[],t)),t&&e.push({...n,handler:n.handler.map((e=>e.id))});break;default:e.push(n)}return e}),[])},X=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==t){const a=t.map((t=>z(e,t,n)));return J(a)}return z(e,t,n)},Q=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return X(e,e.buStates.byIds[t].behavior,!0).filter((t=>t.type===o.a.SET_STATE&&t.value&&e.buStates.allIds.includes(t.value))).map((a=>({source:t,buAction:a.id,color:a.color,destination:n?a.value:{id:a.value,x:e.buStates.byIds[a.value].x,y:e.buStates.byIds[a.value].y}})))},ee=function(){let e=[],t=[];return function(n,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)return e=[],e;const i=n.buStates.allIds.filter((e=>n.buStates.allIds.includes(e))).map((e=>Q(n,e,s)));return r()(i,t)||(t=i,e=i.reduce(((e,t)=>e.concat(t)),[])),e}}(),te=(e,t)=>n=>n({type:I,payload:{buID:e,name:t}}),ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return a=>a({type:w,payload:{buID:e,x:t,y:n}})},ae=(e,t)=>n=>n({type:O,payload:{buID:e,buState:t}}),se=(e,t)=>(n,a)=>n({type:"neditor/bu/UPDATE_BU_STATES_POSITIONS",payload:{buID:e,offset:t,nodes:a().bu.ui.selectedBUStates}}),ie=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(a,s)=>{a(n?{type:C,payload:{buID:e,id:t,forceDelete:n}}:{type:C,payload:{buID:e,id:t,forceDelete:n,confirmBeforeDelete:Q(s().bu.entities.present.byIds[e].present,t,!0).length>0||ee(s().bu.entities.present.byIds[e].present,e,!0).some((e=>e.destination===t))}})}},oe=(e,t)=>(n,a)=>n({type:k,payload:{buStates:t,bu:a().bu.entities.present.byIds[e].present}}),le=e=>(t,n)=>t({type:D,payload:{buID:e,bu:n().bu.entities.present.byIds[e].present}}),re=(e,t)=>(n,a)=>n({type:N,payload:{buID:e,mouse:t,buStates:[...a().bu.ui.clipboard.buStates]}}),ce=(e,t)=>n=>n({type:L,payload:{buID:e,id:t}}),de=(e,t)=>n=>n({type:S,payload:{buID:e,buStateID:t}}),ue=(e,t)=>n=>n({type:j,payload:{buID:e,buStateID:t}}),pe=(e,t,n,a,i)=>o=>o({type:T,payload:{id:s()(),buID:e,buState:n,parentTask:a,arrayName:i,taskType:t}}),me=()=>e=>e({type:B}),be=(e,t)=>n=>n({type:A,payload:{buID:e,node:t}}),he=(e,t)=>n=>n({type:R,payload:{buID:e,id:t}}),ye=(e,t,n,a,s,i)=>o=>o({type:P,payload:{buID:e,buStateID:t,parentTask:n,arrayName:a,sourceID:s,destID:i}})},101:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var a=n(4),s=n(12),i=n(1);const o="neditor/processes/CREATE_PROCESS",l="neditor/processes/SAVE_PROCESS",r="neditor/processes/REMOVE_PROCESS",c={byIds:{},allIds:[]},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;if(t.type===r){const t={...e.byIds};return delete t[n.procID],{byIds:{...t},allIds:e.allIds.filter((e=>e!==n.procID))}}return{byIds:{...e.byIds,[n.procID]:Object(a.G)(e.byIds[n.procID],t)},allIds:e.allIds.includes(n.procID)?e.allIds:[...e.allIds,n.procID]}};t.c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case s.g:if(n.type===i.r.PROCESS){let t="",a=0;do{t="Process-"+(e.allIds.length+1+a),++a}while(e.allIds.some((n=>e.byIds[n].name===t)));return{...d(e,{type:o,payload:{...n,procID:n.id,name:t}})}}return e;case s.a:return e.byIds[n]?{...d(e,{type:r,payload:{procID:n}})}:e;case s.j:return n.type===i.r.PROCESS?{...d(e,{type:l,payload:{...n,procID:n.id}})}:e;default:return n&&n.procID?{...d(e,t)}:e}}},12:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return E})),n.d(t,"a",(function(){return v})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return O})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return C})),n.d(t,"r",(function(){return k})),n.d(t,"l",(function(){return N})),n.d(t,"p",(function(){return L})),n.d(t,"o",(function(){return T})),n.d(t,"q",(function(){return B})),n.d(t,"n",(function(){return A}));var a=n(17),s=n.n(a),i=n(50),o=n.n(i),l=n(8),r=n(1),c=n(179),d=n(255),u=n(14);c.a.use(u.b).init({interpolation:{escapeValue:!1},lng:"en",fallbackLng:"en",defaultNS:"common",react:{useSuspense:!1},resources:{en:{common:d}}});var p=c.a,m=n(19);const b="neditor/file/LOAD_FILE",h="neditor/file/LOAD_FILE_SUCCESS",y="neditor/file/LOAD_FILE_FAILURE",g="neditor/file/NEW_FILE",f="neditor/file/OPEN_FILE",E="neditor/file/OPEN_FILE_FAILURE",v="neditor/file/CLOSE_FILE",x="neditor/file/SAVE_FILE",I="neditor/file/REORDER_FILE",w="neditor/file/FOCUS_FILE",O="neditor/file/SET_RECENT_FILES",S="neditor/file/FILE_MODIFIED",j={files:[],currentFile:"",recentFiles:null,closedFiles:[]},C=function(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{type:e,id:t,name:n||p.t("Untitled"),parent:"",saved:null,show:a,hasUnsavedChanges:s,path:i}};t.m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case g:const t=e.files.filter((e=>!e.path)).length;let a=`${p.t("Untitled")}-${t+1}`,s=0;do{a=`${n.type===r.r.PROCESS?p.t("Process"):p.t("State Machine")}-${e.files.filter((e=>e.type===n.type)).length+1+s}`,++s}while(e.files.some((e=>e.name===a)));return{...e,files:[...e.files,C(n.type,n.id,a,!0)],currentFile:n.id};case f:return{...e,files:[...e.files,n],currentFile:n.id,closedFiles:n.path?e.closedFiles.filter((e=>e!==n.path)):e.closedFiles};case E:return{...e,files:e.files.filter((e=>e.path!==n))};case h:return n.filetype===r.r.BU&&!n.bu||n.filetype===r.r.PROCESS&&!n.process?e:{...e,files:e.files.map((e=>e.id!==(n.filetype===r.r.BU?n.bu.bu:n.process.process).id?e:{hasUnsavedChanges:!1,...e,saved:n.filetype===r.r.BU?n.bu.bu:{process:n.process.process,bus:n.bus}}))};case v:const i=e.files.findIndex((e=>e.id===n));return{...e,currentFile:e.currentFile===n?e.files.length>1?0===i?e.files[1].id:e.files[i-1].id:"":e.currentFile,files:e.files.filter((e=>e.id!==n)),closedFiles:e.files.find((e=>e.id===n)).path?[...e.closedFiles,e.files.find((e=>e.id===n)).path]:e.closedFiles};case"neditor/file/SHOW_FILE_TAB":return{...e,files:e.files.map((e=>e.id===n.fileID?{...e,show:!0}:e))};case"neditor/file/HIDE_FILE_TAB":return{...e,files:e.files.map((e=>e.id===n.fileID?{...e,show:!1}:e))};case x:return{...e,files:e.files.filter((e=>e.id===n.id||e.path!==n.path||!e.path)).map((e=>e.id===n.id?{...e,path:n.path,name:Object(l.d)(n.path)||e.name,saved:n.saved,hasUnsavedChanges:!1}:e)),currentFile:e.files.some((t=>t.id===e.currentFile))?e.currentFile:"",recentFiles:[{name:n.name,type:n.type,path:n.path},...e.recentFiles.filter((e=>e.path!==n.path||!e.path))]};case w:return{...e,currentFile:n,files:e.files.map((e=>e.id===n?{...e,show:!0}:e))};case I:const c=e.files.findIndex((e=>e.id===n.fileID)),d=[...e.files];return c<n.index?(d.splice(n.index+1,0,d[c]),d.splice(c,1)):(d.splice(n.index,0,d[c]),d.splice(c+1,1)),{...e,files:d};case S:if(n.procID){const t=e.files.find((e=>e.id===n.procID)),a=!t.saved||(n.process.editBU?t.saved&&!o()(t.saved.bus.find((e=>e.id===n.process.editBU)),n.bu):t.saved&&!o()(t.saved.process,n.process));return a===t.hasUnsavedChanges?e:{...e,files:e.files.map((e=>e.id===n.procID?{...e,hasUnsavedChanges:a}:e))}}if(n.buID){const t=e.files.find((e=>e.id===n.buID)),a=!t.saved||!o()(t.saved,n.bu);return a===t.hasUnsavedChanges?e:{...e,files:e.files.map((e=>e.id===n.buID?{...e,name:n.bu.name||e.name,hasUnsavedChanges:a}:e))}}return e;case"neditor/file/SET_FILE_DIRTY":return{...e,files:e.files.map((e=>e.id===n.id&&e.saved?{...e,hasUnsavedChanges:!0}:e))};case O:return{...e,recentFiles:n};default:return e}};const k=Object(m.a)((e=>e.file),(e=>D(e,e.currentFile))),D=(e,t)=>{const n=e.files.find((e=>e.id===t));return n?n.type:null},N=(Object(m.a)((e=>e.file.files.filter((e=>e.show)))),e=>t=>t({type:v,payload:e})),L=e=>t=>new Promise((n=>{const a=s()();t({type:g,payload:{type:e,id:a}}),n(a)})),T=e=>t=>t({type:w,payload:e}),B=(e,t)=>n=>n({type:I,payload:{fileID:e,index:t}}),A=()=>(e,t)=>{t().file.recentFiles||e({type:O,payload:[]})}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(19),s=n(50),i=n.n(s);const o=Object(a.b)(a.c,((e,t)=>i()(e,t)))},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"h",(function(){return b}));var a=n(17),s=n.n(a),i=n(21);const o="neditor/process/tool/ADD_PROP",l="neditor/process/tool/UPDATE_PROP",r="neditor/process/tool/DELETE_PROP",c=[],d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:s()(),value:"",...e}};t.e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case o:return[...e,n.id?{...d(n.props),id:n.id,value:n.value||""}:d(n.props)];case r:return e.filter((e=>e.id!==n.id));case l:return e.map((e=>e.id!==n.id?e:{...e,value:n.value,...n.props||{}}));default:return e}};const u=Object(i.a)(((e,t)=>{let{type:n,procID:a}=t;return e.process.entities.byIds[a]?e.process.entities.byIds[a].present[n]:[]}),((e,t)=>{let{type:n,procID:a}=t;return{type:n,procID:a}}),((e,t)=>{let{type:n,procID:a}=t;return e})),p=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const l=s()();return i({type:o,payload:{procID:e,type:t,id:l,value:n,props:a}}),l}},m=(e,t,n)=>a=>{a({type:r,payload:{procID:e,type:t,id:n}})},b=function(e,t,n,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return i=>{i({type:l,payload:{procID:e,type:t,id:n,value:a,props:s}})}}},255:function(e){e.exports=JSON.parse('{"Yes":"Yes","No":"No","OK":"OK","Color":"Color","Process":"Process","State Machine":"State Machine","State Machines":"State Machines","Bu":"State Machines","File":"File","New":"New","Open":"Open","Open Recent":"Open Recent","Save":"Save","Save As":"Save As","Save All":"Save All","Export":"Export","Import":"Import","Export NEdit":"Export NEdit","Import NEdit":"Import NEdit","Close File":"Close File","Quit Editor":"Quit Editor","Cancel":"Cancel","Don\'t save":"Don\'t save","Don\'t show again":"Don\'t show again","Don\'t show this warning again":"Don\'t show this warning again","Edit":"Edit","Undo":"Undo","Redo":"Redo","Cut":"Cut","Copy":"Copy","Paste":"Paste","Delete":"Delete","Delete State":"Delete State","Select All":"Select All","View":"View","Zoom In":"Zoom In","Zoom Out":"Zoom Out","Reset Zoom":"Reset Zoom","Help":"Help","About":"About NEditor","Check for Updates":"Check for Updates…","Keyboard Shortcuts":"Keyboard Shortcuts","Add State":"Add State","Add Task Node":"Add Task Node","Add State Machine Task":"Add State Machine Task","Add Begin":"Add Begin","Add Milestone":"Add Milestone","Paste State(s)":"Paste State(s)","Paste Node(s)":"Paste Node(s)","New Project":"New Project","New Process":"New Process","New State Machine":"New State Machine","Import State Machine":"Import State Machine","Open an existing Project":"Open an existing Project","Recent documents":"Recent documents","Close State":"Close State","Add Event":"Add Event","Create":"Create","Action":"Action","or":"or","Condition":"Condition","Optional":"Optional","Close":"Close","Rename":"Rename","Name":"Name","Class Name":"Class Name","Function Name":"Function Name","Task Name":"Task Name","Event":"Event","Event Name":"Event Name","Tags":"Tags","Tag":"Tag","Value":"Value","Pointer":"Pointer","value":"Value","pointer":"Pointer","Arguments":"Arguments","Argument":"Argument","Variable":"Variable","Local":"Local","Global":"Global","Class":"Class","Function":"Function","Local Attr":"Local Attr","Local Attribute":"Local Attribute","[Missing]":"[Missing]","CALL_FUNCTION":"Call a Function","ASSIGN_VARIABLE":"Assign a Variable","SET_STATE":"Set State","EVENT_TRIGGER":"Trigger Event","EVENT_LISTENER":"Event Listener","FUSE_EVENT":"Fuse Event","UNFUSE_EVENT":"Unfuse Event","SCRIPT":"Script","Expression":"Expression","True":"True","False":"False","File doesn\'t exist":"File doesn\'t exist","User cancelled closing the file":"User cancelled closing the file","Untitled":"Untitled","Next Document":"Next Document","Previous Document":"Previous Document","Shortcuts":"Shortcuts","Shortcut":"Shortcut","Create a New State Machine":"Create a New State Machine","Create a New Process":"Create a New Process","Open File":"Open File","Open the last closed File":"Open the last closed File","Save File":"Save File","Save File As":"Save File As","Save All Files":"Save All Files","Version":"Version","Legal Statement":"Legal Statement","Tutorial":"Tutorial","Release Notes":"Release Notes","No release notes yet":"No release notes yet","Relocate the canvas ½ unit to the top":"Relocate the canvas ½ unit to the top","Relocate the canvas 1 unit to the top":"Relocate the canvas 1 unit to the top","Relocate the canvas ½ unit to the bottom":"Relocate the canvas ½ unit to the bottom","Relocate the canvas 1 unit to the bottom":"Relocate the canvas 1 unit to the bottom","Relocate the canvas ½ unit to the left":"Relocate the canvas ½ unit to the left","Relocate the canvas 1 unit to the left":"Relocate the canvas 1 unit to the left","Relocate the canvas ½ unit to the right":"Relocate the canvas ½ unit to the right","Relocate the canvas 1 unit to the right":"Relocate the canvas 1 unit to the right","Close BU State Canvas":"Close State Machine State Canvas","Options":"Options","Nodes":"Nodes","Task Node":"Task Node","State Machine Task":"State Machine Task","Begin Node":"Begin Node","Milestone":"Milestone","Inspector":"Inspector","Timer":"Timer","Duration":"Duration","Actors":"Actors","Actor":"Actor","Tools":"Tools","Tool":"Tool","Wait for Event":"Wait for Event","Jumps":"Jumps","On Event":"On Event","Jump From":"Jump From","Jump To":"Jump To","lock":"Lock","unlock":"Unlock","activate":"Enable Task","deactivate":"Disable Task","reset":"Reset Task","From":"From","To":"To","CIE":"CIE","CIEs":"CIEs","Add Subtask Point Sync":"Add Subtask Point Sync","Add Exit Point Sync":"Add Exit Point Sync","Add Entry Point Sync":"Add Entry Point Sync","Node names":"Node names","Jump links":"Show All Jumps","Subtasks":"Subtasks","Back to process":"Back to process","Back to main process":"Back to main process","toolsInspector":"Add here all the tools that will be used in the process","actorsInspector":"Add here all the actors that will perform tasks in the process","eventsInspector":"Add here all the events that will be used in the process","Create Sub-process":"Create Sub-Process","events-log":"Log Event","Link Task to State Machine":"Link Task to State Machine","Unlink Task from State Machine":"Unlink Task from State Machine","Sub-Process":"Sub-Process","New Sub-Process":"New Sub-Process","Remove Link":"Remove Link","Unlink Subtask":"Unlink Subtask","Unlink Sub-Process":"Unlink Sub-Process","Show List":"Show List","Hide List":"Hide List","legalStatementContent":"Eiusmod commodo fugiat veniam duis eiusmod mollit occaecat incididunt esse eu. Id magna laborum ullamco irure. Proident labore ad velit voluptate duis exercitation magna sit tempor. Consequat ea in ut Lorem eiusmod proident eiusmod incididunt aliquip sit incididunt. Minim fugiat aute labore consectetur exercitation deserunt duis enim mollit et voluptate. Deserunt deserunt ipsum commodo enim excepteur aliqua magna. Sit labore adipisicing sint proident eu eu nisi Lorem ea voluptate irure deserunt.Aliquip minim do nisi ex officia pariatur amet incididunt est excepteur nostrud irure irure ipsum. Nisi aliqua occaecat non reprehenderit anim cillum ex eu esse nulla ullamco velit. Laborum et adipisicing aliquip duis cillum magna excepteur duis aute aute nulla laboris. Ullamco aliqua magna do nostrud in aliqua proident anim adipisicing consectetur excepteur aliquip tempor. Non officia eu quis dolor fugiat aliqua. Officia commodo aliquip duis aute veniam mollit cupidatat elit officia laboris sunt enim adipisicing. Magna sit ea minim aliqua.Deserunt voluptate consectetur est enim minim quis quis nostrud nulla consequat aliqua tempor. Anim ex ut do aliqua consequat elit et eiusmod esse occaecat. Est laborum nulla Lorem dolor ad reprehenderit. Ut occaecat labore sint aute deserunt aliqua nostrud exercitation laborum in amet velit duis irure. Fugiat voluptate reprehenderit eiusmod adipisicing reprehenderit cillum ex exercitation ipsum nulla minim ipsum aliquip. Lorem non adipisicing exercitation nisi dolor esse amet veniam exercitation.Eiusmod commodo fugiat veniam duis eiusmod mollit occaecat incididunt esse eu. Id magna laborum ullamco irure. Proident labore ad velit voluptate duis exercitation magna sit tempor. Consequat ea in ut Lorem eiusmod proident eiusmod incididunt aliquip sit incididunt. Minim fugiat aute labore consectetur exercitation deserunt duis enim mollit et voluptate. Deserunt deserunt ipsum commodo enim excepteur aliqua magna. Sit labore adipisicing sint proident eu eu nisi Lorem ea voluptate irure deserunt.Aliquip minim do nisi ex officia pariatur amet incididunt est excepteur nostrud irure irure ipsum. Nisi aliqua occaecat non reprehenderit anim cillum ex eu esse nulla ullamco velit. Laborum et adipisicing aliquip duis cillum magna excepteur duis aute aute nulla laboris. Ullamco aliqua magna do nostrud in aliqua proident anim adipisicing consectetur excepteur aliquip tempor. Non officia eu quis dolor fugiat aliqua. Officia commodo aliquip duis aute veniam mollit cupidatat elit officia laboris sunt enim adipisicing. Magna sit ea minim aliqua.Deserunt voluptate consectetur est enim minim quis quis nostrud nulla consequat aliqua tempor. Anim ex ut do aliqua consequat elit et eiusmod esse occaecat. Est laborum nulla Lorem dolor ad reprehenderit. Ut occaecat labore sint aute deserunt aliqua nostrud exercitation laborum in amet velit duis irure. Fugiat voluptate reprehenderit eiusmod adipisicing reprehenderit cillum ex exercitation ipsum nulla minim ipsum aliquip. Lorem non adipisicing exercitation nisi dolor esse amet veniam exercitation.Eiusmod commodo fugiat veniam duis eiusmod mollit occaecat incididunt esse eu. Id magna laborum ullamco irure. Proident labore ad velit voluptate duis exercitation magna sit tempor. Consequat ea in ut Lorem eiusmod proident eiusmod incididunt aliquip sit incididunt. Minim fugiat aute labore consectetur exercitation deserunt duis enim mollit et voluptate. Deserunt deserunt ipsum commodo enim excepteur aliqua magna. Sit labore adipisicing sint proident eu eu nisi Lorem ea voluptate irure deserunt.Aliquip minim do nisi ex officia pariatur amet incididunt est excepteur nostrud irure irure ipsum. Nisi aliqua occaecat non reprehenderit anim cillum ex eu esse nulla ullamco velit. Laborum et adipisicing aliquip duis cillum magna excepteur duis aute aute nulla laboris. Ullamco aliqua magna do nostrud in aliqua proident anim adipisicing consectetur excepteur aliquip tempor. Non officia eu quis dolor fugiat aliqua. Officia commodo aliquip duis aute veniam mollit cupidatat elit officia laboris sunt enim adipisicing. Magna sit ea minim aliqua.Deserunt voluptate consectetur est enim minim quis quis nostrud nulla consequat aliqua tempor. Anim ex ut do aliqua consequat elit et eiusmod esse occaecat. Est laborum nulla Lorem dolor ad reprehenderit. Ut occaecat labore sint aute deserunt aliqua nostrud exercitation laborum in amet velit duis irure. Fugiat voluptate reprehenderit eiusmod adipisicing reprehenderit cillum ex exercitation ipsum nulla minim ipsum aliquip. Lorem non adipisicing exercitation nisi dolor esse amet veniam exercitation.Eiusmod commodo fugiat veniam duis eiusmod mollit occaecat incididunt esse eu. Id magna laborum ullamco irure. Proident labore ad velit voluptate duis exercitation magna sit tempor. Consequat ea in ut Lorem eiusmod proident eiusmod incididunt aliquip sit incididunt. Minim fugiat aute labore consectetur exercitation deserunt duis enim mollit et voluptate. Deserunt deserunt ipsum commodo enim excepteur aliqua magna. Sit labore adipisicing sint proident eu eu nisi Lorem ea voluptate irure deserunt.Aliquip minim do nisi ex officia pariatur amet incididunt est excepteur nostrud irure irure ipsum. Nisi aliqua occaecat non reprehenderit anim cillum ex eu esse nulla ullamco velit. Laborum et adipisicing aliquip duis cillum magna excepteur duis aute aute nulla laboris. Ullamco aliqua magna do nostrud in aliqua proident anim adipisicing consectetur excepteur aliquip tempor. Non officia eu quis dolor fugiat aliqua. Officia commodo aliquip duis aute veniam mollit cupidatat elit officia laboris sunt enim adipisicing. Magna sit ea minim aliqua.Deserunt voluptate consectetur est enim minim quis quis nostrud nulla consequat aliqua tempor. Anim ex ut do aliqua consequat elit et eiusmod esse occaecat. Est laborum nulla Lorem dolor ad reprehenderit. Ut occaecat labore sint aute deserunt aliqua nostrud exercitation laborum in amet velit duis irure. Fugiat voluptate reprehenderit eiusmod adipisicing reprehenderit cillum ex exercitation ipsum nulla minim ipsum aliquip. Lorem non adipisicing exercitation nisi dolor esse amet veniam exercitation.Eiusmod commodo fugiat veniam duis eiusmod mollit occaecat incididunt esse eu. Id magna laborum ullamco irure. Proident labore ad velit voluptate duis exercitation magna sit tempor. Consequat ea in ut Lorem eiusmod proident eiusmod incididunt aliquip sit incididunt. Minim fugiat aute labore consectetur exercitation deserunt duis enim mollit et voluptate. Deserunt deserunt ipsum commodo enim excepteur aliqua magna. Sit labore adipisicing sint proident eu eu nisi Lorem ea voluptate irure deserunt.Aliquip minim do nisi ex officia pariatur amet incididunt est excepteur nostrud irure irure ipsum. Nisi aliqua occaecat non reprehenderit anim cillum ex eu esse nulla ullamco velit. Laborum et adipisicing aliquip duis cillum magna excepteur duis aute aute nulla laboris. Ullamco aliqua magna do nostrud in aliqua proident anim adipisicing consectetur excepteur aliquip tempor. Non officia eu quis dolor fugiat aliqua. Officia commodo aliquip duis aute veniam mollit cupidatat elit officia laboris sunt enim adipisicing. Magna sit ea minim aliqua.Deserunt voluptate consectetur est enim minim quis quis nostrud nulla consequat aliqua tempor. Anim ex ut do aliqua consequat elit et eiusmod esse occaecat. Est laborum nulla Lorem dolor ad reprehenderit. Ut occaecat labore sint aute deserunt aliqua nostrud exercitation laborum in amet velit duis irure. Fugiat voluptate reprehenderit eiusmod adipisicing reprehenderit cillum ex exercitation ipsum nulla minim ipsum aliquip. Lorem non adipisicing exercitation nisi dolor esse amet veniam exercitation.","tutorialContent":"Aute commodo cupidatat amet et occaecat non cillum ex cillum deserunt fugiat dolore. Nisi ipsum irure voluptate enim quis commodo est est proident excepteur do. Nostrud ad ex commodo dolor. Commodo velit ex consequat fugiat mollit aute nulla duis excepteur ullamco. Pariatur mollit ad deserunt do. Sunt cillum mollit fugiat quis consequat cillum labore nostrud reprehenderit est excepteur. Eu mollit duis pariatur laborum tempor dolor dolor reprehenderit aliquip proident aute deserunt.","saveChangesConfirm":"Do you want to save the changes you made to {{filename}}?","saveChangesLost":"Your changes will be lost if you don\'t save them.","deleteStateConfirmTitle":"Confirm deletion of the state?","deleteStateConfirmTitle_plural":"Confirm deletion of the states?","deleteStateConfirm":"<0>You are about to delete a state that is linked to other states.<1/>You will not be able to export the State Machine until all the links are fixed.</0>","deleteStateConfirm_plural":"<0>You are about to delete states that are linked to other states.<1/>You will not be able to export the State Machine until all the links are fixed.</0>","Export State Machine":"Export State Machine","Export process":"Export process","Import Encoded State Machine":"Import Encoded State Machine","Import Encoded Process":"Import Encoded Process","warningExportBU":"You are about to export this State Machine. The NEdit (.nedit) format does not save the editor data (i.e. positions of state nodes, preferred colors, etc.).<br/><br/>You should save the State Machine as a .bu file via the \\"Save\\" command in order to keep the visual data.","warningExportProcess":"You are about to export this Process. The NEdit (.nedit) format does not save the editor data (i.e. positions of state nodes, preferred colors, etc.).<br/><br/>You should save the Process as a .npr file via the \\"Save\\" command in order to keep the visual data.","warningImportBU":"You are about to import an encoded State Machine. Do you wish to import its content in a new tab or append it to the State Machine you are currently editing?"}')},276:function(e,t,n){e.exports=n(619)},28:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return g}));var a=n(17),s=n.n(a),i=n(10),o=n(12),l=n(1),r=n(21),c=n(45),d=n.n(c);const u="neditor/bus/NEW_BU",p="neditor/bus/CREATE_BU",m="neditor/bus/SAVE_BU",b="neditor/bus/REMOVE_BU",h={byIds:{},allIds:[]},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;if(t.type===b){const t={...e.byIds};return delete t[n.buID],{byIds:{...t},allIds:e.allIds.filter((e=>e!==n.buID))}}return{byIds:{...e.byIds,[n.buID]:Object(i.D)(e.byIds[n.buID],t)},allIds:e.allIds.includes(n.buID)?e.allIds:[...e.allIds,n.buID]}};t.e=d()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case u:return{...y(e,{type:p,payload:{...n,buID:n.id||s()(),name:"StateMachine-"+(e.allIds.length+1)}})};case o.g:return n.type===l.r.BU?{...y(e,{type:p,payload:{...n,buID:n.id}})}:e;case o.a:return e.byIds[n]?{...y(e,{type:b,payload:{buID:n}})}:e;case o.j:return n.type===l.r.BU?{...y(e,{type:m,payload:{...n,buID:n.id}})}:e;default:return n&&n.buID?{...y(e,t)}:e}}),{filter:Object(c.includeAction)([u,b]),ignoreInitialState:!0});const g=Object(r.a)((e=>e.bu.entities.present.byIds),((e,t)=>t),((e,t)=>e[t]&&e[t].present))},282:function(e,t,n){},283:function(e,t){window.isStandalone=!1,window.isDev=!0,window.require=window.require||(()=>({}))},296:function(e,t,n){},30:function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return E})),n.d(t,"e",(function(){return v})),n.d(t,"k",(function(){return x})),n.d(t,"b",(function(){return I})),n.d(t,"f",(function(){return w})),n.d(t,"c",(function(){return O})),n.d(t,"m",(function(){return S})),n.d(t,"i",(function(){return j})),n.d(t,"l",(function(){return C}));var a=n(12),s=n(4),i=n(1),o=n(19),l=n(21);const r="neditor/process/ui/SELECT_NODE",c="neditor/process/ui/DESELECT_NODE",d="neditor/process/ui/HIGHLIGHT_NODE",u="neditor/process/ui/EDIT_NODE",p="neditor/process/ui/TOGGLE_JUMP",m="neditor/process/ui/HIDE_JUMP",b="neditor/process/ui/TOGGLE_HIDE",h={selectedNodes:[],highlightedNodes:[],editingNodes:[],clipboard:{nodes:[]},showJumps:[],loading:!1,hideElements:{nodeNames:!1,subnodes:!1,jumps:!0}};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case a.g:return n.type===i.r.PROCESS?{...e,[n.id]:{nodesToDelete:[]}}:e;case a.a:if(e[n]){const t={...e};return delete t[n],t}return e;case a.d:return n.filetype===i.r.PROCESS?{...e,loading:!0}:e;case a.e:return n.filetype===i.r.PROCESS?{...e,loading:!1}:e;case a.f:return n.process&&n.filetype===i.r.PROCESS?{...e,...n.process.ui,loading:!1}:{...e,loading:!1};case r:return{...e,selectedNodes:[...e.selectedNodes,n.id]};case c:return{...e,selectedNodes:e.selectedNodes.filter((e=>e!==n.id))};case d:return{...e,highlightedNodes:n.on?[...e.highlightedNodes,n.id]:e.highlightedNodes.filter((e=>e!==n.id))};case u:return{...e,editingNodes:n.on?[...e.editingNodes,n.id]:e.editingNodes.filter((e=>e!==n.id))};case s.d:return{...e,clipboard:{...e.clipboard,nodes:n.nodes.map((e=>({...n.process.nodes.byIds[e]})))}};case s.e:return{...e,clipboard:{...e.clipboard,nodes:e.selectedNodes.filter((e=>n.process.nodes.allIds.includes(e))).map((e=>({...n.process.nodes.byIds[e]})))}};case s.l:return!n.forceDelete&&n.confirmBeforeDelete?{...e,selectedNodes:e.selectedNodes.filter((e=>e!==n.id)),highlightedNodes:e.highlightedNodes.filter((e=>e!==n.id)),editingNodes:e.editingNodes.filter((e=>e!==n.id)),[n.procID]:{...e[n.procID],nodesToDelete:[...e[n.procID].nodesToDelete,n.id]}}:{...e,selectedNodes:e.selectedNodes.filter((e=>e!==n.id)),highlightedNodes:e.highlightedNodes.filter((e=>e!==n.id)),editingNodes:e.editingNodes.filter((e=>e!==n.id)),[n.procID]:{...e[n.procID],nodesToDelete:e[n.procID].nodesToDelete.filter((e=>e!==n.id))}};case p:return{...e,showJumps:void 0===n.on?e.showJumps.some((e=>e.jump===n.id&&e.status===n.status))?e.showJumps.filter((e=>e.jump!==n.id)):[...e.showJumps.filter((e=>e.jump!==n.id)),{jump:n.id,status:n.status||"on"}]:n.on?[...e.showJumps.filter((e=>e.jump!==n.id)),{jump:n.id,status:n.status||"on"}]:e.showJumps.filter((e=>e.jump!==n.id))};case m:return{...e,showJumps:e.showJumps.filter((e=>e.jump!==n.id))};case b:return{...e,hideElements:{...e.hideElements,[n.element]:void 0===n.on?!e.hideElements[n.element]:n.on}};default:return e}};const y=Object(o.a)((e=>e.process.ui.clipboard.nodes),(e=>e.length>0)),g=(Object(o.a)((e=>e.process.ui.selectedNodes)),Object(o.a)((e=>e.process.ui.highlightedNodes),((e,t)=>t),((e,t)=>e.includes(t)))),f=Object(o.a)((e=>e.process.ui.editingNodes),((e,t)=>t),((e,t)=>e.includes(t))),E=Object(o.a)((e=>e.process.ui.showJumps),((e,t)=>t),((e,t)=>e.some((e=>e.jump===t))?e.find((e=>e.jump===t)).status:null)),v=(Object(l.a)((e=>e.process.entities.byIds),((e,t)=>t),((e,t)=>!!e[t]&&e[t].present.nodes.allIds.every((n=>!e[t].present.nodes.byIds[n].subs||0===e[t].present.nodes.byIds[n].subs.length||e[t].present.nodes.byIds[n].collapsed)))),Object(l.a)((e=>e.process.ui),(e=>e.hideElements.nodeNames))),x=(Object(l.a)((e=>e.process.ui),(e=>e.hideElements.jumps)),Object(l.a)((e=>e.process.ui),(e=>e.hideElements.subnodes)),e=>t=>t({type:r,payload:{id:e}})),I=e=>t=>t({type:c,payload:{id:e}}),w=(e,t)=>n=>n({type:d,payload:{id:e,on:t}}),O=(e,t)=>n=>n({type:u,payload:{id:e,on:t}}),S=(e,t,n)=>a=>a({type:p,payload:{id:e,status:t,on:n}}),j=(e,t,n)=>t=>t({type:m,payload:{id:e}}),C=(e,t)=>n=>n({type:b,payload:{element:e,on:t}})},318:function(e,t){},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"e",(function(){return h})),n.d(t,"i",(function(){return y})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return f})),n.d(t,"j",(function(){return E})),n.d(t,"g",(function(){return v}));var a=n(12),s=n(10),i=n(1),o=n(19),l=n(28),r=n(21),c="neditor/bu/ui/UPDATE_EDITOR_SCALE",d="neditor/bu/ui/UPDATE_EDITOR_POSITION",u="neditor/bu/ui/SELECT_BU_STATE",p="neditor/bu/ui/DESELECT_BU_STATE";const m={selectedBUStates:[],clipboard:{buStates:[]},loading:!1};t.f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;switch(t.type){case c:return{...e,[n.buID]:{...e[n.buID],buCanvasScale:n.scale}};case d:return{...e,[n.buID]:{...e[n.buID],buCanvasPosition:n.position}};case l.b:case a.g:return t.type===l.b||n.type===i.r.BU?{...e,[n.id]:{buCanvasScale:1,buCanvasPosition:{x:0,y:0},buState:null,statesToDelete:[]}}:e;case a.a:if(e[n]){const t={...e};return delete t[n],t}return e;case a.d:return n.filetype===i.r.BU?{...e,loading:!0}:e;case a.e:return n.filetype===i.r.BU?{...e,loading:!1}:e;case a.f:return n.bu&&n.filetype===i.r.BU?{...e,...n.bu.ui,loading:!1}:{...e,loading:!1};case u:return{...e,selectedBUStates:[...e.selectedBUStates,n.buStateID]};case p:return{...e,selectedBUStates:e.selectedBUStates.filter((e=>e!==n.buStateID))};case s.e:return{...e,[n.buID]:{...e[n.buID],statesToDelete:e[n.buID].statesToDelete.filter((e=>e!==n.id))}};case s.h:return{...e,clipboard:{...e.clipboard,buStates:n.buStates.map((e=>({...n.bu.buStates.byIds[e],behavior:Object(s.G)(n.bu,n.bu.buStates.byIds[e].behavior,!0)})))}};case s.i:return{...e,clipboard:{...e.clipboard,buStates:e.selectedBUStates.filter((e=>n.bu.buStates.allIds.includes(e))).map((e=>({...n.bu.buStates.byIds[e],behavior:Object(s.G)(n.bu,n.bu.buStates.byIds[e].behavior,!0)})))}};case s.n:return e[n.buID].buState===n.buStateID?e:{...e,[n.buID]:{...e[n.buID],buState:n.buStateID}};case s.g:return e[n.buID].buState!==n.buStateID?e:{...e,[n.buID]:{...e[n.buID],buState:""}};case s.l:return!n.forceDelete&&n.confirmBeforeDelete?{...e,[n.buID]:{...e[n.buID],statesToDelete:[...e[n.buID].statesToDelete,n.id]}}:{...e,[n.buID]:{...e[n.buID],buState:e[n.buID].buState===n.id?"":e[n.buID].buState,statesToDelete:e[n.buID].statesToDelete.filter((e=>e!==n.id))}};case s.b:return{...e,latestNode:n.id};case s.d:return{...e,latestNode:null};default:return e}};const b=(e,t)=>e.ui[t]&&e.entities.present.byIds[t]&&e.entities.present.byIds[t].present.buStates.allIds.includes(e.ui[t].buState)?e.ui[t].buState:"",h=Object(r.a)((e=>e.bu),((e,t)=>t),((e,t)=>b(e,t))),y=Object(o.a)((e=>e.bu.ui.clipboard.buStates),(e=>e.length>0)),g=(e,t)=>n=>n({type:c,payload:{buID:e,scale:t}}),f=(e,t)=>n=>n({type:d,payload:{buID:e,position:t}}),E=e=>t=>t({type:u,payload:{buStateID:e}}),v=e=>t=>t({type:p,payload:{buStateID:e}})},320:function(e,t){},4:function(e,t,n){"use strict";n.d(t,"u",(function(){return y})),n.d(t,"q",(function(){return g})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return E})),n.d(t,"k",(function(){return v})),n.d(t,"a",(function(){return x})),n.d(t,"j",(function(){return I})),n.d(t,"v",(function(){return w})),n.d(t,"w",(function(){return O})),n.d(t,"z",(function(){return S})),n.d(t,"y",(function(){return j})),n.d(t,"x",(function(){return C})),n.d(t,"l",(function(){return D})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return L})),n.d(t,"p",(function(){return T})),n.d(t,"o",(function(){return B})),n.d(t,"n",(function(){return A})),n.d(t,"s",(function(){return R})),n.d(t,"f",(function(){return P})),n.d(t,"t",(function(){return F})),n.d(t,"r",(function(){return U})),n.d(t,"m",(function(){return $})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return q})),n.d(t,"g",(function(){return G})),n.d(t,"S",(function(){return H})),n.d(t,"Z",(function(){return W})),n.d(t,"ab",(function(){return Z})),n.d(t,"cb",(function(){return J})),n.d(t,"db",(function(){return X})),n.d(t,"bb",(function(){return Q})),n.d(t,"U",(function(){return ee})),n.d(t,"T",(function(){return te})),n.d(t,"Q",(function(){return ne})),n.d(t,"O",(function(){return ae})),n.d(t,"jb",(function(){return se})),n.d(t,"ib",(function(){return ie})),n.d(t,"lb",(function(){return oe})),n.d(t,"P",(function(){return le})),n.d(t,"N",(function(){return re})),n.d(t,"hb",(function(){return ce})),n.d(t,"M",(function(){return de})),n.d(t,"kb",(function(){return ue})),n.d(t,"V",(function(){return pe})),n.d(t,"R",(function(){return me})),n.d(t,"W",(function(){return be})),n.d(t,"C",(function(){return he})),n.d(t,"B",(function(){return ye})),n.d(t,"I",(function(){return ge})),n.d(t,"A",(function(){return fe})),n.d(t,"H",(function(){return Ee})),n.d(t,"pb",(function(){return ve})),n.d(t,"qb",(function(){return xe})),n.d(t,"rb",(function(){return Ie})),n.d(t,"sb",(function(){return we})),n.d(t,"mb",(function(){return Oe})),n.d(t,"J",(function(){return Se})),n.d(t,"D",(function(){return je})),n.d(t,"E",(function(){return Ce})),n.d(t,"fb",(function(){return ke})),n.d(t,"Y",(function(){return De})),n.d(t,"X",(function(){return Ne})),n.d(t,"L",(function(){return Le})),n.d(t,"nb",(function(){return Te})),n.d(t,"F",(function(){return Be})),n.d(t,"ob",(function(){return Ae})),n.d(t,"eb",(function(){return Re})),n.d(t,"gb",(function(){return Pe})),n.d(t,"K",(function(){return Fe}));var a=n(17),s=n.n(a),i=n(8),o=n(1),l=n(12),r=n(45),c=n.n(r),d=n(101),u=n(25),p=n(21),m=n(19),b=n(28),h=n(10);const y="neditor/process/UNDO_PROCESS",g="neditor/process/REDO_PROCESS",f="neditor/process/ADD_NODE",E="neditor/process/ADD_LINK",v="neditor/process/DELETE_LINK",x="neditor/process/ADD_JUMP",I="neditor/process/DELETE_JUMP",w="neditor/process/UPDATE_JUMP",O="neditor/process/UPDATE_NODE",S="neditor/process/UPDATE_NODE_TYPE",j="neditor/process/UPDATE_NODE_POSITION",C="neditor/process/UPDATE_NODES_POSITION",k="neditor/process/COLLAPSE_NODE",D="neditor/process/DELETE_NODE",N="neditor/process/COPY_NODE",L="neditor/process/COPY_SELECTED_NODES",T="neditor/process/PASTE_NODES",B="neditor/process/LINK_TASK_TO_BU",A="neditor/process/LINK_CIE_TO_TASK",R="neditor/process/STOP_EDITING_BU",P="neditor/process/CREATE_SUBPROCESS",F="neditor/process/TURN_TASK_TO_SUBPROCESS",U="neditor/process/RENAME_SUBPROCESS",$="neditor/process/DELETE_SUBPROCESS",_="neditor/process/OPEN_PROCESS_PAGE",M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{id:e||s()(),name:t,nodes:n,nodePositions:{}}},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{id:e||s()(),name:"begin",type:o.B.BEGIN,description:"",exits:t}},q={id:"",name:"",params:[]},G=()=>({id:s()(),name:"",type:"value",value:"",target:""}),K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{id:s()(),event:"",from:e,to:t,actions:[]}},z={jumps:[],actors:[],tools:[],events:[],behaviorUnits:[],subProcesses:{byIds:{},allIds:[]},nodes:{byIds:{},allIds:[]},nodePositions:{},id:"",name:"",page:null};t.G=c()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;const{payload:n}=t;let a,r;switch(t.type){case d.a:return{...z,id:n.id,name:n.name||""};case l.f:return n.filetype===o.r.PROCESS&&n.process?{...n.process.process}:e;case d.b:return n.type===o.r.PROCESS?{...e,name:Object(i.d)(n.path)}:e;case O:return{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.node.id]:n.node}}};case S:return{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.id]:{...e.nodes.byIds[n.id],type:n.type,behaviorUnit:e.nodes.byIds[n.id].behaviorUnit||q,cies:e.nodes.byIds[n.id].cies||{enabled:!1,values:[]}}}}};case j:return{...e,nodePositions:{...e.nodePositions,[n.id]:{...e.nodePositions[n.id],x:n.position.x,y:n.position.y}}};case C:return{...e,nodePositions:Object(i.b)(Object.keys(e.nodePositions).map((t=>n.nodes.includes(t)?{...e.nodePositions[t],x:e.nodePositions[t].x+n.offset.x,y:e.nodePositions[t].y+n.offset.y}:e.nodePositions[t])),"id")};case k:return{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.id]:{...e.nodes.byIds[n.id],collapsed:n.collapsed}}}};case f:if(n.type===o.B.BEGIN&&te(e,n.page))return e;let c="TASK "+e.nodes.allIds.length;const p=t=>e.nodes.byIds[t].name===c;let m=0;for(;e.nodes.allIds.some(p);)c="TASK "+m,m++;let h={id:n.id,name:c,type:n.type||o.B.TASK,description:"",entries:[],exits:[]};return h.type!==o.B.TASK&&h.type!==o.B.BU||(h={...h,duration:-1,options:{timer:{enabled:!1,value:0},events:{enabled:!1,values:[]}},tools:{enabled:!1,values:[]},subs:[],subProcess:null,actors:[]},h.type===o.B.BU?h.behaviorUnit=q:h.cies={enabled:!1,values:[]}),n.node&&(h={...h,...n.node}),{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[h.id]:h},allIds:[...e.nodes.allIds,h.id]},nodePositions:{...e.nodePositions,[h.id]:{id:h.id,x:n.x||0,y:n.y||0}},subProcesses:e.page?{...e.subProcesses,byIds:{...e.subProcesses.byIds,[e.page]:{...e.subProcesses.byIds[e.page],nodes:[...e.subProcesses.byIds[e.page].nodes,h.id]}}}:e.subProcesses};case D:if(!n.forceDelete&&n.confirmBeforeDelete)return e;const y=e.subProcesses.allIds.find((t=>e.subProcesses.byIds[t].nodes.includes(n.id)));return{...e,nodes:{...e.nodes,byIds:Object(i.b)(e.nodes.allIds.filter((e=>e!==n.id)).map((t=>{const a={...e.nodes.byIds[t]};return a.entries&&(a.entries=e.nodes.byIds[t].entries.filter((e=>e!==n.id))),a.exits&&(a.exits=e.nodes.byIds[t].exits.filter((e=>e!==n.id))),a.subs&&(a.subs=e.nodes.byIds[t].subs.filter((e=>e!==n.id))),a})),"id"),allIds:e.nodes.allIds.filter((e=>e!==n.id))},subProcesses:y?{...e.subProcesses,byIds:{...e.subProcesses.byIds,[y]:{...e.subProcesses.byIds[y],nodes:e.subProcesses.byIds[y].nodes.filter((e=>e!==n.id))}}}:e.subProcesses,jumps:e.jumps.filter((e=>e.from!==n.id&&e.to!==n.id)).map((e=>({...e,actions:e.actions.filter((e=>n.id!==e.lockerID&&n.id!==e.taskID))})))};case T:if(n.nodes=n.nodes.filter((e=>e.type!==o.B.BEGIN)),0===n.nodes.length)return e;const g=n.nodes.map((e=>({...e,id:s()(),entries:[],exits:[],subs:[]})));let N={x:0,y:0},L=[];if(n.mouse)if(1===n.nodes.length)L=[{id:g[0].id,x:n.mouse.x,y:n.mouse.y}];else{let t=n.nodes.map((t=>({id:t.id,x:e.nodePositions[t.id].x,y:e.nodePositions[t.id].y}))).sort(((e,t)=>e.x<t.x?-1:1));const a=t[0].x+(t[t.length-1].x-t[0].x)/2;t=t.sort(((e,t)=>e.y<t.y?-1:1));const s=t[0].y+(t[t.length-1].y-t[0].y)/2;N.x=n.mouse.x-a,N.y=n.mouse.y-s}else N.x=50,N.y=50;return(!n.mouse||n.nodes.length>1)&&(L=n.nodes.map(((t,n)=>({id:g[n].id,x:e.nodePositions[t.id].x+N.x,y:e.nodePositions[t.id].y+N.y})))),{...e,nodes:{byIds:{...e.nodes.byIds,...Object(i.b)(g,"id")},allIds:[...e.nodes.allIds,...g.map((e=>e.id))]},nodePositions:{...e.nodePositions,...Object(i.b)(L,"id")},subProcesses:e.page?{...e.subProcesses,byIds:{...e.subProcesses.byIds,[e.page]:{...e.subProcesses.byIds[e.page],nodes:[...e.subProcesses.byIds[e.page].nodes,...g.map((e=>e.id))]}}}:e.subProcesses};case E:return a="entry"===n.type?"entries":"exit"===n.type?"exits":"jump"===n.type?"jump":"subs",r="entry"===n.type?"exits":"entries",me(e,n.from).includes(n.to)||me(e,n.to).includes(n.from)?e:{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.from]:{...e.nodes.byIds[n.from],[a]:(e.nodes.byIds[n.from].entries||[]).includes(n.to)||(e.nodes.byIds[n.from].exits||[]).includes(n.to)||(e.nodes.byIds[n.from].subs||[]).includes(n.to)?e.nodes.byIds[n.from][a]:[...e.nodes.byIds[n.from][a],n.to]},[n.to]:{...e.nodes.byIds[n.to],[r]:(e.nodes.byIds[n.to].entries||[]).includes(n.from)||(e.nodes.byIds[n.to].exits||[]).includes(n.from)||(e.nodes.byIds[n.to].subs||[]).includes(n.from)?e.nodes.byIds[n.to][r]:[...e.nodes.byIds[n.to][r],n.from]}}}};case v:return a="sub"===n.type?"subs":"exits",r="entries",{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.from]:e.nodes.byIds[n.from][a]?{...e.nodes.byIds[n.from],[a]:e.nodes.byIds[n.from][a].filter((e=>e!==n.to))}:e.nodes.byIds[n.from],[n.to]:e.nodes.byIds[n.to][r]?{...e.nodes.byIds[n.to],[r]:e.nodes.byIds[n.to][r].filter((e=>e!==n.from))}:e.nodes.byIds[n.to]}}};case x:return n.to&&n.from&&me(e,n.to).includes(n.from)?e:{...e,jumps:[...e.jumps,K(n.from,n.to)]};case I:return{...e,jumps:e.jumps.filter((e=>e.id!==n.id))};case w:return{...e,jumps:e.jumps.map((e=>e.id!==n.jump.id?e:{...e,to:n.jump.to,from:n.jump.from,event:n.jump.event,actions:n.jump.actions}))};case B:return{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.id]:{...e.nodes.byIds[n.id],behaviorUnit:{...e.nodes.byIds[n.id].behaviorUnit,id:n.buID,path:n.path||"",isLoaded:n.isLoaded}}}}};case A:return{...e,nodes:{...e.nodes,byIds:{...e.nodes.byIds,[n.id]:{...e.nodes.byIds[n.id],cies:{...e.nodes.byIds[n.id].cies,values:void 0===n.index||null===n.index||e.nodes.byIds[n.id].cies.values.length<=n.index?[...e.nodes.byIds[n.id].cies.values,{id:n.buID,params:[]}]:e.nodes.byIds[n.id].cies.values.map(((e,t)=>t===n.index?{...e,id:n.buID}:e))}}}}};case b.b:return n.procID===e.id?{...e,behaviorUnits:e.behaviorUnits.includes(n.id)?e.behaviorUnits:[...e.behaviorUnits,n.id]}:e;case b.c:return n.procID===e.id?{...e,behaviorUnits:e.behaviorUnits.includes(n.buID)?e.behaviorUnits.filter((e=>e!==n.buID)):e.behaviorUnits}:e;case"neditor/process/OPEN_BU_IN_PROCESS":return{...e,editBU:n.buID,editBUHistoryIndex:n.historyIndex};case R:return{...e,editBU:null};case u.a:case u.b:case u.c:switch(n.type){case"tools":return{...e,tools:Object(u.e)(e.tools,t)};case"actors":return{...e,actors:Object(u.e)(e.actors,t)};case"events":return{...e,events:Object(u.e)(e.events,t)};default:return e}case P:const G=s()(),Y={...e.nodes.byIds,[G]:V(G)};return n.attachTo&&(Y[n.attachTo]={...e.nodes.byIds[n.attachTo],subProcess:n.id}),{...e,subProcesses:{allIds:[...e.subProcesses.allIds,n.id],byIds:{...e.subProcesses.byIds,[n.id]:M(n.id,n.name||"Sub-Process #"+(e.subProcesses.allIds.length+1),[...n.nodes,G])}},nodes:{allIds:[...e.nodes.allIds,G],byIds:Y},nodePositions:{...e.nodePositions,[G]:{id:G,x:420,y:110}}};case F:const H=me(e,n.nodeID),W=V(s()(),[H[0]]),Z=H.filter((t=>e.nodes.byIds[t].entries.some((e=>!H.includes(e))))).map((t=>({...e.nodes.byIds[t],entries:e.nodes.byIds[t].entries.filter((e=>H.includes(e)))}))),J=Z.map((t=>e.nodes.byIds[t.id].entries.filter((e=>!H.includes(e))))).reduce(((e,t)=>e.concat(t)),[]).map((t=>({...e.nodes.byIds[t],exits:e.nodes.byIds[t].exits.filter((e=>!H.includes(e)))}))),X=Z.concat(J).map((t=>H.includes(t.id)&&e.nodes.byIds[t.id].entries.includes(n.nodeID)?{...t,entries:[...t.entries,W.id]}:t)),Q=e.subProcesses.allIds.find((t=>e.subProcesses.byIds[t].nodes.includes(n.nodeID))),ee={...e.subProcesses.byIds,[n.id]:{...M(n.id,"Sub-Process #"+(e.subProcesses.allIds.length+1),H),nodes:[...H,W.id]}};return Q&&(ee[Q]={...ee[Q],nodes:ee[Q].nodes.filter((e=>!H.includes(e)))}),{...e,subProcesses:{allIds:[...e.subProcesses.allIds,n.id],byIds:ee},nodes:{allIds:[...e.nodes.allIds,W.id],byIds:{...Object(i.b)(e.nodes.allIds.map((t=>X.some((e=>e.id===t))?X.find((e=>e.id===t)):e.nodes.byIds[t])),"id"),[n.nodeID]:{...e.nodes.byIds[n.nodeID],subs:[],subProcess:n.id},[W.id]:W}},nodePositions:{...e.nodePositions,[W.id]:{id:W.id,x:420,y:110}},jumps:e.jumps.filter((e=>H.includes(e.from)&&H.includes(e.to)||!H.includes(e.from)&&!H.includes(e.to))).map((e=>({...e,actions:e.actions.filter((t=>[o.u.LOCK,o.u.UNLOCK].includes(t.type)?!(H.includes(t.taskID)&&!H.includes(t.lockerID)||!H.includes(t.taskID)&&H.includes(t.lockerID)):!(H.includes(e.from)&&!H.includes(t.taskID)||!H.includes(e.from)&&H.includes(t.taskID))))})))};case _:return{...e,page:n.id};case U:return{...e,subProcesses:{...e.subProcesses,byIds:{...e.subProcesses.byIds,[n.id]:{...e.subProcesses.byIds[n.id],name:n.name}}}};case $:return{...e,subProcesses:{byIds:Object(i.b)(e.subProcesses.allIds.filter((e=>e!==n.id)).map((t=>e.subProcesses.byIds[t])),"id"),allIds:e.subProcesses.allIds.filter((e=>e!==n.id))},nodes:{allIds:e.nodes.allIds.filter((t=>!e.subProcesses.byIds[n.id].nodes.includes(t))),byIds:Object(i.b)(e.nodes.allIds.filter((t=>!e.subProcesses.byIds[n.id].nodes.includes(t))).map((t=>e.nodes.byIds[t].subProcess===n.id?{...e.nodes.byIds[t],subProcess:null}:e.nodes.byIds[t])),"id")},nodePositions:Object(i.b)(Object.keys(e.nodePositions).filter((t=>!e.subProcesses.byIds[n.id].nodes.includes(t))).map((t=>e.nodePositions[t])),"id"),page:e.page===n.id?null:e.page,jumps:e.jumps.filter((t=>!e.subProcesses.byIds[n.id].nodes.includes(t.to)&&!e.subProcesses.byIds[n.id].nodes.includes(t.from)))};default:return e}}),{groupBy:Object(r.groupByActionTypes)([j,C,D,v]),filter:Object(r.includeAction)([f,E,v,x,I,w,O,j,C,S,k,D,T,B,A,b.b,b.c,u.a,u.b,u.c,P,F,_,U,$]),ignoreInitialState:!0,undoType:y,redoType:g});const Y=Object(p.a)((e=>e.nodes),((e,t)=>t),((e,t)=>e.byIds[t])),H=(()=>{let e={};return(t,n)=>{if(!t.nodes.byIds[n])return null;const{type:a,name:s}=t.nodes.byIds[n],{x:i,y:o}=t.nodePositions[n];return e[n]&&i===e[n].x&&o===e[n].y&&a===e[n].type&&s===e[n].name||(e[n]={x:i,y:o,type:a,name:s}),e[n]}})(),W=Object(m.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return e.entities.byIds[a].present.nodes.byIds[n].entries&&(e.entities.byIds[a].present.nodes.byIds[n].entries.length>0||e.entities.byIds[a].present.jumps.some((e=>e.to===n)))})),Z=Object(m.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return e.entities.byIds[a].present.nodes.byIds[n].exits&&e.entities.byIds[a].present.nodes.byIds[n].exits.length>0})),J=Object(m.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return e.entities.byIds[a].present.nodes.byIds[n].subs&&e.entities.byIds[a].present.nodes.byIds[n].subs.length>0})),X=(Object(m.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return!!e.entities.byIds[a].present.nodes.byIds[n].subProcess})),Object(m.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return e.entities.byIds[a].present.nodes.byIds[n].subProcess}))),Q=Object(m.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return e.entities.byIds[a].present.jumps.some((e=>e.from===n))})),ee=Object(m.a)((e=>e.process.entities.byIds),(e=>e.process.ui),((e,t)=>t),((e,t,n)=>t.selectedNodes.length>0&&!!e[n]&&e[n].present.nodes.allIds.some((e=>t.selectedNodes.includes(e))))),te=Object(m.a)((e=>e.subProcesses),(e=>e.nodes),((e,t)=>t),((e,t,n)=>t.allIds.filter((t=>n===ne(e,t))).some((e=>t.byIds[e].type===o.B.BEGIN)))),ne=(e,t)=>e.allIds.find((n=>e.byIds[n].nodes.includes(t)))||null,ae=Object(p.a)((e=>e.nodes),(e=>e.subProcesses),(e=>e.jumps),((e,t)=>{let{includeCollapsed:n,page:a}=t;return{includeCollapsed:n,page:a}}),((e,t,n,a)=>{let{includeCollapsed:s,page:i}=a;return e.allIds.filter((a=>i===ne(t,a)&&(s||!pe(e,n,a))))})),se=Object(p.a)(((e,t)=>e.process.entities.byIds[t]&&e.process.entities.byIds[t].present.page),((e,t)=>e.process.entities.byIds[t]&&e.process.entities.byIds[t].present.subProcesses),((e,t,n)=>e?{id:e,name:t.byIds[e].name}:{id:null})),ie=Object(p.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return Y(e.entities.byIds[a].present,n)})),oe=Object(p.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return H(e.entities.byIds[a].present,n)})),le=(Object(p.a)((e=>e.process),((e,t)=>{let{procID:n,type:a}=t;return{procID:n,type:a}}),((e,t)=>{let{procID:n,type:a}=t;return e.entities.byIds[n].present.nodes.allIds.filter((t=>e.entities.byIds[n].present.nodes.byIds[t].type===a))})),Object(p.a)((e=>e.nodes),(e=>e.allIds.map((t=>{const n=e.byIds[t];return[...(n.entries||[]).map((n=>({from:n,to:t,type:(e.byIds[n].subs||[]).includes(t)?"sub":"normal"}))).filter((e=>e.from!==e.to)),...(n.exits||[]).map((e=>({from:t,to:e}))).filter((e=>e.from!==e.to)),...(n.subs||[]).map((e=>({from:t,to:e,type:"sub"}))).filter((e=>e.from!==e.to))]})).reduce(((e,t)=>e.concat(t)),[]).filter(((e,t,n)=>n.findIndex((t=>t.from===e.from&&t.to===e.to))===t))))),re=()=>Object(p.a)(((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n].present.nodes}),((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n].present.jumps}),((e,t)=>{let{id:n}=t;return n}),((e,t,n)=>t.filter((e=>e.from===n)).map((t=>({...t,toName:t.to&&e.byIds[t.to].name,fromName:t.from&&e.byIds[t.from].name}))))),ce=Object(p.a)(((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.jumps:[]}),((e,t)=>{let{procID:n,from:a,to:s,jump:o}=t;return e.process.entities.byIds[n]?Object(i.b)(Object.keys(e.process.entities.byIds[n].present.nodePositions).filter((e=>e===a||e===s||e===o.from||e===o.to)).map((t=>e.process.entities.byIds[n].present.nodePositions[t])),"id"):[]}),((e,t)=>{let{procID:n,from:a,to:s,jump:i}=t;return{procID:n,from:a,to:s,jump:i}}),((e,t,n)=>{let{from:a,to:s,jump:i}=n;const l=e.find((e=>e.from===i.from&&e.to===i.to&&e.actions.length>0)).actions.find((e=>e.type===o.u.LOCK||e.type===o.u.UNLOCK?e.taskID===a&&e.lockerID===s:e.taskID===a));return l?{from:l.taskID&&{id:l.taskID,x:t[l.taskID].x,y:t[l.taskID].y,width:o.y,height:o.v},to:l.lockerID&&{id:l.lockerID,x:t[l.lockerID].x,y:t[l.lockerID].y,width:o.y,height:o.v},type:l.type,jump:{from:{id:i.from,x:t[i.from].x,y:t[i.from].y,width:o.y,height:o.v},to:{id:i.to,x:t[i.to].x,y:t[i.to].y,width:o.y,height:o.v}}}:null})),de=Object(p.a)(((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.jumps:[]}),((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.nodes:[]}),((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.subProcesses:{}}),(e=>e.process.ui.showJumps),(e=>e.process.ui.hideElements.jumps),((e,t)=>{let{procID:n,page:a}=t;return{procID:n,page:a}}),((e,t,n,a,s,i)=>{let{procID:l,page:r}=i;return l?e.filter((i=>i.from&&i.to&&i.actions.length>0&&!pe(t,e,i.from)&&!pe(t,e,i.to)&&(!s||a.some((e=>e.jump===i.id)))&&(!r&&(!n.allIds.some((e=>n.byIds[e].nodes.includes(i.from)))||!n.allIds.some((e=>n.byIds[e].nodes.includes(i.to))))||r&&n.byIds[r].nodes.includes(i.from)&&n.byIds[r].nodes.includes(i.to)))).map((e=>e.actions.filter((e=>(e.type===o.u.LOCK||e.type===o.u.UNLOCK)&&e.taskID&&e.lockerID||e.taskID)).map((t=>({from:t.taskID,to:t.lockerID,type:t.type,jump:{from:e.from,to:e.to}}))))).reduce(((e,t)=>e.concat(t)),[]):[]})),ue=Object(p.a)(((e,t)=>e.process.entities.byIds[t]&&e.process.entities.byIds[t].present.subProcesses),((e,t)=>t),((e,t)=>e&&e.allIds.map((t=>({id:t,name:e.byIds[t].name}))))),pe=(e,t,n)=>{const a=e.byIds[n].entries&&e.byIds[n].entries.some((a=>e.byIds[a].subs&&e.byIds[a].subs.includes(n)&&e.byIds[a].collapsed||pe(e,t,a))),s=t.filter((e=>e.to===n)),i=s.length>0&&s.every((n=>pe(e,t,n.from)));return a||i},me=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const i=e.nodes.byIds[t],l=i.subProcess?e.subProcesses.byIds[i.subProcess].nodes.filter((t=>e.nodes.byIds[t].entries&&e.nodes.byIds[t].entries.some((t=>e.nodes.byIds[t].type===o.B.BEGIN)))):i.subs,r=-1!==n&&s>n||!l?[]:l.map((t=>{const a=me(e,t,n,!0,s+1);return[t].concat(a)})).reduce(((e,t)=>e.concat(t)),[]);if(a){const t=i.exits.map((t=>[t].concat(me(e,t,n,!0,s+1)))).reduce(((e,t)=>e.concat(t)),[]);return r.concat(t)}return r},be=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.nodes.allIds.some((a=>a!==t&&me(e,a,n?-1:0).includes(t)))},he=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return o=>{const l=s()();return o({type:f,payload:{id:l,x:n,y:a,type:e,page:t,node:i}}),l}},ye=(e,t,n,a)=>s=>s({type:E,payload:{procID:e,to:n,from:t,type:a}}),ge=(e,t,n,a)=>s=>s({type:v,payload:{procID:e,to:n,from:t,type:a}}),fe=(e,t,n)=>a=>a({type:x,payload:{procID:e,to:n,from:t}}),Ee=(e,t)=>n=>n({type:I,payload:{procID:e,id:t}}),ve=(e,t)=>n=>n({type:w,payload:{procID:e,jump:t}}),xe=(e,t)=>n=>n({type:O,payload:{procID:e,node:t}}),Ie=(e,t,n)=>a=>a({type:S,payload:{procID:e,id:t,type:n}}),we=(e,t)=>(n,a)=>n({type:C,payload:{procID:e,offset:t,nodes:a().process.ui.selectedNodes}}),Oe=(e,t,n)=>a=>a({type:k,payload:{procID:e,id:t,collapsed:n}}),Se=(e,t)=>n=>n({type:D,payload:{procID:e,id:t}}),je=(e,t)=>(n,a)=>n({type:N,payload:{nodes:t,process:a().process.entities.byIds[e].present}}),Ce=e=>(t,n)=>t({type:L,payload:{procID:e,process:n().process.entities.byIds[e].present}}),ke=(e,t)=>(n,a)=>n({type:T,payload:{procID:e,mouse:t,nodes:a().process.ui.clipboard.nodes}}),De=(e,t,n,a,s)=>i=>i({type:B,payload:{procID:e,id:t,buID:n,path:a,isLoaded:s}}),Ne=(e,t,n,a)=>s=>s({type:A,payload:{procID:e,id:t,buID:n,index:a}}),Le=(e,t)=>n=>{n({type:"neditor/process/OPEN_BU_IN_PROCESS",payload:{procID:e,buID:t}}),n({type:h.f,payload:{buID:t}})},Te=e=>t=>t({type:R,payload:{procID:e}}),Be=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(i,o)=>i({type:P,payload:{procID:e,id:s()(),name:t,attachTo:n,nodes:a?o().process.ui.selectedNodes:[]}})},Ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n=>n({type:F,payload:{procID:e,id:s()(),nodeID:t}})},Re=(e,t)=>n=>n({type:_,payload:{procID:e,id:t}}),Pe=(e,t,n)=>a=>a({type:U,payload:{procID:e,id:t,name:n}}),Fe=(e,t)=>n=>n({type:$,payload:{procID:e,id:t}})},41:function(e,t,n){"use strict";(function(e){n.d(t,"h",(function(){return I})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return C})),n.d(t,"g",(function(){return T})),n.d(t,"f",(function(){return B})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return U}));var a=n(58),s=n(17),i=n.n(s),o=n(56),l=n(10),r=n(12),c=n(1),d=n(8),u=n(45),p=n(28),m=n(4);const{remote:b,ipcRenderer:h}=window.isStandalone?window.require("electron"):{},y=window.require("fs"),g=window.require("path"),{importNEdit:f,exportNEdit:E,addFileToExport:v}=window.require("nedit-encoder"),x=window.isStandalone?b.app:{},I=function(t,n){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((async(i,l)=>{const{bu:d,process:u,file:p}=o.a.getState();let m=p.files.find((e=>e.id===t));if(!m)return void l();n||(n=m.type),m.parent&&(m=p.files.find((e=>e.id===m.parent)),t=m.id,n=m.type);let g="";const f=n===c.r.BU?O(d,d.entities.present.byIds[t].present):j(u.entities.byIds[t].present,d),E=Object(a.js2xml)(f,{compact:!1}),v=e.from(E).toString("base64");if(window.isStandalone&&(s||!(g=m.path))&&(g=b.dialog.showSaveDialog({filters:[{name:c.r.names[n],extensions:[n]}],showHiddenFiles:!1}),!g||0===g.length))return void l();const x={id:t,type:n,path:g,saved:n===c.r.BU?d.entities.present.byIds[t].present:{process:u.entities.byIds[t].present,bus:d.entities.present.allIds.filter((e=>d.entities.present.byIds[e].present.process===t)).map((e=>d.entities.present.byIds[e].present))}};if(!window.isStandalone){const e=document.createElement("a"),a=new Blob([v],{type:"application/xml"});return e.href=URL.createObjectURL(a),e.download=`${(n===c.r.BU?d.entities.present.byIds[t].present.name:u.entities.byIds[t].present.name)||"Untitled"}.${n}`,e.click(),URL.revokeObjectURL(e.href),o.a.dispatch({type:r.j,payload:x}),void i()}y.writeFile(g,v,(e=>{if(e)return l(e);h.send("set-storage",{jsonName:"recent-files",data:{files:[{type:n,path:g},...p.recentFiles.filter((e=>e.path!==g))]}}),o.a.dispatch({type:r.j,payload:x}),i()}))}))},w=t=>new Promise(((n,s)=>{const{bu:i}=o.a.getState();let l="";if(window.isStandalone&&(l=b.dialog.showSaveDialog({defaultPath:i.entities.present.byIds[t].present.name,filters:[{name:"State Machine",extensions:[c.r.BU]}],showHiddenFiles:!1}),!l||0===l.length))return s(!1);const r=O(i,i.entities.present.byIds[t].present),d=Object(a.js2xml)(r,{compact:!1});try{const a=e.from(d).toString("base64");if(window.isStandalone)y.writeFile(l,a,(e=>{if(e)return s(e);n()})),n();else{const e=document.createElement("a"),s=new Blob([a],{type:"application/xml"});e.href=URL.createObjectURL(s),e.download=(i.entities.present.byIds[t].present.name||"Untitled")+".bu",e.click(),URL.revokeObjectURL(e.href),n()}}catch(e){s(e)}})),O=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{declaration:{attributes:{version:"1.0",encoding:"utf-8"}},elements:[{type:"element",name:"behavior",attributes:n?{id:t.id,name:t.name,scale:e.ui[t.id].buCanvasScale.toString(),x:e.ui[t.id].buCanvasPosition.x.toString(),y:e.ui[t.id].buCanvasPosition.y.toString()}:{id:t.id,name:t.name},elements:t.buStates.allIds.map((e=>{const a={...t.buStates.byIds[e]};return a.behavior=Object(l.G)(t,a.behavior,!0),{type:"element",name:"state",attributes:n?{name:a.name,x:a.x,y:a.y}:{name:a.name},elements:a.behavior?S(t,a.behavior,n):[]}}))}]}},S=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.map((t=>{let a={};switch(t.type){case c.a.EVENT_LISTENER:a={type:"element",name:"event",attributes:{name:t.event||"",tags:t.tags?t.tags.join(" "):[]},elements:t.handler?S(e,t.handler,n):[]};break;case c.a.CONDITION:a={type:"element",name:"condition",attributes:{left_expression:t.expressionLeft||"",right_expression:t.expressionRight||"",type:t.conditionType?c.j.export[t.conditionType]:""},elements:[{type:"element",name:"success",elements:t.success?S(e,t.success,n):[]},{type:"element",name:"failure",elements:t.failure?S(e,t.failure,n):[]}]};break;case c.a.EVENT_TRIGGER:a={type:"element",name:"raise",attributes:{event_name:t.event||"",event_value:t.value||"",event_tags:t.tags?t.tags.join(" "):""}};break;case c.a.FUSE_EVENT:a={type:"element",name:"fuse",attributes:{event:t.event||""}};break;case c.a.UNFUSE_EVENT:a={type:"element",name:"unfuse",attributes:{event:t.event||""}};break;case c.a.SET_STATE:a={type:"element",name:"state",attributes:{name:t.value?e.buStates.byIds[t.value].name:""}};break;case c.a.SCRIPT:a={type:"element",name:"script",attributes:{type:t.scriptType},elements:[{type:"text",text:t.script}]};break;case c.a.CALL_FUNCTION:a={type:"element",name:"call",attributes:{local_attr_name:t.localAttrName,class:t.className||"",function:t.functionName||""},elements:t.params?t.params.map((e=>({type:"element",name:"arg",attributes:{value:"value"===e.type?e.value:"#"+e.value}}))):[]};break;case c.a.ASSIGN_VARIABLE:a={type:"element",name:t.variable.global?"global":"local",attributes:{name:t.variable.name,value:t.variable.value}};break;default:return a}return n&&(a.attributes.task_name=t.name||"",t.type===c.a.SET_STATE&&t.color&&(a.attributes.color=t.color)),a}))},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{declaration:{attributes:{version:"1.0",encoding:"utf-8"}},elements:[{type:"element",name:"process",attributes:{name:e.name},elements:e.nodes.allIds.map((t=>{const n={...e.nodes.byIds[t]},a={type:"element",name:"node",attributes:{},elements:[]};return n.type!==c.B.TASK&&n.type!==c.B.BU?(a.attributes={type:n.type,x:e.nodePositions[t].x,y:e.nodePositions[t].y,id:n.id},a.elements=[...n.entries?n.entries.map((e=>({type:"element",name:"entry",elements:[{type:"text",text:e}]}))):[],...n.exits.map((e=>({type:"element",name:"exit",elements:[{type:"text",text:e}]})))]):(a.attributes={type:n.type,name:n.name,description:n.description,subprocess:n.subProcess,duration:n.duration,x:e.nodePositions[t].x,y:e.nodePositions[t].y,id:n.id,timer:n.options&&n.options.timer.enabled&&n.options.timer.value>=0?n.options.timer.value:"",tools:!(!n.tools||!n.tools.enabled)||"",wait:!(!n.options||!n.options.events.enabled)||"",cies:!(!n.cies||!n.cies.enabled)||""},a.elements=[...n.entries.map((e=>({type:"element",name:"entry",elements:[{type:"text",text:e}]}))),...n.exits.map((e=>({type:"element",name:"exit",elements:[{type:"text",text:e}]}))),...n.subs.map((e=>({type:"element",name:"sub",elements:[{type:"text",text:e}]}))),...n.actors.filter((t=>t.length>0&&e.actors.length>0&&e.actors.find((e=>e.id===t)).value.length>0)).map((e=>({type:"element",name:"actor",elements:[{type:"text",text:e}]}))),...n.tools.values.filter((t=>t.length>0&&e.tools.length>0&&e.tools.find((e=>e.id===t)).value.length>0)).map((e=>({type:"element",name:"tool",elements:[{type:"text",text:e}]})))],n.options.events.enabled&&n.options.events.values.length>0&&(a.elements=[...a.elements,...n.options.events.values.filter((t=>t.length>0&&e.events.length>0&&e.events.find((e=>e.id===t)).value.length>0)).map((e=>({type:"element",name:"wait",elements:[{type:"text",text:e}]})))]),n.cies&&n.cies.values.length>0&&(a.elements=[...a.elements,{type:"element",name:"cies",elements:n.cies.values.map((e=>({type:"element",name:"cie",attributes:{id:e.id,behavior_unit_name:e.name,path:e.path},elements:e.params.map((e=>({type:"element",name:"param",attributes:"value"===e.type?{name:e.name,value:e.value}:{name:e.name,target:e.target}})))})))}]),n.type===c.B.BU&&n.behaviorUnit&&(a.elements=[...a.elements,{type:"element",name:"state-machine",attributes:{id:n.behaviorUnit.id,name:n.behaviorUnit.name,path:n.behaviorUnit.path},elements:n.behaviorUnit.params.map((e=>({type:"element",name:"param",attributes:{...e}})))}])),a})).concat(e.jumps.reduce(((e,t)=>{const n=e.findIndex((e=>e.event===t.event));return n>-1?(e[n]={...e[n],moves:[...e[n].moves,{...t}]},e):[...e,{event:t.event,moves:[{...t}]}]}),[]).map((e=>({type:"element",name:"jump",attributes:{event_name:e.event},elements:e.moves.map((e=>({type:"element",name:"move",attributes:{from:e.from,to:e.to},elements:e.actions.map((e=>({type:"element",name:"graph-modification",attributes:{action:e.type,locker_id:e.lockerID,task_id:e.taskID}})))})))})))).concat(e.tools.length>0?{type:"element",name:"tools",elements:e.tools.filter((e=>e.value.length>0)).map((e=>({type:"element",name:"tool",attributes:{...e}})))}:[]).concat(e.actors.length>0?{type:"element",name:"actors",elements:e.actors.filter((e=>e.value.length>0)).map((e=>({type:"element",name:"actor",attributes:{...e}})))}:[]).concat(e.events.length>0?{type:"element",name:"events",elements:e.events.filter((e=>e.value.length>0)).map((e=>({type:"element",name:"event",attributes:{...e}})))}:[]).concat(e.subProcesses.allIds.length>0?e.subProcesses.allIds.filter((t=>e.subProcesses.byIds[t].nodes.length>0)).map((t=>e.subProcesses.byIds[t])).map((e=>({type:"element",name:"subprocess",attributes:{id:e.id,name:e.name},elements:e.nodes.map((e=>({type:"element",name:"node",attributes:{id:e}})))}))):[])},...t?t.entities.present.allIds.map((e=>O(t,t.entities.present.byIds[e].present,!0).elements)).reduce(((e,t)=>e.concat(t)),[]):[]]}},C=e=>new Promise((async(t,n)=>{if(!window.isStandalone)return void t();const{bu:s,process:l}=o.a.getState(),r=b.dialog.showSaveDialog({filters:[{name:"NEdit Encoded File",extensions:["nedit"]}],showHiddenFiles:!1});if(!r||0===r.length)return n(!1);const c=L(l.entities.byIds[e].present,s),d=Object(a.js2xml)({...c,elements:[c.elements[0]]},{compact:!1}),u=c.elements.filter(((e,t)=>0!==t)).map((e=>({declaration:{attributes:{version:"1.0",encoding:"utf-8"}},elements:[{...e,attributes:{id:e.attributes.id}}]}))),p={declaration:{attributes:{version:"1.0",encoding:"utf-8"}},elements:[{type:"element",name:"manifest",attributes:{version:"1.0"},elements:[{type:"element",name:"process",attributes:{path:l.entities.byIds[e].present.name+".xml",name:l.entities.byIds[e].present.name}},{type:"element",name:"resources",elements:[{type:"element",name:"report",attributes:{path:"report.xml"}},{type:"element",name:"datalog",attributes:{path:"datalogProcess.xml"}}].concat(u.map(((e,t)=>({type:"element",name:"state-machine",attributes:{path:c.elements[t+1].attributes.name+".xml",name:c.elements[t+1].attributes.name,id:c.elements[t+1].attributes.id,class_name:"NStateMachine"}}))))},{type:"element",name:"inputs"},{type:"element",name:"outputs"},{type:"element",name:"events"},{type:"element",name:"functions"}]}]},m=Object(a.js2xml)(p,{compact:!1});try{await v("manifest.xml",m),await v(l.entities.byIds[e].present.name+".xml",d),u.map((async(e,t)=>await v(c.elements[t+1].attributes.name+".xml",Object(a.js2xml)(e,{compact:!1})))),u.map((async(e,t)=>await v(i()()+".xml",Object(a.js2xml)(e,{compact:!1})))),await E(r),t()}catch(e){n(e)}})),k=(e,t,n)=>e.find((e=>e.id===t))[n].map((t=>e.find((e=>e.id===t)).type===c.B.MILESTONE?k(e,t,n):t)).reduce(((e,t)=>Array.isArray(t)?e.concat(t):[...e,t]),[]),D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.find((e=>e.id===t)).entries.map((a=>"__BEGIN__"===a?a:e.find((e=>e.id===a)).subs&&e.find((e=>e.id===a)).subs.includes(t)?D(e,a,n):n&&e.find((e=>e.id===a)).type===c.B.BEGIN?"__BEGIN__":n&&e.find((e=>e.id===a)).type===c.B.MILESTONE?k(e,a,"entries"):a)).reduce(((e,t)=>Array.isArray(t)?e.concat(t):[...e,t]),[])},N=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=e.nodes.allIds.map((t=>e.nodes.byIds[t])),s={...e.nodes.byIds[t]},i=Object(m.R)(e,t,0).filter((t=>e.nodes.byIds[t].type!==c.B.MILESTONE)).reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]),o={type:"element",name:"task",attributes:{},elements:[]};return o.attributes={title:s.name,description:s.description,duration:s.duration,id:s.id},s.entries=s.entries.map((t=>e.nodes.byIds[t].type===c.B.MILESTONE?k(a,t,"entries"):t)).reduce(((e,t)=>Array.isArray(t)?e.concat(t):[...e,t]),[]),s.exits=s.exits.map((t=>e.nodes.byIds[t].type===c.B.MILESTONE?k(a,t,"exits"):t)).reduce(((e,t)=>Array.isArray(t)?e.concat(t):[...e,t]),[]),o.elements=[{type:"element",name:"sync-points",elements:s.entries.map((t=>e.nodes.byIds[t].type===c.B.BEGIN||t!==n?{type:"element",name:"sync-point",attributes:{locker_id:e.nodes.byIds[t].type===c.B.BEGIN?"__BEGIN__":t}}:D(a,n,!0).map((e=>({type:"element",name:"sync-point",attributes:{locker_id:e}}))))).reduce(((e,t)=>Array.isArray(t)?e.concat(t):[...e,t]),[])},...i.map((n=>N(e,n,t)))],0===s.entries.length&&e.jumps.some((e=>e.to===t))&&(o.elements[0].elements=[{type:"element",name:"sync-point",attributes:{locker_id:"__EVENT__"}}]),s.actors&&s.actors.length>0&&o.elements.push({type:"element",name:"actors",elements:s.actors.filter((t=>t.length>0&&e.actors.length>0&&e.actors.find((e=>e.id===t)).value.length>0)).map((e=>({type:"element",name:"actor",attributes:{actor_id:e}})))}),s.tools&&s.tools.enabled&&s.tools.values.length>0&&o.elements.push({type:"element",name:"tools",elements:s.tools.values.filter((t=>t.length>0&&e.tools.length>0&&e.tools.find((e=>e.id===t)).value.length>0)).map((e=>({type:"element",name:"tool",attributes:{tool_id:e}})))}),s.cies&&s.cies.values.length>0&&o.elements.push({type:"element",name:"cies",elements:s.cies.values.map((e=>({type:"element",name:"cie",attributes:{id:e.id,behavior_unit_id:e.id,behavior_unit_name:e.name,path:e.path},elements:e.params.map((e=>({type:"element",name:"param",attributes:"value"===e.type?{name:e.name,value:e.value}:{name:e.name,target:e.target}})))})))}),s.type===c.B.BU&&s.behaviorUnit&&(o.elements=[...o.elements,{type:"element",name:"state-machine",attributes:{id:s.behaviorUnit.id,name:s.behaviorUnit.name,path:s.behaviorUnit.path},elements:s.behaviorUnit.params.map((e=>({type:"element",name:"param",attributes:{...e}})))}]),o},L=(e,t)=>{const n=e.nodes.allIds.filter((t=>e.nodes.byIds[t].type!==c.B.BEGIN&&e.nodes.byIds[t].type!==c.B.MILESTONE&&!Object(m.W)(e,t,!1))).map((t=>N(e,t))),a=(e,t)=>[...e,t,...t.elements.filter((e=>"task"===e.name)).reduce(a,[])],s=e.nodes.allIds.filter((t=>e.nodes.byIds[t].type===c.B.MILESTONE)).map((t=>e.nodes.byIds[t]));return{declaration:{attributes:{version:"1.0",encoding:"utf-8"}},elements:[{type:"element",name:"planning",elements:n.concat([{type:"element",name:"jumps",elements:e.jumps.filter((e=>e.event&&e.from&&e.to)).reduce(((e,t)=>{const n=e.findIndex((e=>e.event===t.event));return n>-1?(e[n]={...e[n],moves:[...e[n].moves,{...t}]},e):[...e,{event:t.event,moves:[{...t}]}]}),[]).map((t=>({type:"element",name:"jump",attributes:{event_name:e.events.find((e=>e.id===t.event)).value},elements:t.moves.map((e=>({type:"element",name:"move",attributes:{from:e.from,to:e.to},elements:e.actions.filter((e=>!!e.taskID)).map((e=>({type:"element",name:"graph-modification",attributes:{action:e.type,locker_id:e.lockerID,task_id:e.taskID}})))})))})))},{type:"element",name:"editor",elements:n.reduce(a,[]).map((t=>({type:"element",name:"node",attributes:{id:t.attributes.id,x:e.nodePositions[t.attributes.id].x,y:e.nodePositions[t.attributes.id].y}}))).concat(s.map((t=>({type:"element",name:"milestone",attributes:{id:t.id,x:e.nodePositions[t.id].x,y:e.nodePositions[t.id].y},elements:t.entries.map((e=>({type:"element",name:"entry",attributes:{id:e}}))).concat(t.exits.map((e=>({type:"element",name:"exit",attributes:{id:e}}))))})))).concat(e.subProcesses.allIds.map((t=>({type:"element",name:"subprocess",attributes:{id:t,name:e.subProcesses.byIds[t].name},elements:e.subProcesses.byIds[t].nodes.filter((t=>e.nodes.byIds[t].type!==c.B.BEGIN)).map((e=>({type:"element",name:"node",attributes:{id:e}})))}))))}])},...t?t.entities.present.allIds.map((e=>O(t,t.entities.present.byIds[e].present,!1).elements)).reduce(((e,t)=>e.concat(t)),[]):[]]}},T=()=>{if(!window.isStandalone)return;const{file:e}=o.a.getState();e.closedFiles.length>0&&h.send("open-editor",e.closedFiles[e.closedFiles.length-1])},B=(t,n)=>(s,o)=>new Promise(((m,b)=>{const g=t,f=window.isStandalone?Object(d.d)(t):g.name,E=i()(),v=o().file.files.find((e=>e.path===t));if(v){if(n===c.r.BU){const e=o().bu.entities.present.byIds[v.id].present;return m({filetype:n,bu:e,buID:e.id})}if(n===c.r.PROCESS){const e=o().process.entities.byIds[v.id].present;return m({filetype:n,process:e,procID:e.id})}}if(window.isStandalone&&!y.existsSync(t))return b({filepath:t,filetype:n,error:new Error("FileNotFound")});if(s({type:r.d,payload:{filetype:n}}),s({type:r.h,payload:Object(r.b)(n,E,window.isStandalone?f:f.split(".")[0],!0,!1,window.isStandalone?t:null)}),window.isStandalone){const e=o().file.recentFiles?o().file.recentFiles.filter((e=>e.path!==t)):[],a=[{type:n,path:t},...e];x.addRecentDocument(t),s({type:r.k,payload:a}),h.send("set-storage",{jsonName:"recent-files",data:{files:a}}),y.readFile(t,I)}else{const e=new FileReader;e.onload=function(e){I(null,e.target.result)},e.readAsText(g)}function I(i,o){if(i)return console.error(i),void s({type:r.e,payload:{filetype:n,error:i}});try{o=new e(o.toString(),"base64").toString("ascii");const t=JSON.parse(Object(a.xml2json)(o,{compact:!1}));if(!t.elements||0===t.elements.length)return void s({type:r.e});if(t.elements[0].attributes&&t.elements[0].attributes.name||(t.elements[0].attributes={...t.elements[0].attributes,name:f}),n===c.r.BU){const e=F(t.elements[0],E);s({type:r.f,payload:{filetype:n,bu:e,buID:E}}),s({type:u.ActionTypes.CLEAR_HISTORY,payload:{buID:E}}),m({filetype:n,bu:e,buID:E})}else if(n===c.r.PROCESS){const e=V(t,E),{proc:a,bus:i}=e;i.forEach((e=>{e.process=E,s({type:p.b,payload:{bu:e,id:e.id,proc:e.process,procID:e.process}}),s({type:l.m,payload:{bu:e,procID:E,buID:e.id}})})),s({type:r.f,payload:{filetype:n,process:a,bus:i,procID:E}}),s({type:u.ActionTypes.CLEAR_HISTORY,payload:{procID:E}}),m({filetype:n,process:a,procID:E})}}catch(i){console.error(i),s({type:r.i,payload:t}),s({type:r.e,payload:{filetype:n,error:i}}),b({filepath:t,filetype:n,error:i})}}})),A=(e,t)=>(n,a)=>new Promise((async(s,i)=>{try{let i=null;i=a().bu.entities.present.allIds.includes(t)?await P(e,t)(n,a):await R(e,t)(n,a),s(i)}catch(e){return i(e)}})),R=(t,n)=>s=>new Promise(((o,l)=>{const u=c.r.BU;if(window.isStandalone&&!y.existsSync(t))return l({filepath:t,filetype:u,error:new Error("FileNotFound")});try{const m=t instanceof File?t.name:Object(d.d)(t),b=i()();if(s({type:r.d,payload:{filetype:u}}),window.isStandalone)y.readFile(t,h);else{const g=new FileReader;g.onload=function(e){h(null,e.target.result)},g.readAsText(t)}function h(i,c){if(i)return console.error(i),s({type:r.e,payload:{filetype:u,error:i}}),l({filepath:t,filetype:u,error:new Error("FileNotFound")});try{c=new e(c.toString(),"base64").toString("ascii");const i=JSON.parse(Object(a.xml2json)(c,{compact:!1}));if(!i.elements||0===i.elements.length)return s({type:r.e}),l({filepath:t,filetype:u,error:new Error("No data found in file")});i.elements[0].attributes&&i.elements[0].attributes.name||(i.elements[0].attributes={...i.elements[0].attributes,name:m});const d=F(i.elements[0],b);d.bu.process=n,s({type:p.b,payload:{...d,id:d.buID}}),s({type:r.f,payload:{filetype:u,buID:d.buID}}),o({filetype:u,bu:d,buID:b})}catch(i){console.error(i),s({type:r.e,payload:{filetype:u,error:i}}),l({filepath:t,filetype:u,error:i})}}}catch(f){console.error("Error importing State Machine: "+f),s({type:r.i,payload:t}),s({type:r.e,payload:{filetype:c.r.BU,error:f}})}})),P=(t,n)=>(s,o)=>new Promise(((u,p)=>{const m=c.r.BU;if(window.isStandalone&&!y.existsSync(t))return p({filepath:t,filetype:m,error:new Error("FileNotFound")});try{const b=t instanceof File?t.name:Object(d.d)(t),h=i()();if(s({type:r.d,payload:{filetype:m}}),window.isStandalone)y.readFile(t,g);else{const f=new FileReader;f.onload=function(e){g(null,e.target.result)},f.readAsText(t)}function g(i,d){if(i)return console.error(i),s({type:r.e,payload:{filetype:m,error:i}}),p({filepath:t,filetype:m,error:new Error("FileNotFound")});try{d=new e(d.toString(),"base64").toString("ascii");const i=JSON.parse(Object(a.xml2json)(d,{compact:!1}));if(!i.elements||0===i.elements.length)return s({type:r.e}),p({filepath:t,filetype:m,error:new Error("No data found in file")});i.elements[0].attributes&&i.elements[0].attributes.name||(i.elements[0].attributes={...i.elements[0].attributes,name:b});const y=F(i.elements[0],h),g={...o().bu.entities.present.byIds[n].present};s({type:r.f,payload:{filetype:c.r.BU}}),s({type:l.s,payload:{filetype:c.r.BU,bu:{...g,buStates:{allIds:[...g.buStates.allIds,...y.bu.buStates.allIds],byIds:{...g.buStates.byIds,...y.bu.buStates.byIds}},buActions:{allIds:[...g.buActions.allIds,...y.bu.buActions.allIds],byIds:{...g.buActions.byIds,...y.bu.buActions.byIds}}},buID:g.id}}),u({filetype:m,bu:y,buID:n})}catch(i){console.error(i),s({type:r.e,payload:{filetype:m,error:i}}),p({filepath:t,filetype:m,error:i})}}}catch(E){console.error("Error importing State Machine: "+E),s({type:r.i,payload:t}),s({type:r.e,payload:{filetype:c.r.BU,error:E}})}})),F=(e,t)=>{const n=e=>e&&0!==e.length?e.map((e=>{const t=i()(),{name:a,task_name:s}=e.attributes;switch(e.name){case"condition":const{left_expression:i,right_expression:o,type:l}=e.attributes,r=e.elements.find((e=>"success"===e.name)),u=e.elements.find((e=>"failure"===e.name));return{id:t,type:c.a.CONDITION,name:s,conditionType:c.j[Object(d.e)(c.j.export,l)],success:r&&r.elements?n(r.elements):[],failure:u&&u.elements?n(u.elements):[],expressionLeft:i,expressionRight:o};case"event":return{id:t,type:c.a.EVENT_LISTENER,name:s,event:a,tags:e.attributes.event_tags?e.attributes.event_tags.split(" "):[],handler:n(e.elements)};case"call":const{class:p,function:m,local_attr_name:b}=e.attributes,h=e.elements&&e.elements.length>0?e.elements.filter((e=>"arg"===e.name)).map((e=>({type:"value",value:e.attributes.value}))):[];return{id:t,type:c.a.CALL_FUNCTION,className:p,functionName:m,localAttrName:b,name:s,params:h};case"state":return{id:t,type:c.a.SET_STATE,value:a,name:s,color:e.attributes.color};case"script":return{id:t,type:c.a.SCRIPT,script:e.elements[0].text,scriptType:"lua",name:s};case"local":return{id:t,type:c.a.ASSIGN_VARIABLE,name:s,variable:{name:a,value:e.attributes.value,global:!1}};case"global":return{id:t,type:c.a.ASSIGN_VARIABLE,name:s,variable:{name:a,value:e.attributes.value,global:!0}};case"raise":return{id:t,type:c.a.EVENT_TRIGGER,event:e.attributes.event_name,value:e.attributes.event_value,tags:e.attributes.event_tags?e.attributes.event_tags.split(" "):[]};case"fuse":return{id:t,type:c.a.FUSE_EVENT,event:e.attributes.event};case"unfuse":return{id:t,type:c.a.UNFUSE_EVENT,event:e.attributes.event};default:return null}})):[],a=e=>{let t=[];return e.forEach((e=>{switch(e.type){case c.a.EVENT_LISTENER:t=t.concat(a(e.handler)),e.handler=e.handler.map((e=>e.id));break;case c.a.CONDITION:t=t.concat(a(e.success)),e.success=e.success.map((e=>e.id)),t=t.concat(a(e.failure)),e.failure=e.failure.map((e=>e.id));break;case c.a.SET_STATE:e.value=o.find((t=>t.attributes.name===e.value)).id}t.push(e)})),t},s={bu:Object(l.j)(),ui:{[t]:{buCanvasScale:1,buCanvasPosition:{x:0,y:0},buState:null,statesToDelete:[]}}},o=e.elements?e.elements.filter((e=>"state"===e.name)).map((e=>({...e,id:i()()}))):[],r=o.map((e=>n(e.elements)));let u=[];return r.forEach((e=>{u=u.concat(a(e))})),s.bu.buStates.byIds=Object(d.b)(o.map(((e,t)=>(s.bu.buStates.allIds.push(e.id),{id:e.id,name:e.attributes.name,behavior:r[t].map((e=>e.id)),x:e.attributes.x?parseFloat(e.attributes.x):100+100*t,y:e.attributes.y?parseFloat(e.attributes.y):100+100*t}))),"id"),s.bu.buActions.byIds=Object(d.b)(u.map(((e,t)=>(s.bu.buActions.allIds.push(e.id),e))),"id"),s.buID=t,s.bu.id=t,s.bu.name=e.attributes.name,s.ui={[t]:{...s.ui[t],buCanvasScale:e.attributes.scale?parseFloat(e.attributes.scale):1,buCanvasPosition:{x:e.attributes.x?parseFloat(e.attributes.x):0,y:e.attributes.y?parseFloat(e.attributes.y):0}}},s},U=e=>(t,n)=>new Promise((async(s,o)=>{if(!window.isStandalone)return void s();t({type:r.d,payload:{filetype:c.r.PROCESS}});const d=await f(e);let m=null;const b=[],h=JSON.parse(Object(a.xml2json)(d["manifest.xml"],{compact:!1})).elements[0].elements.find((e=>"resources"===e.name)).elements.filter((e=>"state-machine"===e.name));Object.keys(d).forEach((e=>{const t=JSON.parse(Object(a.xml2json)(d[e],{compact:!1}));if("planning"===t.elements[0].name)m=M(g.basename(e,".xml"),t,i()(),h);else if("behavior"===t.elements[0].name){const e=F(t.elements[0],t.elements[0].attributes.id).bu;e.name=h.find((t=>t.attributes.id===e.id)).attributes.name,b.push(e)}}));const y=m.process.name,E=m.process.id;if(n().file.files.some((e=>e.id===E))){const e="The process is already opened";return t({type:r.e,payload:{filetype:c.r.PROCESS,error:e}}),o(e)}t({type:r.h,payload:Object(r.b)(c.r.PROCESS,E,y)}),b.forEach((e=>{e.process=E,t({type:p.b,payload:{bu:e,id:e.id,proc:e.process,procID:e.process}}),t({type:l.m,payload:{bu:e,procID:E,buID:e.id}})})),t({type:r.f,payload:{filetype:c.r.PROCESS,process:m,bus:b,procID:E}}),t({type:u.ActionTypes.CLEAR_HISTORY,payload:{procID:E}}),s({filetype:c.r.PROCESS,process:m,procID:E}),s()})),$=e=>{let t={type:e.elements.some((e=>"state-machine"===e.name))?c.B.BU:c.B.TASK,id:e.attributes.id,name:e.attributes.title,description:e.attributes.description,duration:parseFloat(e.attributes.duration),subProcess:"",options:{timer:{enabled:!1,value:0},events:{enabled:!1,values:[]}},entries:e.elements&&e.elements.some((e=>"sync-points"===e.name))&&e.elements.find((e=>"sync-points"===e.name)).elements?e.elements.find((e=>"sync-points"===e.name)).elements.filter((e=>"__EVENT__"!==e.attributes.locker_id)).map((e=>e.attributes.locker_id)):[],subs:e.elements?e.elements.filter((e=>"task"===e.name)).map((e=>e.attributes.id)):[],tools:{enabled:e.elements&&e.elements.some((e=>"tools"===e.name)),values:e.elements&&e.elements.find((e=>"tools"===e.name))?e.elements.find((e=>"tools"===e.name)).elements.filter((e=>"tool"===e.name)).map((e=>e.attributes.tool_id)):[]},actors:e.elements&&e.elements.find((e=>"actors"===e.name))?e.elements.find((e=>"actors"===e.name)).elements.filter((e=>"actor"===e.name)).map((e=>e.attributes.tool_id)):[],cies:{enabled:e.elements&&e.elements.some((e=>"cies"===e.name)),values:e.elements&&e.elements.some((e=>"cies"===e.name))?e.elements.find((e=>"cies"===e.name)).elements.filter((e=>"cie"===e.name)).map((e=>({id:e.attributes.behavior_unit_id,name:e.attributes.behavior_unit_name,params:e.elements&&e.elements.some((e=>"param"===e.name))?e.elements.filter((e=>"param"===e.name)).map((e=>({...e.attributes}))):[],isLoaded:!1}))):[]}};if(t.type===c.B.BU){const n=e.elements&&e.elements.find((e=>"state-machine"===e.name));t.behaviorUnit={id:n.attributes.id,name:n.attributes.name,params:n.elements&&n.elements.some((e=>"param"===e.name))?n.elements.filter((e=>"param"===e.name)).map((e=>({...e.attributes}))):[],isLoaded:!1}}const n=t.subs.map((t=>$(e.elements.find((e=>e.attributes&&e.attributes.id===t)))));return{node:{...t,subs:e.elements.filter((t=>"task"===t.name&&t.elements.find((e=>"sync-points"===e.name)).elements&&t.elements.find((e=>"sync-points"===e.name)).elements.some((t=>"sync-point"===t.name&&!e.elements.filter((e=>"task"===e.name)).some((e=>e.attributes.id===t.attributes.locker_id)))))).map((e=>e.attributes.id))},subs:n}},_=(e,t)=>[...e,t.node,...t.subs.reduce(_,[])],M=(e,t,n)=>{if(0===t.elements.length)throw new Error("No data found in file");const a={type:c.B.BEGIN,id:i()(),exits:[],subs:[],entries:[]},s=t.elements.find((e=>"planning"===e.name));let o=(s.elements?s.elements.filter((e=>"task"===e.name)).map((e=>({...e}))):[]).map($).reduce(_,[a]).map(((e,t,n)=>{const s=n.find((t=>t.subs.includes(e.id))),i=e.entries?e.entries.filter((e=>!s||s.id===e||!D(n,s.id,!0).includes(e))).map((e=>"__BEGIN__"===e?a.id:e)):[];return s&&i.push(s.id),{...e,entries:i}})).map(((e,t,n)=>({...e,exits:n.filter((t=>t.entries.includes(e.id)&&!e.subs.includes(t.id))).map((e=>e.id))})));const l=s.elements.some((e=>"editor"===e.name))?[...s.elements.find((e=>"editor"===e.name)).elements.filter((e=>"node"===e.name)).map((e=>({id:e.attributes.id,x:parseFloat(e.attributes.x),y:parseFloat(e.attributes.y)}))),{id:a.id,x:420,y:110}]:o.map((e=>({id:e.id,x:(e.type,c.B.BEGIN,420),y:e.type===c.B.BEGIN?110:220}))),r=[],u=(s.elements&&s.elements.some((e=>"jumps"===e.name))?s.elements.find((e=>"jumps"===e.name)).elements.filter((e=>"jump"===e.name)).map((e=>({...e}))):[]).map((e=>e.elements.filter((e=>"move"===e.name)).map((t=>{let n="";return e.attributes&&e.attributes.event_name&&(r.some((t=>t.name===e.attributes.event_name))?n=r.find((t=>t.name===e.attributes.event_name)).id:(n=i()(),r.push({id:n,name:e.attributes.event_name,log:!0}))),{...t.attributes,id:i()(),event:n,actions:t.elements?t.elements.filter((e=>"graph-modification"===e.name)).map((e=>({type:e.attributes.action,taskID:e.attributes.task_id,lockerID:e.attributes.locker_id}))):[]}})))).reduce(((e,t)=>e.concat(t)),[]),p=s.elements&&s.elements.filter((e=>"tools"===e.name)).length>0?s.elements.filter((e=>"tools"===e.name))[0].elements.map((e=>({...e.attributes}))):[],b=s.elements&&s.elements.filter((e=>"actors"===e.name)).length>0?s.elements.filter((e=>"actors"===e.name))[0].elements.map((e=>({...e.attributes}))):[],h=s.elements&&s.elements.some((e=>"editor"===e.name))?s.elements.find((e=>"editor"===e.name)).elements.filter((e=>"milestone"===e.name)).map((e=>{const t=e.elements?e.elements.filter((e=>"entry"===e.name)).map((e=>e.attributes.id)):[],n=e.elements?e.elements.filter((e=>"exit"===e.name)).map((e=>e.attributes.id)):[];return l.push({id:e.attributes.id,x:parseFloat(e.attributes.x),y:parseFloat(e.attributes.y)}),{id:e.attributes.id,type:c.B.MILESTONE,entries:t,exits:n}})):[];if(h.length>0){o=o.concat(h);const e=(t,n,a)=>t.find((e=>e.id===a)).exits.includes(n)||t.find((e=>e.id===a)).exits.some((a=>t.find((e=>e.id===a)).type===c.B.MILESTONE&&e(t,n,a))),t=(e,n,a)=>e.find((e=>e.id===a)).entries.includes(n)||e.find((e=>e.id===a)).entries.some((a=>e.find((e=>e.id===a)).type===c.B.MILESTONE&&t(e,n,a)));o=o.map(((n,a,s)=>{if(n.type===c.B.MILESTONE)return n;let i=n.entries,o=n.exits,l=n.subs;const r=h.find((e=>e.entries.includes(n.id)));r&&(o=n.exits.map((t=>e(s,t,r.id)?r.id:t)).reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]),l=n.subs.map((t=>e(s,t,r.id)?r.id:t)).reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]));const d=h.find((e=>e.exits.includes(n.id)));return d&&(i=n.entries.map((e=>t(s,e,d.id)?d.id:e)).reduce(((e,t)=>e.includes(t)?e:[...e,t]),[])),{...n,entries:i,exits:o,subs:l}}))}const y=s.elements&&s.elements.some((e=>"editor"===e.name))?s.elements.find((e=>"editor"===e.name)).elements.filter((e=>"subprocess"===e.name)).map((e=>{const t=e.elements.filter((e=>"node"===e.name&&o.some((t=>t.id===e.attributes.id)))),n=i()(),a={type:c.B.BEGIN,id:n,exits:t.filter((e=>o.find((t=>t.id===e.attributes.id)).entries.some((e=>!t.some((t=>t.attributes.id===e)))))).map((e=>(o.find((t=>t.id===e.attributes.id)).entries=o.find((t=>t.id===e.attributes.id)).entries.map((e=>t.some((t=>t.attributes.id===e))?e:n)),e.attributes.id)))};return l.push({id:a.id,x:420,y:110}),o.push(a),Object(m.h)(e.attributes.id,e.attributes.name,[a.id,...t.map((e=>e.attributes.id))])})):[];y.length>0&&(o=o.map((e=>{if(!e.subs||0===e.subs.length)return e;const t=e.subs.find((t=>y.some((n=>n.nodes.includes(t)&&!n.nodes.includes(e.id)))));if(!t)return e;const n=y.find((e=>e.nodes.includes(t))).id;return{...e,subs:[],subProcess:n}})));const g=o.filter((e=>e.behaviorUnit||e.cies&&e.cies.values.length>0)).map((e=>e.behaviorUnit?e.behaviorUnit.id:e.cies.values.map((e=>e.id)))).reduce(((e,t)=>"string"==typeof t?[...e,t]:e.concat(t)),[]).reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]);return{process:{id:n,name:e,jumps:u,tools:p,actors:b,events:r,behaviorUnits:g,page:null,nodes:{byIds:Object(d.b)(o,"id"),allIds:o.map((e=>e.id))},nodePositions:Object(d.b)(l,"id"),subProcesses:{byIds:Object(d.b)(y,"id"),allIds:y.map((e=>e.id))}},ui:{[n]:{nodesToDelete:[]}}}},V=(e,t)=>{if(0===e.elements.length)throw new Error("No data found in file");const n=e.elements.find((e=>"process"===e.name)),a=n.elements?n.elements.filter((e=>"node"===e.name)).map((e=>({...e}))):[],s=a.map((e=>{let t={type:e.attributes.type,id:e.attributes.id,exits:e.elements?e.elements.filter((e=>"exit"===e.name)).map((e=>e.elements[0].text)):[]};if(e.attributes.type===c.B.TASK||e.attributes.type===c.B.BU){if(t={...t,name:e.attributes.name||e.attributes.title,description:e.attributes.description,subProcess:e.attributes.subprocess,duration:parseFloat(e.attributes.duration),options:{timer:e.attributes.timer?{enabled:!0,value:parseFloat(e.attributes.timer)}:{enabled:!1,value:0},events:{enabled:!!e.attributes.wait,values:e.elements?e.elements.filter((e=>"wait"===e.name)).map((e=>e.elements[0].text)):[]}},entries:e.elements?e.elements.filter((e=>"entry"===e.name)).map((e=>e.elements[0].text)):[],subs:e.elements?e.elements.filter((e=>"sub"===e.name)).map((e=>e.elements[0].text)):[],tools:{enabled:!!e.attributes.tools,values:e.elements?e.elements.filter((e=>"tool"===e.name)).map((e=>e.elements[0].text)):[]},actors:e.elements?e.elements.filter((e=>"actor"===e.name)).map((e=>e.elements[0].text)):[],cies:{enabled:!!e.attributes.cies,values:e.elements&&e.elements.some((e=>"cies"===e.name))?e.elements.find((e=>"cies"===e.name)).elements.filter((e=>"cie"===e.name)).map((e=>({id:e.attributes.id,name:e.attributes.behavior_unit_name,path:e.attributes.path,params:e.elements?e.elements.map((e=>({...e.attributes,id:i()(),type:e.attributes.value?"value":"target"}))):[],isLoaded:!1}))):[]}},e.attributes.type===c.B.BU){const n=e.elements&&e.elements.find((e=>"state-machine"===e.name));t.behaviorUnit=n?{...n.attributes,params:n.elements?n.elements.map((e=>({...e.attributes,id:i()(),type:e.attributes.value?"value":"target"}))):[],isLoaded:!1}:{id:"",name:"",path:"",params:[],isLoaded:!1}}}else e.attributes.type===c.B.MILESTONE&&(t.entries=e.elements?e.elements.filter((e=>"entry"===e.name)).map((e=>e.elements[0].text)):[]);return t})),o=a.map((e=>({id:e.attributes.id,x:parseFloat(e.attributes.x),y:parseFloat(e.attributes.y)}))),l=(n.elements?n.elements.filter((e=>"jump"===e.name)).map((e=>({...e}))):[]).map((e=>e.elements.filter((e=>"move"===e.name)).map((t=>({...t.attributes,id:i()(),event:e.attributes?e.attributes.event_name:"",actions:t.elements?t.elements.filter((e=>"graph-modification"===e.name)).map((e=>({type:e.attributes.action,taskID:e.attributes.task_id,lockerID:e.attributes.locker_id}))):[]}))))).reduce(((e,t)=>e.concat(t)),[]),{name:r}=n.attributes,u=n.elements&&n.elements.filter((e=>"tools"===e.name)).length>0?n.elements.filter((e=>"tools"===e.name))[0].elements.map((e=>({...e.attributes}))):[],p=n.elements&&n.elements.filter((e=>"actors"===e.name)).length>0?n.elements.filter((e=>"actors"===e.name))[0].elements.map((e=>({...e.attributes}))):[],m=n.elements&&n.elements.filter((e=>"events"===e.name)).length>0?n.elements.filter((e=>"events"===e.name))[0].elements.map((e=>({...e.attributes,log:"true"===e.attributes.log}))):[],b=n.elements?n.elements.filter((e=>"subprocess"===e.name)).map((e=>({...e.attributes,nodes:e.elements.filter((e=>"node"===e.name)).map((e=>e.attributes.id))}))):[],h=e.elements.filter((e=>"behavior"===e.name));return{proc:{process:{id:t,name:r,jumps:l,tools:u,actors:p,events:m,page:null,subProcesses:{byIds:Object(d.b)(b,"id"),allIds:b.map((e=>e.id))},behaviorUnits:h.map((e=>e.attributes.id)),nodes:{byIds:Object(d.b)(s,"id"),allIds:s.map((e=>e.id))},nodePositions:Object(d.b)(o,"id")},ui:{[t]:{nodesToDelete:[]}}},bus:h.map((e=>F(e,e.attributes.id).bu))}}}).call(this,n(93).Buffer)},53:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l}));const a="neditor/ui/SHOW_MODAL",s="neditor/ui/HIDE_MODAL",i={showModal:null};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return{...e,showModal:t.payload};case s:return t.payload&&e.showModal!==t.payload?e:{...e,showModal:null};default:return e}};const o=e=>t=>t({type:a,payload:e}),l=e=>t=>t({type:s,payload:e})},56:function(e,t,n){"use strict";var a=n(40),s=n(254),i=n(32),o=n(12),l=n(53),r=n(28),c=n(101),d=n(30),u=n(10),p=n(50),m=n.n(p),b=n(1);const h=[i.d,i.c,u.d,u.o,u.a,u.v,u.l,u.b,u.u,u.s,u.k,u.t,u.q,u.r,u.p];var y=n(172),g=n.n(y),f=n(4),E=n(25);const v=[f.p,f.c,f.w,f.y,f.x,f.z,f.l,f.b,f.k,f.a,f.j,f.v,f.o,f.n,E.a,E.b,E.c,f.u,f.q,r.b,r.c,f.f,f.t,f.r,f.m,f.s],x=[s.a,e=>t=>n=>{const a={...e.getState()};let s,i;if(a.file.currentFile&&h.includes(n.type)&&((i=a.file.files.find((e=>e.id===a.file.currentFile))).type===b.r.BU||i.type===b.r.PROCESS&&a.process.entities.byIds[i.id].present.editBU)){const l=i.type===b.r.BU?a.file.currentFile:a.process.entities.byIds[i.id].present.editBU;if(n.payload={...n.payload,buID:l},s=t(n),n.type===u.l&&n.payload.confirmBeforeDelete)return s;const r=e.getState().bu.entities.present.byIds[l].present;if(r!==a.bu.entities.present.byIds[l].present&&(s=t({type:o.c,payload:{buID:l,bu:r,procID:r.process,process:r.process?a.process.entities.byIds[r.process].present:null}}),(n.type===u.r||n.type===u.p)&&!m()(r.buActions,a.bu.entities.present.byIds[l].present.buActions))){let e=null;r.buStates.allIds.forEach((t=>{a.bu.entities.present.byIds[l].present.buStates.allIds.includes(t)&&(r.buStates.byIds[t].behavior.length===a.bu.entities.present.byIds[l].present.buStates.byIds[t].behavior.length?r.buStates.byIds[t].behavior.forEach((n=>{m()(a.bu.entities.present.byIds[l].present.buActions.byIds[n],r.buActions.byIds[n])||(e=t)})):e=t)})),e&&(s=t({type:u.n,payload:{buID:l,buStateID:e}}))}}else s=t(n);return s},e=>t=>n=>{const a={...e.getState()};let s;if(a.file.currentFile&&v.includes(n.type)&&a.file.files.find((e=>e.id===a.file.currentFile)).type===b.r.PROCESS){const i=a.file.currentFile;n.payload={...n.payload,procID:i},s=t(n);const l=e.getState().process.entities.byIds[i].present;a.process.entities.byIds[i]&&!m()(n.type===f.s?g()(l,["editBU"]):l,n.type===f.s?g()(a.process.entities.byIds[i].present,["editBU"]):a.process.entities.byIds[i].present)&&(s=t({type:o.c,payload:{procID:i,process:l}}))}else s=t(n);return s}],I=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.d,w=Object(a.e)(Object(a.c)({bu:Object(a.c)({ui:i.f,entities:r.e}),process:Object(a.c)({ui:d.a,entities:c.c}),file:o.m,ui:l.a}),{},I(Object(a.a)(...x)));w.asyncReducers={},t.a=w},619:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(20),o=n.n(i);n(281),n(282),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),n(283);var l=n(271),r=n(76),c=n(46),d=n.n(c),u=n(5),p=n(130),m=n(75),b=(n(296),n(56)),h=n(14),y=n(2),g=n(31),f=n(17),E=n.n(f),v=e=>{const t={fill:e.style&&e.style.color||"#C8C8C8",pointerEvents:"none"};return s.a.createElement("svg",Object.assign({key:E()(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.3 16.3",width:16.8,height:16.8},e),s.a.createElement("path",{style:t,d:"M9.5,8.1l6-6c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-6,6l-6-6c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l6,6l-6,6 c-0.4,0.4-0.4,1,0,1.4s1,0.4,1.4,0l6-6l6,6c0.4,0.4,1,0.4,1.4,0s0.4-1,0-1.4L9.5,8.1z"}))},x=e=>{const t={fill:e.style&&e.style.color||"#C8C8C8"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",width:10,height:10},e),s.a.createElement("path",{style:t,d:"M13,0H2A2,2,0,0,0,0,2V13a2,2,0,0,0,2,2H13a2,2,0,0,0,2-2V2A2,2,0,0,0,13,0Zm0,13H2V2H13Z"}))},I=e=>{const t={fill:e.style&&e.style.color||"#C8C8C8"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:10,height:1.5},e),s.a.createElement("path",{style:t,d:"M1,0 L13,0 C13.551915024494,0 14,0.448084975506 14,1 C14,1.5519150244939999 13.551915024494,2 13,2 L1,2 C0.4480849755060001,2 1.1102230246251565e-16,1.551915024494 0,1 C0,0.4480849755060001 0.4480849755059998,1.1102230246251565e-16 1,0Z"}))},w=e=>{const t={fill:e.style&&e.style.color||"#C8C8C8"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 289 291",width:12,height:12},e),s.a.createElement("path",{style:t,d:"M259.81,0H90.19A29.22,29.22,0,0,0,61,29.19V63H29.19A29.22,29.22,0,0,0,0,92.19V261.81A29.22,29.22,0,0,0,29.19,291H198.81A29.22,29.22,0,0,0,228,261.81V228h31.81A29.22,29.22,0,0,0,289,198.81V29.19A29.23,29.23,0,0,0,259.81,0ZM198,261H30V93H198Zm61-63H228V92.19A29.22,29.22,0,0,0,198.81,63H91V30H259Z"}))},O=n(15),S=n(27),j=n.n(S),C=n(173),k=n.n(C),D=n(32),N=n(10),L=n(8),T=n(1),B=n(41),A=n(53),R=n(92),P=n.n(R),F=n(19),U=e=>{const t={fill:e.style&&e.style.color||"#777777",pointerEvents:"none"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 126.56 146.49",width:9,height:11},e),s.a.createElement("path",{style:t,d:"M10.29,78.47V40.24c0-4.09,0-4.09-4.07-4.31l-.5,0C2.12,35.59-.12,33.38,0,30.25s2.36-5.09,5.93-5.13c7.25-.08,14.49,0,21.74,0,.92,0,1.83,0,2.75,0,1.59.06,2.27-.74,2.25-2.27,0-.92,0-1.83,0-2.75C33,8.79,41.27.37,52.56.12Q63.68-.12,74.8.12c11.64.26,19.76,8.64,19.91,20.3,0,.58,0,1.17,0,1.75-.14,2.12.79,3,3,2.93,7.16-.08,14.33,0,21.49,0a16.56,16.56,0,0,1,3,.17,5.33,5.33,0,0,1,4.4,5,5.13,5.13,0,0,1-3.8,5.24,7.57,7.57,0,0,1-2.21.36c-4,0-4.23-.38-4.23,4.62,0,24.57,0,49.14,0,73.71,0,16-10.18,28.45-25.6,31.51a33.12,33.12,0,0,1-6.2.65c-14.16,0-28.32.17-42.48,0-15.67-.2-28.31-10.57-31.19-25.23a36.1,36.1,0,0,1-.53-7Q10.29,96.34,10.29,78.47Zm94.78-.7c0-12.83,0-25.66,0-38.49,0-2.41-.62-3.38-3.22-3.37q-38.63.12-77.24,0c-2.55,0-3.27.85-3.26,3.32.07,25.25,0,50.49.06,75.74,0,11.8,8.73,20.52,20.55,20.6q21.24.13,42.49,0c12-.07,20.55-8.84,20.57-20.81C105.09,102.43,105.07,90.1,105.07,77.77ZM63.65,25.09H80.37a4.17,4.17,0,0,0,.5,0c.94-.12,2,.22,2.52-1.08a9.63,9.63,0,0,0-8.75-13c-7.32-.12-14.64-.08-22,0a8.62,8.62,0,0,0-8.62,6.92,38.75,38.75,0,0,0-.18,4.46c-.15,2.07.8,2.77,2.8,2.74C52.33,25,58,25.08,63.65,25.09Z"}),s.a.createElement("path",{style:t,d:"M52.58,86v26.49a6.59,6.59,0,0,1-1,4.29A5.44,5.44,0,0,1,46,118.92a5,5,0,0,1-4.22-3.78,8.9,8.9,0,0,1-.3-2.47q0-26.74,0-53.48C41.5,57,42.11,55,44,53.8a5.46,5.46,0,0,1,5.72-.2,5.15,5.15,0,0,1,2.82,4.92q0,13.77,0,27.5Z"}),s.a.createElement("path",{style:t,d:"M85,86.27c0,8.83,0,17.66,0,26.49,0,3.26-1.3,5.2-3.86,6a5.42,5.42,0,0,1-7.1-4.35,13.21,13.21,0,0,1-.1-2q0-26.49,0-53c0-3.65,1.55-5.85,4.33-6.39C82,52.35,85,54.78,85,58.79,85,67.95,85,77.11,85,86.27Z"}))},$=e=>{const t={fill:e.style&&e.style.color||"#777777",pointerEvents:"none"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:15,height:15},e,{viewBox:"0 0 555.98 555.97"}),s.a.createElement("path",{style:t,d:"M549.47,263.13,478.86,206a17.49,17.49,0,0,0-28.5,13.6V252H304V105.61h32.36a17.5,17.5,0,0,0,13.37-28.79L290.1,6.21A17.5,17.5,0,0,0,276.73,0h-.18a17.5,17.5,0,0,0-13.42,6.49L206,77.1a17.49,17.49,0,0,0,13.6,28.5H252V252H105.61V219.62a17.5,17.5,0,0,0-28.79-13.37L6.21,265.86a17.51,17.51,0,0,0,.28,27L77.1,350a17.51,17.51,0,0,0,28.51-13.61V304H252V450.36H219.63a17.5,17.5,0,0,0-13.37,28.79l59.61,70.61A17.5,17.5,0,0,0,279.24,556h.18a17.5,17.5,0,0,0,13.42-6.49L350,478.87a17.49,17.49,0,0,0-13.6-28.5H304V304H450.37v32.36a17.5,17.5,0,0,0,28.79,13.37l70.61-59.61a17.48,17.48,0,0,0-.3-27Z"}))},_=e=>{const t={fill:e.color||e.style&&e.style.color||"#777777",pointerEvents:"none"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 277.04 277.03",width:15,height:15},e),s.a.createElement("path",{style:t,d:"M256,111.57c-9.23-4.41-13-8.7-14.55-11.41-.34-.91-.69-1.81-1-2.71a1.23,1.23,0,0,1,0-.18v.13c-.26-.64-.52-1.27-.79-1.9l.09.09-.12-.15c-.37-.86-.75-1.72-1.14-2.57-.84-3-1.24-8.71,2.2-18.44,5.64-16,4.94-24.69-4.23-33.86s-17.87-9.88-33.86-4.23c-10.39,3.67-16.21,3-19,2L182,37.68a4,4,0,0,1-.6-.41l.26.26c-.76-.33-1.53-.64-2.3-1h.37a3.44,3.44,0,0,1-.68-.13l-1.55-.59c-2.64-1.29-7.28-4.89-12.07-14.91C158.12,5.65,151.47,0,138.5,0s-19.62,5.65-26.94,20.95c-4.79,10-9.43,13.61-12.07,14.91l-1.55.59a3.44,3.44,0,0,1-.68.13h.37l-2.3,1,.26-.26a4,4,0,0,1-.6.41l-1.55.68c-2.8.94-8.62,1.64-19-2-16-5.64-24.69-4.94-33.86,4.23s-9.88,17.87-4.23,33.86c3.43,9.73,3,15.45,2.2,18.44-.39.85-.77,1.71-1.14,2.57a1.22,1.22,0,0,1-.12.15l.09-.09c-.27.63-.53,1.26-.79,1.9v-.13a1.23,1.23,0,0,1,0,.18c-.36.9-.71,1.8-1,2.71-1.55,2.71-5.33,7-14.55,11.41-15.3,7.32-21,14-21,26.94s5.65,19.62,21,26.94c8.63,4.13,12.49,8.15,14.23,10.87q1.59,4.37,3.54,8.55c.7,3.15.8,8.73-2.38,17.73-5.64,16-4.94,24.69,4.23,33.86s17.87,9.88,33.86,4.23c8.7-3.07,14.19-3.08,17.4-2.44q4.5,2.12,9.22,3.83c2.71,1.83,6.57,5.72,10.53,14,7.32,15.3,14,21,26.94,21s19.62-5.65,26.94-21c4-8.28,7.82-12.17,10.53-14q4.71-1.71,9.22-3.83c3.2-.63,8.7-.63,17.4,2.44,16,5.64,24.69,4.94,33.86-4.23s9.88-17.87,4.23-33.86c-3.18-9-3.08-14.58-2.38-17.73,1.29-2.79,2.48-5.64,3.54-8.55,1.73-2.72,5.6-6.74,14.23-10.87,15.3-7.32,21-14,21-26.94S271.35,118.88,256,111.57Zm-117.55,66a38.91,38.91,0,1,1,38.91-38.91A38.91,38.91,0,0,1,138.5,177.58Z"}))};class M extends a.Component{constructor(e){super(e),this.onKeyDown=e=>{"Shift"===e.key&&this.setState({shift:!0})},this.onKeyUp=e=>{"Shift"===e.key&&this.setState({shift:!1})},this.onClick=e=>{if(this.state.dragging||this.props.forceSelected)return;const{selected:t}=this.state;e&&t?this.deselect():this.props.selectionDisabled||this.select()},this.select=()=>{if(this.state.selected||this.props.selectionDisabled)return;const{onSelected:e}=this.props;this.setState({selected:!0},e),document.getElementById(this.props.canvasID).parentNode.addEventListener("contextmenu",this.onCanvasClicked,!1),document.getElementById(this.props.canvasID).parentNode.addEventListener("click",this.onCanvasClicked,!1),++M.nbSelected},this.deselect=()=>{if(!this.state.selected||this.props.forceSelected)return;const{onDeselected:e}=this.props;this.setState({selected:!1,dragging:!1},e),document.getElementById(this.props.canvasID).classList.remove("dragging"),document.getElementById(this.props.canvasID).parentNode.removeEventListener("contextmenu",this.onCanvasClicked,!1),document.getElementById(this.props.canvasID).parentNode.removeEventListener("click",this.onCanvasClicked,!1),--M.nbSelected},this.onSelectNodes=e=>{document.activeCanvas===this.props.canvasID&&e.detail.includes(this.props.id)?this.select():this.deselect()},this.onSelectAll=()=>{document.activeCanvas===this.props.canvasID&&this.select()},this.onCanvasClicked=e=>{const{className:t}=this.props,{dragging:n,selected:a,shift:s}=this.state;!a||n||this.node.current.contains(e.target)||e.target.classList.contains("react-contextmenu-item")||e.target.classList.contains("selecting")||s&&e.target.closest("."+t)||(2!==e.button||M.nbSelected<=1||!e.target.closest(`.${t}.selected`))&&this.deselect()},this.onPointerDown=e=>{if(0!==e.button||this.state.dragging||this.props.dragDisabled)return;const{canvasID:t,onPointerDown:n}=this.props,a=this.node.current.getBoundingClientRect();this.mousePos={x:e.clientX-a.left-a.width/2,y:e.clientY-a.top-a.height/2},this.canvas||(this.canvas=document.getElementById(t)),this.canvasRect=this.canvas.getBoundingClientRect(),document.body.addEventListener("pointermove",this.onPointerMove,!1),this.zIndex<M.zIndex&&(this.zIndex=M.zIndex),++this.zIndex,++M.zIndex,n&&n(this.mousePos)},this.onPointerUp=e=>{this.state.dragging&&setTimeout((()=>{const{onPointerUp:e}=this.props,{x:t,y:n}=this.props;e&&e({x:t,y:n}),this.setState({dragging:!1}),document.getElementById(this.props.canvasID).classList.remove("dragging")}),10),document.body.removeEventListener("pointermove",this.onPointerMove,!1)},this.onPointerMove=e=>{const{scale:t,className:n,id:a,onNodeMove:s,x:i,y:o}=this.props,{selected:l}=this.state,r={x:(e.clientX-this.canvasRect.left-this.mousePos.x)/(t||1),y:(e.clientY-this.canvasRect.top-this.mousePos.y)/(t||1)},c={x:r.x-i,y:r.y-o};Object(L.a)(c.x)<.4&&Object(L.a)(c.y)<.4||(s&&s(r),this.setState({dragging:!0}),document.getElementById(this.props.canvasID).classList.add("dragging"),document.body.dispatchEvent(new CustomEvent(n+"-drag",{detail:{node:a,offset:c,selected:l}})),this.select())},this.onAnyNodeDragged=e=>{const{node:t,offset:n,selected:a}=e.detail,{selected:s,shift:i}=this.state,{id:o,x:l,y:r,onNodeMove:c}=this.props;o!==t&&s&&(a||i?(c&&c({x:l+n.x,y:r+n.y}),this.setState({dragging:!0})):this.deselect())},this.state={dragging:!1,selected:!1,shift:!1},this.zIndex=5,this.mousePos={x:0,y:0},this.node=s.a.createRef(),this.canvas=null,this.canvasRect=null}componentDidMount(){const{className:e}=this.props;document.body.addEventListener(e+"-drag",this.onAnyNodeDragged,!1),document.body.addEventListener("pointerup",this.onPointerUp,!1),document.body.addEventListener("keydown",this.onKeyDown,!1),document.body.addEventListener("keyup",this.onKeyUp,!1),document.body.addEventListener(T.J,this.onSelectNodes,!1),document.addEventListener(T.I,this.onSelectAll,!1)}componentWillUnmount(){const{className:e}=this.props;document.getElementById(this.props.canvasID).parentNode.removeEventListener("contextmenu",this.onCanvasClicked,!1),document.getElementById(this.props.canvasID).parentNode.removeEventListener("click",this.onCanvasClicked,!1),document.body.removeEventListener("click",this.onClickDoc,!1),document.body.removeEventListener("pointermove",this.onPointerMove,!1),document.body.removeEventListener("pointerup",this.onPointerUp,!1),document.body.removeEventListener(e+"-drag",this.onAnyNodeDragged,!1),document.body.removeEventListener("keydown",this.onKeyDown,!1),document.body.removeEventListener("keyup",this.onKeyUp,!1),document.body.removeEventListener(T.J,this.onSelectNodes,!1),document.removeEventListener(T.I,this.onSelectAll,!1)}render(){const{selected:e,dragging:t}=this.state,{className:n,id:a,style:i,children:o,x:l,y:r}=this.props;return s.a.createElement(q,{style:{...i,position:"absolute",userSelect:"none",transform:"translate(-50%, -50%)",cursor:t?"-webkit-grabbing":"-webkit-grab",left:l+"px",top:r+"px",zIndex:""+(this.zIndex+M.zIndex)},className:j()(""+n,{selected:e}),id:void 0!==a?`${n}-${a}`:"","data-id":a,ref:this.node,onClick:this.onClick,onDoubleClick:this.onClick,onPointerDown:this.onPointerDown},o)}}M.zIndex=1,M.nbSelected=0;var V=M;const q=y.b.div`

  &:not(:hover) .node-tooltip {
    opacity: 0;
  }

  &:hover .node-tooltip {
    transition-delay: 0.4s;
  }
`;class G extends a.PureComponent{constructor(e){super(e),this.onSelected=()=>{this.setState({selected:!0});const{selectBUState:e,buStateID:t}=this.props;e(t)},this.onDeselected=()=>{this.setState({selected:!1});const{deselectBUState:e,buStateID:t}=this.props;e(t)},this.onDblClick=e=>{const{renaming:t}=this.state;if(t)return;const{buState:n,openedState:a}=this.props;n.id===a?this.closeEdition():this.openEdition()},this.openEdition=()=>{const{buState:e,openBUState:t,buID:n}=this.props,{id:a}=e;t(n,a)},this.closeEdition=()=>{const{buState:e,closeBUState:t,buID:n}=this.props,{id:a}=e;t(n,a),this.deselect()},this.onNodeMove=e=>{const{updateBUState:t,buState:n,buID:a}=this.props;t(a,{...n,x:e.x,y:e.y})},this.toggleRename=(e,t)=>{this.setState({renaming:!0}),document.body.addEventListener("click",this.onClickDoc,!1)},this.applyRename=()=>{const e=this.nameInput.current.value,{buState:t,updateBUState:n,buID:a}=this.props;e!==t.name&&n(a,{...t,name:e}),document.body.removeEventListener("click",this.onClickDoc,!1),this.setState({renaming:!1})},this.onClickDoc=e=>{this.nameInput.current!==e.target&&this.state.renaming&&this.applyRename()},this.deleteSelectedState=e=>this.state.selected&&this.delete(),this.delete=()=>this.props.deleteBUState(this.props.buID,this.props.buState.id),this.state={dragging:!1,selected:!1,renaming:!1,width:T.M,x:e.buState.x,y:e.buState.y}}componentDidMount(){this.nameInput=s.a.createRef(),document.body.addEventListener("statenode-drag",this.onAnyNodeDragged,!1),document.body.addEventListener("pointerup",this.onPointerUp,!0),document.addEventListener(T.k,this.deleteSelectedState,!1),document.addEventListener(T.H,this.onSelectAll,!1)}componentWillUnmount(){document.getElementById("bu-canvas").parentNode.removeEventListener("contextmenu",this.onCanvasClicked,!1),document.getElementById("bu-canvas").parentNode.removeEventListener("click",this.onCanvasClicked,!1),document.body.removeEventListener("click",this.onClickDoc,!1),document.body.removeEventListener("pointermove",this.onPointerMove,!1),document.body.removeEventListener("pointerup",this.onPointerUp,!1),document.body.removeEventListener("statenode-drag",this.onAnyNodeDragged,!1),document.removeEventListener(T.k,this.deleteSelectedState,!1),document.removeEventListener(T.H,this.onSelectAll,!1)}static getDerivedStateFromProps(e,t){return e.buState.x!==t.x?{...t,x:e.buState.x,y:e.buState.y}:t}render(){const{buState:e,openedState:t,scale:n,t:a}=this.props,{selected:o,renaming:l,dragging:r}=this.state,{id:c,name:d,x:u,y:p}=e,m=c===t,b=document.getElementById("bu-canvas");return s.a.createElement(s.a.Fragment,null,s.a.createElement(V,{canvasID:"bu-canvas",className:"bu-state-node",id:c,x:u,y:p,forceSelected:l,dragDisabled:l,scale:n,onSelected:this.onSelected,onDeselected:this.onDeselected,onPointerUp:this.onNodeMove},s.a.createElement(K,{opened:m,selected:o,renaming:l,onClick:r?null:this.onClick,onDoubleClick:r?null:this.onDblClick},s.a.createElement(O.b,{id:"state-node-context-"+c,holdToDisplay:-1},s.a.createElement(z,null,!l&&s.a.createElement(J,{style:Object.assign({},(o||m)&&{color:"#FFF"})}),l?s.a.createElement("input",{ref:this.nameInput,type:"text",autoFocus:!0,defaultValue:d,style:{color:"#FFF"},onKeyDown:e=>13===e.keyCode?this.applyRename():null}):s.a.createElement(W,{className:"noselect"},d),s.a.createElement(Z,{className:"bin",style:Object.assign({},(o||m)&&{color:"#FFF"}),onClick:this.delete}),s.a.createElement(X,{style:Object.assign({},(o||m)&&{color:"#FFF"}),onClick:this.openEdition}))),s.a.createElement(H,null),s.a.createElement(Y,null))),b&&Object(i.createPortal)(s.a.createElement(O.a,{id:"state-node-context-"+c},s.a.createElement(O.c,{onClick:m?this.closeEdition:this.openEdition},a(m?"Close":"Edit")),s.a.createElement(O.c,{onClick:this.toggleRename},a("Rename")),s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:()=>Object(T.l)([c])},a("Copy")),s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:()=>{this.state.selected||this.delete(),Object(T.o)()}},a("Delete"))),b.parentNode))}}G.zIndex=1,G.nbSelected=0;const K=y.b.div`
  user-select: none;
  width: ${T.M+"px"};
  height: ${T.L+"px"};
  border-radius: 27px;
  background-color: #2B2C2D;
  border: 1px solid ${T.i.PINK};
  box-sizing: border-box;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  user-select: none;
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  cursor: inherit;

  ${e=>e.renaming&&y.a`
    padding-left: 12px;
    user-select: initial;
  `}

  ${e=>e.opened&&y.a`
    background-color: #731B31;
  `}
  
  ${e=>e.selected&&y.a`
    background-color: #306cc5;
  `}

  &:not(:hover) .bin {
    display: none;
  }

  ${e=>(e.opened||e.selected||e.renaming)&&y.a`
    & .bin {
      display: inline !important;
    }
  `}
`,z=y.b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  cursor: inherit;
`,Y=y.b.span`
  height: 12px;
  width: 12px;
  background-color: ${T.i.BLUE};
  box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);
  border-radius: 50%;
  position: absolute;
  right: 0;
  top: 50%;
  transform: translate(50%, -50%);
`,H=Object(y.b)(Y)`
  right: auto;
  left: 0;
  transform: translate(-50%, -50%);
  background-color: ${T.i.GREEN};
`,W=y.b.h5`
  user-select: none;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  pointer-events: none;
  font-size: 0.8rem;
`,Z=Object(y.b)(U)`
  margin-left: 12px;
  cursor: pointer;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  right: 34px;
`,J=Object(y.b)($)`
  position: absolute;
  pointer-events: none;
  top: 50%;
  transform: translateY(-50%);
  left: 15px;
  width: 9px;
  height: 9px;
`,X=Object(y.b)(_)`
  position: absolute;
  cursor: pointer;
  top: 50%;
  transform: translateY(-50%);
  right: 15px;
  width: 9px;
  height: 9px;
`,Q={openBUState:N.P,closeBUState:N.A,updateBUState:N.W,deleteBUState:N.F,selectBUState:D.j,deselectBUState:D.g};var ee=Object(u.b)(((e,t)=>{let{bu:n}=e,{buID:a,buStateID:s}=t;return{openedState:Object(D.h)(n,a),buState:n.entities.present.byIds[a]?Object(N.M)(n.entities.present.byIds[a].present,s):null}}),Q)(Object(h.d)()(G)),te=e=>{const{icon:t,label:n,noShadow:a}=e;return s.a.createElement(ne,e,s.a.createElement(ae,{noShadow:a,labelled:!!n},t),n)};const ne=y.b.span`
  display: flex;
  align-items: center;
  font-size: 12px;
  font-weight: normal;
  font-family: 'Lato';
  cursor: pointer;
  color: ${T.i.LIGHT_GREY};
  outline: none;

  &:hover > span,
  &:focus > span {
    background-color: ${T.i.GREY};
  }

  &:active > span {
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.2);
    background-color: #2B2C2D;
  }
`,ae=y.b.span`
  width: 32px;
  height: 32px;
  max-width: 100%;
  max-height: 100%;
  background-color: #2B2C2D;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  pointer-events: none;
  outline: none;

  ${e=>e.labelled&&y.a`
    margin-right: 11px;
  `}

  ${e=>!e.noShadow&&y.a`
    box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  `}
`;var se=e=>{const t={fill:e.style&&e.style.color||"#777777"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",width:10,height:10},e),s.a.createElement("path",{style:t,d:"M9.3,4.3H5.7V0.7C5.7,0.3,5.4,0,5,0S4.4,0.3,4.4,0.7v3.6H0.7C0.3,4.3,0,4.6,0,5s0.3,0.7,0.7,0.7h3.7v3.7 C4.4,9.7,4.7,10,5,10s0.7-0.3,0.7-0.7V5.6h3.6C9.7,5.6,10,5.3,10,5S9.7,4.3,9.3,4.3z"}))},ie=e=>{const t={fill:e.style&&e.style.color||"#777777"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 17.039993286132812 17.919921875",width:15,height:15},e),s.a.createElement("g",null,s.a.createElement("path",{id:"path-0",style:t,d:"M15.60888671875,0.374053955078125 L17.5341796875,2.24713134765625 C17.78271484375,2.4897003173828125 17.919921875,2.8082122802734375 17.919921875,3.1461639404296875 L17.919921875,15.481735229492188 C17.919921875,16.3409423828125 17.184326171875,17.039993286132812 16.2802734375,17.039993286132812 L1.6397705078125,17.039993286132812 C0.735595703125,17.039993286132812 0,16.3409423828125 0,15.481735229492188 L0,1.5693817138671875 C0,0.7101593017578125 0.735595703125,0.0111083984375 1.6397705078125,0.0111083984375 L13.05908203125,0.0111083984375 C13.07763671875,0.0082244873046875 13.12255859375,0.006622314453125 13.158935546875,0.0053253173828125 C13.204345703125,0.0037078857421875 13.236328125,0.0025634765625 13.187744140625,0 C13.232421875,0 14.70361328125,0.0120391845703125 14.70361328125,0.0120391845703125 C15.042724609375,0.0120391845703125 15.3720703125,0.1435089111328125 15.60888671875,0.374053955078125 L15.60888671875,0.374053955078125ZM16.2802734375,15.651153564453125 C16.376708984375,15.651153564453125 16.45849609375,15.573379516601562 16.45849609375,15.481719970703125 L16.45849609375,3.1878204345703125 L14.620849609375,1.399932861328125 L13.91943359375,1.399932861328125 L13.91943359375,4.9933013916015625 C13.91943359375,5.8228912353515625 13.209228515625,6.49786376953125 12.336181640625,6.49786376953125 L5.572265625,6.49786376953125 C4.69921875,6.49786376953125 3.989013671875,5.8228912353515625 3.989013671875,4.9933013916015625 L3.989013671875,1.399932861328125 L1.639892578125,1.399932861328125 C1.5433349609375,1.399932861328125 1.4615478515625,1.4777069091796875 1.4615478515625,1.569366455078125 L1.4615478515625,15.481719970703125 C1.4615478515625,15.573379516601562 1.5433349609375,15.651153564453125 1.639892578125,15.651153564453125 L3.110107421875,15.651153564453125 L3.110107421875,10.679153442382812 C3.110107421875,10.183807373046875 3.534912109375,9.780120849609375 4.05615234375,9.780120849609375 L13.852294921875,9.780120849609375 C14.37353515625,9.780120849609375 14.79833984375,10.183807373046875 14.79833984375,10.679153442382812 L14.79833984375,15.651153564453125 L16.2802734375,15.651153564453125 L16.2802734375,15.651153564453125ZM12.456787109375,1.399932861328125 L5.450439453125,1.399932861328125 L5.450439453125,4.9933013916015625 C5.450439453125,5.055328369140625 5.5078125,5.1090240478515625 5.572265625,5.1090240478515625 L12.335205078125,5.1090240478515625 C12.400390625,5.1090240478515625 12.456787109375,5.0543975830078125 12.456787109375,4.9933013916015625 L12.456787109375,1.399932861328125 L12.456787109375,1.399932861328125ZM13.336669921875,15.651168823242188 L4.571533203125,15.651168823242188 L4.571533203125,11.168960571289062 L13.336669921875,11.168960571289062 L13.336669921875,15.651168823242188 L13.336669921875,15.651168823242188Z"})))},oe=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 20 18.6",width:15,height:15},e),s.a.createElement("g",null,s.a.createElement("path",{style:t,d:"M 17.2 0.8 C 16.9 0.5 16.4 0.5 16.1 0.8 C 15.8 1.1 15.8 1.7 16.1 2 C 17.6 3.7 18.5 5.8 18.5 8.1 C 18.5 13 14.7 16.9 10.1 16.9 C 5.5 16.9 1.7 12.9 1.7 8.1 C 1.7 5.8 2.5 3.6 4.1 1.9 C 4.4 1.6 4.4 1 4.1 0.7 C 3.8 0.4 3.3 0.4 3 0.7 C 1 2.7 0 5.3 0 8.1 C 0 13.9 4.5 18.6 10 18.6 C 15.5 18.6 20 13.9 20 8.1 C 20 5.4 19 2.7 17.2 0.8 Z"}),s.a.createElement("path",{style:t,d:"M 10 13.2 L 15.2 7.8 C 15.5 7.5 15.5 6.9 15.2 6.6 C 14.9 6.3 14.4 6.3 14.1 6.6 L 10.7 10 L 10.7 0.9 C 10.7 0.4 10.3 0 9.9 0 C 9.5 0 9.1 0.4 9.1 0.9 L 9.1 10 L 5.9 6.5 C 5.6 6.2 5.1 6.2 4.8 6.5 C 4.5 6.8 4.5 7.4 4.8 7.7 L 10 13.2 L 10 13.2 Z"})))},le=n(261);class re extends a.Component{constructor(e){super(e),this.onMouseOver=()=>this.svg.current.classList.add("hovered"),this.onMouseOut=()=>this.svg.current.classList.remove("hovered"),this.onChangeColor=e=>{const{updateBUNode:t,buID:n,sourceAction:a}=this.props;e=e.hex,this.setState({color:e}),t(n,{...a,color:e})},this.onTouchLink=e=>{if(2!==e.button)return;e.stopPropagation(),document.body.removeEventListener("pointerdown",this.closeColorSetting,!1),document.body.removeEventListener("keydown",this.closeColorSetting,!1),document.body.removeEventListener("wheel",this.closeColorSetting,!1);const{settingColor:t}=this.state;if(t)this.closeColorSetting(null);else{const e=document.getElementsByClassName("SplitPane")[0].getBoundingClientRect(),t=this.bt.current.getBoundingClientRect();this.setState({settingColor:!0,btAbsPos:{x:t.x-e.x+t.width,y:t.y-e.y+t.height/2,height:t.height}}),document.body.addEventListener("pointerdown",this.closeColorSetting,!1),document.body.addEventListener("keydown",this.closeColorSetting,!1),document.body.addEventListener("wheel",this.closeColorSetting,!1)}},this.closeColorSetting=e=>{e&&"wheel"!==e.type&&(this.colorPicker.current===e.target||this.colorPicker.current.contains(e.target))||(this.setState({settingColor:!1}),document.body.removeEventListener("pointerdown",this.closeColorSetting,!1),document.body.removeEventListener("keydown",this.closeColorSetting,!1),document.body.removeEventListener("wheel",this.closeColorSetting,!1))},this.openLink=()=>{const{openBUState:e,buID:t,sourceID:n}=this.props;e(t,n)},this.state={startNodeWidth:0,startPoint:{x:0,y:0},destPoint:{x:0,y:0},color:"#C8C8C8",btAbsPos:{x:0,y:0,height:0},settingColor:!1},this.svg=s.a.createRef(),this.bt=s.a.createRef(),this.colorPicker=s.a.createRef()}static getDerivedStateFromProps(e,t){const{sourceNode:n,destNode:a,startNodeWidth:s,sourceAction:i}=e,o=n.x+s,l=n.y+T.L/2,r=a.x,c=a.y+T.L/2;return{...t,color:i.color||"#C8C8C8",startNodeWidth:s,startPoint:{x:o,y:l},destPoint:{x:r,y:c}}}computePath(){const{startPoint:e,destPoint:t,startNodeWidth:n}=this.state,{inCount:a,outCount:s}=this.props,i=e.x<t.x?e.x:t.x,o=e.y<t.y?e.y:t.y,l=Object(L.f)(Object(L.a)(t.x-e.x),40),r=Object(L.f)(Object(L.a)(t.y-e.y),40),c={...e};let d="",u=0,p=0,m=0,b=0,h=0;const y=12*(s-1),g=.5*y,f=12*s,E=12*a,v=12*(a-1)*.5;switch(e.x<t.x&&e.y<t.y?"top-left":e.x>t.x&&e.y<t.y?"top-right":e.x<t.x&&e.y>t.y?"bottom-left":"bottom-right"){case"top-left":u=t.x-e.x,p=t.y-e.y,u<24*a?p<96?(m=f,b=Object(L.f)(u,n)+f+E,h=p/2,d=`\n              M 0 0\n              l ${f} 0\n              c 12 0, 12 0, 12 -12\n              l 0 -24\n              c 0 -12, 0 -12, -12 -12\n              l -${b} 0\n              c -12 0, -12 0, -12 12\n              l 0 ${p+24}\n              c 0 12, 0 12, 12 12\n              l 12 0\n              L ${u} ${p}`,c.x=i+m-b/2-y,c.y=o-48):(h=p/2,u=Object(L.f)(u,24),d=`\n              M 0 0\n              l ${f} 0\n              c 12 0, 12 0, 12 12\n              l 0 ${p/2-24}\n              c 0 12, 0 12, -12 12\n              L ${t.x-e.x-E} ${p/2}\n              c -12 0, -12 0, -12 12\n              l 0 ${p/2-24}\n              c 0 12, 0 12, 12 12\n              l 12 0\n              L ${t.x-e.x} ${p}`,c.x=i+y,c.y=o+p/2):p<24?(m=u/2+18*(s-1)+18*(a-1),d=`\n              M 0,0\n              C ${u+25*(s-1)+25*(a-1)} 0, ${25*(s-1)+25*(a-1)} ${p}, ${u} ${p}`,c.x=i+m,c.y=o+p/2):(m=u/2-g-v,h=p/2,d=`\n              M 0,0\n              l ${m}, 0\n              c 12 0, 12 0, 12 12\n              l 0 ${p-24}\n              c 0 12, 0 12, 12 12\n              L ${u} ${p}`,c.x=i+m+12,c.y=o+p/2);break;case"top-right":u=e.x-t.x,p=t.y-e.y,p<96?(b=Object(L.f)(u,n)+f+E,h=p-24,d=`\n            M ${u} 0\n            l ${f} 0\n            c 12 0, 12 0, 12 -12\n            l 0 -24\n            c 0 -12, 0 -12, -12 -12\n            l -${b} 0\n            c -12 0, -12 0, -12 12\n            l 0 ${p+24}\n            c 0 12, 0 12, 12 12\n            L 0 ${p}`,c.x=i-(b-u-f)+b/2+y,c.y=o-48):(b=u+y,h=p-24,d=`\n            M ${u} 0\n            l ${f} 0\n            c 12 0, 12 0, 12 12\n            l 0 ${p/2-24}\n            c 0 12, 0 12, -12 12\n            L ${-E} ${p/2}\n            c -12 0, -12 0, -12 12\n            l 0 ${p/2-24}\n            c 0 12, 0 12, 12 12\n            L 0 ${p}`,c.x=i+b/2,c.y=o+(h+24)/2);break;case"bottom-left":u=t.x-e.x,p=e.y-t.y,u<24*a?p<96?(b=n+f,h=p+24,d=`\n              M 0 ${p}\n              l ${f} 0\n              c 12 0, 12 0, 12 12\n              l 0 24\n              c 0 12, 0 12, -12 12\n              l -${n+24*s} 0\n              c -12 0, -12 0, -12 -12\n              l 0 -${h}\n              c 0 -12, 0 -12, 12 -12\n              l 12 0\n              L ${t.x-e.x} 0`,c.x=i-b-12,c.y=o+(h+24)/2):(b=Object(L.f)(u,24*s),h=p/2,d=`\n              M 0 ${p}\n              l ${f} 0\n              c 12 0, 12 0, 12 -12\n              l 0 -${h-24}\n              c 0 -12, 0 -12, -12 -12\n              l -${b+24} 0\n              c -12 0, -12 0, -12 -12\n              l 0 -${h-24}\n              c 0 -12, 0 -12, 12 -12\n              L ${t.x-e.x} 0`,c.x=i-b/2,c.y=o+h):p<24?(d=`\n              M 0 ${p}\n              C ${u+25*(s-1)+25*(a-1)} ${p}, -${25*(s-1)+25*(a-1)} 0, ${u} 0`,c.x=i+(u-6*(s-1)+6*(a-1))/2,c.y=o+p/2):(m=Object(L.f)(u/2,g+v)-g-v,h=p-24,d=`\n              M 0 ${p}\n              l ${m} 0\n              c 12 0, 12 0, 12 -12\n              l 0 -${h}\n              c 0 -12, 0 -12, 12 -12\n              L ${Object(L.a)(t.x-e.x)} 0`,c.x=i+m+12,c.y=o+(h+24)/2);break;case"bottom-right":u=e.x-t.x,p=e.y-t.y,p<96?(b=Object(L.f)(u,n)+f+E,h=p/2,d=`\n            M ${u} ${p}\n            l ${f} 0\n            c 12 0, 12 0, 12 12\n            l 0 24\n            c 0 12, 0 12, -12 12\n            l -${b} 0\n            c -12 0, -12 0, -12 -12\n            l 0 -${p+24}\n            c 0 -12, 0 -12, 12 -12\n            L 0 0`,c.x=i+(u>n?b/2-24:f*(u<n/2?-1:1)),c.y=o+p+48):(b=Object(L.f)(u,24)+f+E,h=p/2,d=`\n            M ${u} ${p}\n            l ${f} 0\n            c 12 0, 12 0, 12 -12\n            l 0 -${h-24}\n            c 0 -12, 0 -12, -12 -12\n            l -${b} 0\n            c -12 0, -12 0, -12 -12\n            l 0 -${h-24}\n            c 0 -12, 0 -12, 12 -12\n            L 0 0`,c.x=i+b/2-48,c.y=o+h)}return{left:i,top:o,width:l,height:r,btPos:c,path:d}}render(){const{left:e,top:t,width:n,height:a,btPos:o,path:l}=this.computePath(),{color:r,settingColor:c,btAbsPos:d}=this.state,u=document.getElementsByClassName("SplitPane")[0];return s.a.createElement(s.a.Fragment,null,s.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/1999/xhtml",className:"state-node-link",ref:this.svg,width:n,height:a,style:{left:e,top:t}},s.a.createElement("path",{d:l,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:{stroke:r},onPointerDown:this.onTouchLink,onContextMenu:e=>e.stopPropagation()})),s.a.createElement("span",{className:"state-node-link-bt",ref:this.bt,style:{left:o.x,top:o.y,borderColor:r,borderStyle:"solid",borderWidth:1},onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.openLink,onPointerDown:this.onTouchLink,onContextMenu:e=>e.stopPropagation()},s.a.createElement(_,{width:14,height:14,style:{color:"rgba(0,0,0,0.3)"}})),c&&Object(i.createPortal)(s.a.createElement("div",{style:Object.assign({},ce.colorPickerTooltip,{left:d.x,top:d.y}),ref:this.colorPicker,onContextMenu:e=>e.stopPropagation()},s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{style:Object.assign({},ce.tooltipArrow,{})}),s.a.createElement(le.SketchPicker,{disableAlpha:!0,color:r,onChangeComplete:this.onChangeColor}))),u))}}const ce={colorPickerTooltip:{position:"absolute",top:0,left:0,zIndex:1e3},tooltipArrow:{position:"absolute",top:0,left:0,width:16,height:16,transform:"translate(-50%, -8px) rotateZ(45deg)",backgroundColor:"#323435",zIndex:10}};var de=Object(u.b)(((e,t)=>{let{bu:n}=e,{buID:a,sourceID:s,destID:i,sourceActionID:o}=t;return{sourceNode:Object(N.N)(n.entities.present.byIds[a].present,s),sourceAction:Object(N.H)(n.entities.present.byIds[a].present,o),destNode:Object(N.N)(n.entities.present.byIds[a].present,i)}}),{openBUState:N.P,updateBUNode:N.V})(Object(h.d)()(re)),ue=n(175),pe=n.n(ue),me=n(262),be=n.n(me),he=e=>{const t={fill:"none",stroke:e.color||e.style&&e.style.color||"#000",strokeWidth:12.417,strokeMiterlimit:10},n={fill:"none",stroke:e.color||e.style&&e.style.color||"#000",strokeWidth:12.417,strokeLinecap:"round",strokeMiterlimit:10},a={fill:"none",stroke:e.color||e.style&&e.style.color||"#000",strokeWidth:8.278,strokeLinecap:"round",strokeMiterlimit:10};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 157 155.91",width:20,height:20},e),s.a.createElement("g",null,s.a.createElement("circle",{style:t,cx:"66.34",cy:"64.76",r:"45.53"}),s.a.createElement("line",{style:n,x1:"136.19",y1:"136.68",x2:"98.94",y2:"99.43"}),s.a.createElement("g",null,s.a.createElement("line",{style:a,x1:"44.61",y1:"64.76",x2:"88.07",y2:"64.76"})),s.a.createElement("g",null,s.a.createElement("line",{style:a,x1:"66.34",y1:"43.03",x2:"66.34",y2:"86.49"}))))},ye=e=>{const t={fill:"none",stroke:e.color||e.style&&e.style.color||"#000",strokeWidth:12.417,strokeMiterlimit:10},n={fill:"none",stroke:e.color||e.style&&e.style.color||"#000",strokeWidth:12.417,strokeLinecap:"round",strokeMiterlimit:10},a={fill:"none",stroke:e.color||e.style&&e.style.color||"#000",strokeWidth:8.278,strokeLinecap:"round",strokeMiterlimit:10};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 157 155.91",width:20,height:20},e),s.a.createElement("g",null,s.a.createElement("circle",{style:t,cx:"66.34",cy:"64.76",r:"45.53"}),s.a.createElement("line",{style:n,x1:"136.19",y1:"136.68",x2:"98.94",y2:"99.43"}),s.a.createElement("g",null,s.a.createElement("line",{style:a,x1:"44.61",y1:"64.76",x2:"88.07",y2:"64.76"}))))},ge=e=>{const t={fill:e.color||e.style&&e.style.color||T.i.LIGHT_GREY};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 16.9 16.9",width:14,height:14},e),s.a.createElement("path",{style:t,d:"M6,15.3H1.6V11c0-0.5-0.4-0.8-0.8-0.8C0.4,10.2,0,10.5,0,11v5.2c0,0.5,0.4,0.8,0.8,0.8H6 c0.5,0,0.8-0.4,0.8-0.8C6.8,15.7,6.4,15.3,6,15.3z"}),s.a.createElement("path",{style:t,d:"M16.1,10.2c-0.5,0-0.8,0.4-0.8,0.8v4.3H11c-0.5,0-0.8,0.4-0.8,0.8c0,0.5,0.4,0.8,0.8,0.8h5.2 c0.5,0,0.8-0.4,0.8-0.8V11C16.9,10.5,16.6,10.2,16.1,10.2z"}),s.a.createElement("path",{style:t,d:"M16.1,0H11c-0.5,0-0.8,0.4-0.8,0.8s0.4,0.8,0.8,0.8h4.3V6c0,0.5,0.4,0.8,0.8,0.8c0.5,0,0.8-0.4,0.8-0.8V0.8 C16.9,0.4,16.6,0,16.1,0z"}),s.a.createElement("path",{style:t,d:"M6,0H0.8C0.4,0,0,0.4,0,0.8V6c0,0.5,0.4,0.8,0.8,0.8c0.5,0,0.8-0.4,0.8-0.8V1.6H6c0.5,0,0.8-0.4,0.8-0.8 S6.4,0,6,0z"}))},fe=s.a.memo((e=>s.a.createElement(Ee,null,s.a.createElement(te,{onClick:e.zoomOut,icon:s.a.createElement(ye,{style:{color:T.i.LIGHT_GREY}})}),s.a.createElement(te,{onClick:e.resetZoom,icon:s.a.createElement(ge,{style:{color:T.i.LIGHT_GREY}})}),s.a.createElement(te,{onClick:e.zoomIn,icon:s.a.createElement(he,{style:{color:T.i.LIGHT_GREY}})}))));const Ee=y.b.div`
  width: 108px;
  height: 36px;
  background-color: #242626;
  border-radius: 18px;
  position: absolute;
  left: 22px;
  bottom: 22px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-left: 2px;
  padding-right: 2px;
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
`;var ve=()=>{const[e,t]=Object(a.useState)(!1),[n,o]=Object(a.useState)({start:{x:0,y:0},current:{x:0,y:0}}),l=Object(a.useRef)(),r={left:Object(L.g)(n.start.x,n.current.x),width:Object(L.a)(n.current.x-n.start.x),top:Object(L.g)(n.start.y,n.current.y),height:Object(L.a)(n.current.y-n.start.y)};r.right=r.left+r.width,r.bottom=r.top+r.height;const c=Object(a.useCallback)((t=>{if(!e)return;l.current.parentNode.classList.add("selecting");const a=l.current.getBoundingClientRect();o({...n,current:{x:t.clientX-a.x,y:t.clientY-a.y}})}),[e,n]),d=Object(a.useCallback)((e=>{document.body.removeEventListener("click",d,!1),l.current&&l.current.parentNode.classList.remove("selecting")}),[]),u=Object(a.useCallback)((e=>{t(!1),e.target===l.current.parentNode&&document.body.dispatchEvent(new CustomEvent(T.K,{detail:r})),document.body.addEventListener("click",d,!1)}),[d,r]),p=Object(a.useCallback)((n=>{if(e||0!==n.button)return;const a=l.current.getBoundingClientRect();t(!0),o({start:{x:n.clientX-a.x,y:n.clientY-a.y},current:{x:n.clientX-a.x,y:n.clientY-a.y}})}),[e]);return Object(g.a)("mousemove",c,document.body),Object(g.a)("mouseup",u,document.body),s.a.createElement("div",{style:xe.wrapper,ref:l,onPointerDown:p},e&&Object(i.createPortal)(s.a.createElement("div",{style:Object.assign({},xe.selectionRect,r)}),l.current.parentNode))};const xe={wrapper:{position:"absolute",top:0,bottom:0,left:0,right:0},selectionRect:{position:"absolute",background:"#00ffff66",border:"solid 1px #00ffff",opacity:.1,pointerEvents:"none"}};var Ie=s.a.memo((e=>{const{canvasID:t,noSelection:n,onScaleUpdate:i,onPositionUpdate:o}=e,[l,r]=Object(a.useState)(!1),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(!1),[m,b]=pe()(1,(e=>i&&i(e))),[h,y]=pe()({x:0,y:0},(e=>o&&o(e))),g=Object(a.useCallback)((e=>"Shift"===e.key?d(!0):"Alt"===e.key?p(!0):null),[]),f=Object(a.useCallback)((e=>"Shift"===e.key?d(!1):"Alt"===e.key?p(!1):null),[]),E=Object(a.useCallback)((e=>{l&&r(!1),document.body.removeEventListener("mouseup",E,!1)}),[l]),v=Object(a.useCallback)((e=>{l||((1===e.button||0===e.button&&u)&&r(!0),document.body.addEventListener("mouseup",E,!1),document.activeCanvas=t)}),[l,u,E,t]),x=Object(a.useCallback)((e=>{if(!l)return;const t={x:h.x+e.movementX,y:h.y+e.movementY};y(t)}),[l,h.x,h.y,y]),I=Object(a.useCallback)((e=>{if(e.target!==e.currentTarget)return;const t=20*(c?4:1);let n={};switch(e.key){case"ArrowDown":n={x:h.x,y:h.y-t};break;case"ArrowUp":n={x:h.x,y:h.y+t};break;case"ArrowRight":n={x:h.x-t,y:h.y};break;case"ArrowLeft":n={x:h.x+t,y:h.y};break;default:return}y(n)}),[h.x,h.y,y,c]),w=Object(a.useCallback)((e=>{const t=be()(m+.1*(e?-1:1),.5,1.8);b(t)}),[m,b]),O=Object(a.useCallback)((()=>{b(1),y({x:0,y:0})}),[y,b]),S=Object(a.useCallback)((e=>{const{zoomOut:n,resetZoom:a,canvas:s}=e.detail;s===t&&(a?O():w(n))}),[t,O,w]),j=Object(a.useCallback)((e=>{w(e.deltaY>0)}),[w]);return Object(a.useEffect)((()=>(document.addEventListener("zoomcanvas",S,!1),document.body.addEventListener("keydown",g,!1),document.body.addEventListener("keyup",f,!1),()=>{document.removeEventListener("zoomcanvas",S,!1),document.body.removeEventListener("keydown",g,!1),document.body.removeEventListener("keyup",f,!1),document.body.removeEventListener("mouseup",E,!1)})),[S,g,f,E]),s.a.createElement(Oe,{tabIndex:"0",onMouseDown:v,onMouseUp:E,onMouseMove:l?x:null,onWheel:j,onKeyDown:I,scale:m,movement:h,dragging:l},!n&&!l&&s.a.createElement(ve,null),s.a.createElement(we,{id:t,scale:m,movement:h,onKeyDown:I,tabIndex:"0"},e.children),s.a.createElement(fe,{zoomOut:()=>w(!0),resetZoom:O,zoomIn:()=>w(!1)}))}));const we=y.b.div.attrs((e=>({style:{left:e.movement.x+"px",top:e.movement.y+"px",transform:`scale(${e.scale})`}})))`
  display: flex;
  flex: 1;
  position: relative;
  width: 100%;
  height: 100%;
  transform-origin: center center;
  pointer-events: none;

  & > * {
    pointer-events: auto;
  }
`,Oe=y.b.div.attrs((e=>({style:{backgroundPositionX:e.movement.x+"px",backgroundPositionY:e.movement.y+"px",backgroundSize:`${40*e.scale}px ${40*e.scale}px`}})))`
  display: flex;
  flex: 1;
  position: relative;
  width: 100%;
  height: 100%;
  background-image: linear-gradient(to right, #2b2c2d55 1px, transparent 1px), linear-gradient(to bottom, #2b2c2d55 1px, transparent 1px);
  overflow: hidden;

  ${e=>e.dragging&&y.a`
    cursor: move;
  `}

  &.selecting * {
    pointer-events: none !important;
  }
`,Se=(e,t)=>document.dispatchEvent(new CustomEvent("zoomcanvas",{detail:{canvas:document.activeCanvas,zoomOut:e,resetZoom:t}}));var je=e=>{const t={fill:e.style&&e.style.color||"#777777",pointerEvents:"none"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:12,height:12},e,{viewBox:"0 0 131.272 131.272"}),s.a.createElement("path",{style:t,d:"M107.854,131.272c-0.627,0-1.271-0.197-1.808-0.609L20.434,65.636l85.619-65.027 c1.319-0.996,3.18-0.746,4.183,0.573c0.991,1.313,0.734,3.18-0.579,4.177L30.291,65.636l79.365,60.277 c1.313,0.996,1.569,2.864,0.579,4.177C109.644,130.866,108.755,131.272,107.854,131.272z"}))},Ce=e=>{const t={fill:e.style&&e.style.color||"#777777"};return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 287.6 288.04",style:e.style,width:e.width||14,height:e.height||14},s.a.createElement("path",{style:t,d:"M274.09,87.67a52.51,52.51,0,0,0-74.16-74.16l0,0L24,189.31l-5.21,5.21-.43.43,0,0a8,8,0,0,0-1.76,3.58L.16,278.44a8,8,0,0,0,2.17,7.26l0,0a8,8,0,0,0,7.29,2.14L89.1,270.93a7.94,7.94,0,0,0,3.53-1.75l0,0,.43-.43,5.21-5.21L274.14,87.71Zm-13.2-61a36.45,36.45,0,0,1,1.89,49.65L211.24,24.82A36.45,36.45,0,0,1,260.89,26.71Zm-9.33,61L92.65,246.62,41,194.95,199.89,36ZM18.27,269.7l12.82-62.06L80,256.55Z"}))},ke=n(4);const De=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,a)=>{const i=document.getElementById("modal-container");t.resolve=e=>{o.a.unmountComponentAtNode(i),n(e)},t.reject=e=>{o.a.unmountComponentAtNode(i),a(e)},o.a.render(s.a.createElement(e,t),i)}))};var Ne=e=>{const{t:t}=Object(h.c)(),{title:n,translateText:a,textMessage:i,textMessageTransProps:o,textYes:l,textNo:r,textCancel:c,resolve:u}=e;return s.a.createElement(d.a,{isOpen:!0,overlayClassName:"neditor-modal-overlay",className:"neditor-modal-content",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,closeTimeoutMS:150},s.a.createElement("span",{style:Le.question},a?t(n):n),a?o?s.a.createElement("p",null,t(i,o)):s.a.createElement("p",null,s.a.createElement(h.a,{i18nKey:i})):s.a.createElement("p",null,i),s.a.createElement("div",{className:"buttons",style:Le.buttons},s.a.createElement("button",{style:Object.assign({},Le.button,{fontWeight:"normal"}),onClick:()=>u(1)},r),s.a.createElement("div",null,c&&s.a.createElement("button",{style:Object.assign({},Le.button,{fontWeight:"normal"}),onClick:()=>u(2)},c),s.a.createElement("button",{style:Le.button,onClick:()=>u(0)},l))))};const Le={question:{fontWeight:"bold",marginBottom:"0.5rem"},buttons:{width:"100%",justifyContent:"space-between"},button:{fontSize:"0.8rem"}};var Te=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 114.2 105.6",width:15,height:15},e),s.a.createElement("path",{style:t,d:"M97.7,3.9a5,5,0,0,0-7.3,6.9A50.54,50.54,0,0,1,104.3,46c0,27.4-21.1,49.6-47.1,49.6S10.1,73.3,10.1,46A50.54,50.54,0,0,1,24,10.8a5,5,0,1,0-7.3-6.9A60.91,60.91,0,0,0,0,46c0,32.9,25.6,59.6,57.1,59.6S114.2,78.9,114.2,46A59.41,59.41,0,0,0,97.7,3.9Z"}),s.a.createElement("path",{style:t,d:"M30.7,38.6a4.69,4.69,0,0,0,3.5-1.5L52.1,19.2V70.4a5,5,0,0,0,10,0V19.1L80,37a5,5,0,1,0,7.1-7.1L57.2,0,53.9,3.3c-.2.1-.3.3-.5.5L27.2,30a5,5,0,0,0,0,7.1A4.85,4.85,0,0,0,30.7,38.6Z"}))};const Be=Object(F.a)((e=>e.bu.entities.present.byIds),((e,t)=>t),((e,t)=>t&&e[t]?Object(N.J)(e[t].present):[])),Ae=Object(F.a)((e=>e.bu.entities.present.byIds),((e,t)=>t),((e,t)=>t&&e[t]?Object(N.I)(e[t].present,t,!0):[]));var Re=s.a.memo((e=>{const[t]=Object(a.useState)(!0),[n,o]=Object(a.useState)(1),[l,r]=Object(a.useState)(!1),{loading:c,buID:p,procID:m}=e,b=s.a.createRef(),[y]=Object(h.c)(),f=Object(u.c)(),E=Object(u.e)().getState,v=Object(u.d)(D.i),x=Object(u.d)((e=>e.bu.entities.present.byIds[p]&&e.bu.entities.present.byIds[p].present.name)),I=Object(u.d)((e=>Object(D.e)(e,p))),w=Object(u.d)((e=>Be(e,p))),S=Object(u.d)((e=>Ae(e,p))),j=Object(u.d)((e=>Object(N.T)(e,p)));Object(a.useEffect)((()=>(Object(i.findDOMNode)(document.getElementById("bu-canvas")).focus(),document.activeCanvas="bu-canvas",l?document.addEventListener("click",M,!1):document.removeEventListener("click",M,!1),()=>{document.removeEventListener("click",M,!1),document.activeCanvas="bu-canvas"}))),Object(g.a)(T.K,(e=>k(e.detail)),document.body),Object(g.a)(T.H,(()=>t&&document.dispatchEvent(new Event(T.I))),document),Object(g.a)(T.e,(e=>Object(N.B)(p,e.detail)(f,E)),document),Object(g.a)(T.f,(()=>Object(N.C)(p)(f,E)),document),Object(g.a)(T.C,(e=>Object(N.Q)(p,e.detail?{x:(e.detail.x-document.getElementById("bu-canvas").getBoundingClientRect().x)/n,y:(e.detail.y-document.getElementById("bu-canvas").getBoundingClientRect().y)/n}:null)(f,E)),document),Object(g.a)(T.d,(()=>Object(N.A)(p,I)(f)),document);const C=Object(a.useCallback)((e=>{const t=document.getElementById("bu-canvas").getBoundingClientRect(),a=t.width-T.M*n-24,s=t.height-T.L*n-24,i=e?e.clientX-t.x-T.M*n/2:Math.floor(P()()*(a-24+1))+24,o=e?e.clientY-t.y-T.L*n/2:Math.floor(P()()*(s-24+1))+24;Object(N.w)(p,i/n,o/n)(f)}),[p,f,n]),k=Object(a.useCallback)((e=>{if("bu-canvas"!==document.activeCanvas)return;const t=w.filter((t=>{const n=document.getElementById("bu-canvas").parentNode.getBoundingClientRect(),a=document.getElementById("bu-state-node-"+t).firstChild.getBoundingClientRect(),s={left:a.left-n.left,top:a.top-n.top,right:a.left-n.left+a.width,bottom:a.top-n.top+a.height};return Object(L.h)(e,s)}));document.body.dispatchEvent(new CustomEvent(T.J,{detail:t}))}),[w]),A=Object(a.useCallback)((()=>j.forEach((e=>Object(N.F)(p,e,!0)(f)))),[p,f,j]),R=Object(a.useCallback)((()=>j.forEach((e=>Object(N.z)(p,e)(f)))),[p,f,j]),F=Object(a.useCallback)((e=>o(e)),[]),U=Object(a.useCallback)((async()=>{if(E().bu.entities.present.byIds[p].index>0){const e=await De(Ne,{title:y("saveChangesConfirm",{filename:x}),textMessage:y("saveChangesLost"),textYes:y("Save"),textNo:y("Don't save"),textCancel:y("Cancel")});0===e?Object(ke.nb)(m)(f):1===e&&(f({type:N.c,payload:{buID:p},index:0}),Object(ke.nb)(m)(f))}else Object(ke.nb)(m)(f)}),[p,f,E,x,m,y]),$=Object(a.useCallback)((()=>{const e=b.current.value;e!==x&&Object(N.U)(p,e)(f),r(!1)}),[p,x,f,b]),_=Object(a.useCallback)((()=>r(!0)),[]),M=Object(a.useCallback)((e=>b.current!==e.target&&$()),[$,b]),V=Object(a.useCallback)((e=>Object(N.X)(p,e.detail.offset)(f,E)),[f,E,p]);Object(g.a)("bu-state-node-drag",V,document.body);const q=Object(L.b)(w.map((e=>({id:e,linksIn:0,linksOut:0}))),"id");return s.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},s.a.createElement(O.b,{id:"bu-canvas-context",holdToDisplay:-1},s.a.createElement(Ie,{onScaleUpdate:F,canvasID:"bu-canvas",tabIndex:"0"},S.map((e=>{if(!q[e.source]||!q[e.destination])return null;q[`${e.source}-${e.destination}`]=q[`${e.source}-${e.destination}`]||0,++q[e.source].linksOut,++q[e.destination].linksIn,++q[`${e.source}-${e.destination}`];const t=`link-${e.source}-${e.destination}-${q[`${e.source}-${e.destination}`]}`;return s.a.createElement(de,{buID:p,startNodeWidth:T.M,sourceID:e.source,destID:e.destination,color:e.color,sourceActionID:e.buAction,outCount:q[e.source].linksOut,inCount:q[e.destination].linksIn,key:t,id:t})})),w.map(((e,t)=>s.a.createElement(ee,{linksIn:1,buID:p,buStateID:e,scale:n,index:t,id:e,key:e}))))),l?s.a.createElement("input",{ref:b,type:"text",defaultValue:x,style:Object.assign({},Pe.canvasTitle,{color:"#FFF"}),onKeyDown:Object(L.j)($)}):s.a.createElement("span",{style:Pe.canvasTitle,onClick:_},s.a.createElement("span",{style:{cursor:"text"}},x),s.a.createElement(Ce,{style:{marginLeft:5,cursor:"pointer"}})),s.a.createElement(_e,{className:"noselect",onClick:()=>C(null),label:y("Add State"),icon:s.a.createElement(se,{style:{color:T.i.LIGHT_GREY},width:10,height:10})}),m?s.a.createElement(Ue,{onClick:()=>Li(p,T.r.BU),icon:s.a.createElement(Te,{style:{color:T.i.LIGHT_GREY}})}):s.a.createElement(Ue,{onClick:()=>Ni(p,T.r.BU),icon:s.a.createElement(oe,{style:{color:T.i.LIGHT_GREY}})}),s.a.createElement($e,{onClick:()=>Object(B.h)(p,T.r.BU),icon:s.a.createElement(ie,{style:{color:T.i.LIGHT_GREY}})}),m&&s.a.createElement(Me,{className:"noselect",onClick:U,label:y("Back to process"),icon:s.a.createElement(je,{style:{color:T.i.WHITE},width:10,height:10})}),c&&s.a.createElement(Fe,null),s.a.createElement(O.a,{id:"bu-canvas-context",className:"bu-canvas-context"},s.a.createElement(O.c,{onClick:C},"+ ",y("Add State")),s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:()=>{const{x:e,y:t}=document.querySelector(".bu-canvas-context").getBoundingClientRect();Object(T.p)({x:e,y:t})},disabled:!v},y("Paste State(s)"))),s.a.createElement(d.a,{isOpen:j.length>0,overlayClassName:"neditor-modal-overlay",className:"neditor-modal-content",shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,closeTimeoutMS:150,onRequestClose:R},s.a.createElement("h6",null,y("deleteStateConfirmTitle",{count:j.length})),s.a.createElement(h.a,{i18nKey:"deleteStateConfirm",count:j.length},s.a.createElement("p",null,"You are about to delete a state that is linked to other states.",s.a.createElement("br",null),"You will not be able to export the State Machine until all the links are fixed.")),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{onClick:A},y("Yes")),s.a.createElement("button",{onClick:R},y("No")))))}));const Pe={canvasTitle:{fontFamily:"Lato",position:"absolute",top:10,textAlign:"center",display:"flex",alignItems:"center",left:"50%",transform:"translateX(-50%)",fontSize:18,color:"#535353",zIndex:100}},Fe=y.b.div`
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.2);
  z-index: 9999;
`,Ue=Object(y.b)(te)`
  position: absolute;
  top: 22px;
  right: 22px;
`,$e=Object(y.b)(te)`
  position: absolute;
  top: 22px;
  right: 60px;
`,_e=Object(y.b)(te)`
  position: absolute;
  bottom: 22px;
  right: 22px;
`,Me=Object(y.b)(te)`
  position: absolute;
  top: 22px;
  left: 22px;
`,Ve=document.dispatchEvent.bind(document,new Event(T.d));var qe=n(12),Ge=n(30),Ke=n(21);const ze=window.isStandalone?window.isDev:window.require("electron-is-dev"),Ye=window.isStandalone?window.require("process"):{platform:"web"},{remote:He,ipcRenderer:We,clipboard:Ze}=window.isStandalone?window.require("electron"):{},Je=null==He?void 0:He.Menu,Xe=(e,t)=>e.attrs&&!1===e.attrs.visible?null:"separator"===e.type?s.a.createElement(O.c,{key:"menubar-item-"+t,divider:!0}):e.submenu?s.a.createElement(O.d,{key:"menubar-item-"+t,title:e.label,hoverDelay:250},e.submenu.filter((e=>!1!==e.visible)).map(Xe)):s.a.createElement(O.c,{attributes:e.attrs,key:"menubar-item-"+t,disabled:!1===e.enabled||e.attrs&&e.attrs.disabled,onClick:e.click},s.a.createElement("span",null,e.label),s.a.createElement("span",null,e.shortcut&&e.shortcut.replace("Ctrl","Ctrl").replace("Delete","Del").replace("PageUp","PgUp").replace("PageDown","PgDn"))),Qe=e=>{e.submenu?e.submenu.forEach(Qe):e.shortcut&&e.click&&!1!==e.enabled&&(k.a.unbind(e.shortcut.toLowerCase()),k.a.bind(e.shortcut.toLowerCase(),e.click))},et=Object(F.a)((e=>e.file),(e=>e.recentFiles)),tt=Object(Ke.a)((e=>e),((e,t)=>t),((e,t)=>t===T.r.BU?Object(D.i)(e):Object(Ge.d)(e))),nt=Object(F.a)((e=>e),((e,t)=>{let{editingType:n,editingID:a,fileID:s}=t;return{editingType:n,editingID:a,fileID:s}}),((e,t)=>{let{editingType:n,editingID:a,fileID:s}=t;return n===T.r.BU?Object(N.O)(e,a):n===T.r.PROCESS&&Object(ke.U)(e,s)}));var at=s.a.memo((()=>{const[e,t]=Object(a.useState)(null),n=[],i=Object(u.c)(),o=Object(u.d)(qe.r),l=Object(u.d)((e=>e.file.currentFile)),r=Object(u.d)((e=>o===T.r.PROCESS?e.process.entities.byIds[l]&&e.process.entities.byIds[l].present.editBU:e.file.currentFile)),c=o===T.r.PROCESS&&r&&r!==l?T.r.BU:o,d=Object(u.d)((e=>e.file.files)),p=Object(u.d)(et),m=Object(u.d)((e=>Object(D.e)(e,l))),y=Object(u.d)((e=>tt(e,c))),g=Object(u.d)((e=>nt(e,{editingType:c,editingID:r,fileID:l}))),[f]=Object(h.c)(),E={label:f("View"),submenu:[{label:f("Previous Tab"),shortcut:"Ctrl+Shift+Tab",enabled:d.length>1,click:()=>Bi(!0)},{label:f("Next Tab"),shortcut:"Ctrl+Tab",enabled:d.length>1,click:()=>Bi(!1)},{type:"separator"},{label:f("Zoom In"),shortcut:"Ctrl+PageUp",click:()=>Se(!1)},{label:f("Zoom Out"),shortcut:"Ctrl+PageDown",click:()=>Se(!0)},{label:f("Reset Zoom"),shortcut:"Ctrl+0",click:()=>Se(!1,!0)}]},v=[{label:f("File"),submenu:[{label:f("New"),submenu:[{label:f("Process"),shortcut:"Ctrl+N",click(){window.isStandalone?We.send("new-file",T.r.PROCESS):document.dispatchEvent(new CustomEvent("new-file",{detail:{filetype:T.r.PROCESS}}))}},{label:f("State Machine"),click(){window.isStandalone?We.send("new-file",T.r.BU):document.dispatchEvent(new CustomEvent("new-file",{detail:{filetype:T.r.BU}}))}}]},{label:f("Open"),shortcut:"Ctrl+O",click(){window.isStandalone?We.send("open-file"):document.dispatchEvent(new Event("open-file"))}},{label:f("Open Recent"),submenu:p&&p.length>0?p.slice(0,9).map((e=>({label:e.path,click(){window.isStandalone?We.send("open-editor",e.path):document.dispatchEvent(new CustomEvent("open-editor",{detail:e.path}))}}))):null,enabled:p&&p.length>0},{label:"",enabled:!0,attrs:{visible:!1},shortcut:"Ctrl+Shift+T",click:B.g},{type:"separator"},{label:f("Save"),shortcut:"Ctrl+S",click:Ci,enabled:!!l},{label:f("Save As"),shortcut:"Ctrl+Shift+S",click:ki,enabled:!!l},{label:f("Save All"),shortcut:"Ctrl+Alt+S",click:Di},{type:"separator"},{label:c===T.r.PROCESS?f("Import Process"):f("Import State Machine"),shortcut:"Ctrl+I",click:()=>Ni(r,c),enabled:o===T.r.PROCESS&&(c===T.r.BU||"win32"===Ye.platform)||o===T.r.BU},{label:c===T.r.PROCESS?f("Export Process"):f("Export State Machine"),shortcut:"Ctrl+E",click:()=>Li(r,c),enabled:o===T.r.PROCESS&&!!l&&(c===T.r.BU||"win32"===Ye.platform)},{type:"separator"},{label:f("Close File"),shortcut:"Ctrl+W",click:()=>Ti(d.find((e=>e.id===l))),enabled:!!l},{type:"separator"},{label:f("Quit Editor"),shortcut:"Ctrl+Q",click:()=>window.isStandalone&&We.send("close-editor"),enabled:window.isStandalone},{label:f("Quit Editor"),shortcut:"Alt+F4",click:()=>window.isStandalone&&We.send("close-editor"),attrs:{visible:!1},enabled:window.isStandalone}]},{label:f("Edit"),submenu:[{role:"copy",attrs:{visible:!1}},{role:"cut",attrs:{visible:!1}},{role:"paste",attrs:{visible:!1}},{role:"redo",attrs:{visible:!1}},{role:"undo",attrs:{visible:!1}},{label:f("Undo"),shortcut:"Ctrl+Z",click:()=>{Object(L.i)()?document.execCommand("undo"):b.a.dispatch({type:c===T.r.PROCESS?ke.u:N.r,payload:c===T.r.PROCESS?{procID:r}:{buID:r}})}},{label:f("Redo"),shortcut:"Ctrl+Y",click:()=>{Object(L.i)()?document.execCommand("redo"):b.a.dispatch({type:c===T.r.PROCESS?ke.q:N.p,payload:c===T.r.PROCESS?{procID:r}:{buID:r}})}},{type:"separator"},{label:f("Cut"),shortcut:"Ctrl+X",attrs:{disabled:!(g||Object(L.i)())},click:()=>{if(Object(L.i)()){const e=window.getSelection().toString();e&&e.length>0&&(Ze&&Ze.writeText(e),document.execCommand("delete"))}else Object(T.m)(),Object(T.o)()}},{label:f("Copy"),shortcut:"Ctrl+C",attrs:{disabled:!(g||Object(L.i)())},click:()=>{const e=window.getSelection().toString();e&&e.length>0?Ze&&Ze.writeText(e):!Object(L.i)()&&g&&Object(T.m)()}},{label:f("Paste"),shortcut:"Ctrl+V",attrs:{disabled:!y},click:()=>{Object(L.i)()?document.execCommand("paste"):y&&Object(T.p)()}},{label:g?c===T.r.BU?f("Delete State"):f("Delete Node"):f("Delete"),shortcut:"Del",enabled:g,click:()=>{Object(L.i)()?document.execCommand("delete"):Object(T.o)()}},{label:f("Select All"),shortcut:"Ctrl+A",click:()=>{Object(L.i)()?document.activeElement.select():ji()}}]},E,{label:f("Help"),attrs:{help:!0},submenu:[{label:f("Keyboard Shortcuts"),click:()=>Object(A.c)("shortcuts")(i)},{label:f("Tutorial"),click:()=>We.send("open-tuto"),visible:!1},{label:f("User Manual"),click:()=>null},{type:"separator"},{label:f("Release Notes"),click:()=>Object(A.c)("release-notes")(i)},{label:f("Check for Updates"),click:()=>We.send("check-for-updates"),enabled:window.isStandalone},{type:"separator"},{label:f("About"),click:()=>Object(A.c)("about")(i)}]}];if(m&&(E.submenu=[...E.submenu,{type:"separator"},{label:f("Close State"),click:Ve}]),ze){let{submenu:e}=v.find((e=>e.label===f("View")));e=[...e,{type:"separator"},{role:"reload",label:"Reload",shortcut:"Ctrl+R"}],v.find((e=>e.label===f("View"))).submenu=e}return v.forEach(Qe),window.isStandalone&&Je.setApplicationMenu(Je.buildFromTemplate(v)),s.a.createElement(st,null,v.map(((i,o)=>(n[o]=Object(a.createRef)(),s.a.createElement(s.a.Fragment,{key:o},s.a.createElement(it,{id:"menubar-section-"+o,className:"menubar-section"},s.a.createElement(O.a,{key:"menubar-section-"+o,id:"menubar-section-"+o,className:j()("menubar",{hidden:e!==o}),onShow:()=>t(o),onHide:()=>t(null)},i.submenu.filter((e=>!1!==e.visible)).map(Xe))),s.a.createElement(O.b,{ref:e=>n[o]=e,holdToDisplay:0,key:"menubar-trigger-section-"+o,id:"menubar-section-"+o,renderTag:"span"},s.a.createElement(ot,{opened:e===o,onMouseEnter:t=>null!==e&&e!==o&&n[o].handleContextClick(t)},i.label)))))))}));const st=y.b.div`
  -webkit-app-region: no-drag;
  display: flex;
  overflow: visible;
  padding-left: 20px;
  height: 100%;

  & .react-contextmenu-item {
    min-width: 200px;
  }

  & .menubar-section:last-of-type .react-contextmenu-item {
    min-width: 170px;
  }
`,it=y.b.div`
  position: relative;
  overflow: visible;

  & > nav {
    position: absolute !important;
    left: 0 !important;
    top: 100% !important;
    margin: 0;
    border-radius: 2px;
  }
`,ot=y.b.span`
  display: inline-flex;
  height: 100%;
  min-width: 62px;
  opacity: 0.3;
  color: #FFF;
  font-family: Lato;
  font-size: 13px;
  /* font-weight: 900; */
  text-align: center;
  justify-content: center;
  align-items: center;

  :hover {
    background-color: #333536;
    opacity: 0.75;
  }

  ${e=>e.opened&&y.a`
    background-color: #333536;
    opacity: 0.75;
  `}
`;var lt=e=>{let{style:t}=e;return t||(t={}),t={...t,width:t.width||e.width||24,height:t.height||e.height||24},s.a.createElement("svg",Object.assign({},e,{style:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 625 625",width:"512",height:"512"}),s.a.createElement("path",{style:{fill:"#575959"},d:"m157.5 27.7c-6.4 1.2-16.2 3.7-21.6 5.5-5.5 1.9-14.1 5.4-19.1 8-5.1 2.5-12.4 6.7-16.2 9.2-3.8 2.6-8.9 6.3-11.5 8.4-2.5 2-7.8 6.8-11.8 10.6-3.9 3.9-9.8 10.1-13 13.9-3.2 3.8-8.1 10.5-10.9 14.8-2.8 4.3-6.8 11.3-8.9 15.6-2.2 4.3-5.6 12.6-7.5 18.5-1.9 5.8-4.5 15.7-5.6 22.1-2.1 11.4-2.1 11.8-2.1 101.7v311.4c4 8.5 6.7 12.6 8.5 14.6 1.9 1.9 5.3 4.4 7.6 5.6 2.3 1.2 6.4 2.7 9.2 3.3 4.2 1 6 1.1 10.6 0.1 3-0.7 7.1-2 9-3 1.9-0.9 5.1-3.3 7.2-5.2 2-1.9 4.8-5.7 6.2-8.5l2.5-5.1c1-181.1 1-402.5 3-410.3 1.2-4.3 4-11.8 6.3-16.6 2.3-4.8 6.1-11.5 8.4-14.8 2.4-3.2 7.7-9.3 11.7-13.3 4.1-4.1 10.3-9.3 13.9-11.6 3.5-2.4 8.5-5.4 11-6.6 2.5-1.3 7.9-3.4 12-4.7 4-1.3 10-2.8 13.3-3.3 3.3-0.5 11-1 17.1-1 7.1 0 13.9 0.6 19.3 1.8 4.6 0.9 11.4 2.9 15.2 4.4 3.8 1.6 9.2 4.1 12 5.8 2.8 1.6 7.3 4.8 10.1 6.9 2.8 2.2 8 7 11.6 10.7 3.6 3.8 8.2 9.3 10.2 12.3 2.1 3.1 5 8 6.5 11.1 1.5 3 3.7 8.2 4.7 11.5 1.1 3.3 2.5 7.9 3.1 10.1 0.8 3.1 1.2 28 1.6 94.9l0.5 90.7c3.3 6.8 6.2 10.9 8.6 13.5 2.6 2.7 6.6 5.7 9.9 7.3 4.5 2.2 6.7 2.7 12.2 2.7 5.6 0 7.5-0.4 12.2-2.7 3-1.6 7-4.2 8.8-5.8 1.8-1.6 4.6-5.7 6.2-9l2.9-5.9c0.6-163.2 0.4-175.5-0.9-184.7-0.8-5.9-2.1-13.3-2.8-16.6-0.8-3.3-2.6-10-4.2-14.8-1.6-4.8-4.9-12.9-7.5-17.9-2.5-5.1-6.7-12.6-9.4-16.6-2.6-4.1-7.9-11.1-11.7-15.7-3.8-4.5-9.9-11.1-13.7-14.5-3.8-3.4-10.2-8.7-14.2-11.7-4.1-3-11.3-7.7-16.2-10.4-4.8-2.6-12-6.1-16.1-7.8-4-1.6-11.1-4-15.6-5.2-4.6-1.3-11.8-3.1-16.2-3.9-5.2-1-13.9-1.6-26.2-1.8-16.3-0.2-19.8 0-30.2 2z"}),s.a.createElement("path",{style:{fill:"#575959"},d:"m466.4 596.7c6.4-1.2 16.2-3.7 21.6-5.6 5.5-1.8 14.1-5.4 19.1-7.9 5.1-2.6 12.4-6.7 16.2-9.2 3.8-2.6 8.9-6.3 11.5-8.4 2.5-2 7.8-6.8 11.8-10.7 4-3.8 9.8-10.1 13-13.9 3.2-3.8 8.1-10.4 10.9-14.7 2.8-4.3 6.8-11.4 9-15.7 2.1-4.3 5.5-12.6 7.4-18.4 2-5.8 4.5-15.8 5.6-22.1 2.1-11.5 2.1-11.8 2.1-101.8v-311.3c-4-8.6-6.7-12.7-8.5-14.6-1.9-1.9-5.3-4.5-7.6-5.6-2.3-1.2-6.4-2.7-9.2-3.4-4.2-1-6-1-10.6 0-3 0.7-7.1 2-9 3-1.9 0.9-5.1 3.3-7.2 5.2-2 1.9-4.8 5.7-6.2 8.5l-2.5 5c-1 181.2-1 402.6-3 410.4-1.2 4.3-4 11.8-6.3 16.6-2.3 4.8-6.1 11.4-8.4 14.7-2.4 3.3-7.7 9.3-11.7 13.4-4.1 4-10.3 9.3-13.9 11.6-3.5 2.4-8.5 5.3-11 6.6-2.5 1.3-7.9 3.4-12 4.7-4 1.3-10 2.8-13.3 3.3-3.3 0.5-11 0.9-17.1 0.9-7.1 0-13.9-0.6-19.3-1.7-4.6-0.9-11.4-2.9-15.2-4.5-3.8-1.5-9.2-4.1-12-5.7-2.8-1.7-7.3-4.8-10.1-6.9-2.8-2.2-8-7-11.6-10.8-3.6-3.7-8.2-9.2-10.2-12.3-2.1-3-5-8-6.5-11-1.5-3.1-3.7-8.2-4.7-11.5-1.1-3.3-2.5-7.9-3.1-10.2-0.8-3-1.2-27.9-1.6-94.8l-0.5-90.8c-3.3-6.7-6.2-10.8-8.6-13.4-2.6-2.8-6.6-5.8-9.9-7.3-4.5-2.2-6.7-2.7-12.2-2.7-5.6 0-7.5 0.4-12.2 2.7-3 1.5-7 4.1-8.8 5.8-1.8 1.6-4.6 5.6-6.2 8.9l-2.9 6c-0.6 163.2-0.4 175.5 0.9 184.7 0.8 5.8 2.1 13.3 2.8 16.6 0.8 3.3 2.6 9.9 4.2 14.7 1.6 4.9 5 12.9 7.5 18 2.5 5.1 6.7 12.5 9.4 16.6 2.6 4 7.9 11.1 11.7 15.6 3.8 4.6 9.9 11.1 13.7 14.6 3.8 3.4 10.2 8.7 14.2 11.7 4.1 3 11.3 7.7 16.2 10.3 4.8 2.7 12 6.2 16.1 7.8 4 1.7 11.1 4 15.6 5.3 4.6 1.3 11.9 3 16.2 3.9 5.2 1 13.9 1.6 26.2 1.8 16.3 0.2 19.8 0 30.2-2z"}),s.a.createElement("path",{style:{fill:"#3cad60"},d:"m262.7 143.2c3.1-5.6 6.2-11.2 10.8-15.9q1.9-2 4.1-3.8 2.2-1.8 4.5-3.4 2.4-1.6 4.9-2.9 2.5-1.3 5.1-2.4c0.9-0.3 1.9-0.6 2.5-1.5 1.2 0.4 2.3-0.2 3.5-0.5 7.1-1.9 14.5-2.3 21.8-1.1 7.3 1.1 14.3 3.8 20.5 7.8 6.2 4 11.4 9.3 15.5 15.4 4 6.2 6.6 13.2 7.8 20.5 4.2 25.7-13.5 51.6-39.5 57.7-29.8 6.9-58.4-11.5-64.2-41.3-1.7-8.5-0.9-16.9 1.8-25.1 0.3-1.2 0.6-2.3 0.9-3.5z"}),s.a.createElement("path",{style:{fill:"#f8bb12"},d:"m361.5 466c-3.8 9.6-9.4 17.8-17.7 24.1q-1.5 1.1-3 2.1-1.6 1-3.2 1.9-1.5 0.9-3.2 1.7-1.6 0.8-3.3 1.5c-14.1 5-28.1 4.9-41.8-1.4-20.7-9.7-32.1-30.6-29.9-51.4 2.7-24 19.9-42.3 42.6-46.2 28.5-4.8 54.6 12.2 61 39.7 2.1 9.5 1.3 18.8-1.5 28z"}),s.a.createElement("path",{style:{fill:"#e8453a"},d:"m42.9 618.9c-11.2-4.4-20.5-11.2-27-21.5-1.7-2.7-3.1-5.7-4.6-8.6-2.3-7.3-4-14.7-3.2-22.6 2.1-23.7 18.6-42.1 42.1-46.9 6.7-1.4 13.7-1.4 20.4-0.1 6.8 1.3 13.2 4 19 7.8 5.7 3.8 10.6 8.7 14.5 14.4 3.8 5.7 6.5 12.2 7.8 18.9 5.6 27.6-13.2 55.1-41 60.4-9.5 1.7-18.8 0.9-28-1.8z"}),s.a.createElement("path",{style:{fill:"#3f56a3"},d:"m583.3 5.9c0.6 1.2 1.9 1.4 2.9 1.9 12.1 5.9 20.9 14.9 26.1 27.4 0.3 0.8 0.5 1.8 1.6 1.9-0.9 1-0.1 2 0.1 2.8 9.1 32.2-13 63.6-46.4 66.1-26.8 2-50.4-15.8-55.6-42-5.3-27.1 12.8-54.2 40.1-59.9q3.5-0.8 7.1-1.1 3.5-0.3 7.1-0.1 3.6 0.2 7.2 0.8 3.5 0.7 6.9 1.8c0.9 0.3 1.8 0.8 2.9 0.4z"}))},rt=e=>s.a.createElement("h5",{style:{...e.style,display:"flex",alignItems:"center"}},s.a.createElement(lt,{width:"28",height:"28",style:{marginRight:"1.2rem"}}),s.a.createElement("span",{style:{color:"#c8c8c8"}},"N"),s.a.createElement("span",{style:{color:"#575959"}},"Editor"));const{remote:ct,ipcRenderer:dt}=window.isStandalone?window.require("electron"):{},ut=null==ct?void 0:ct.getCurrentWindow();var pt=()=>{const[e,t]=Object(a.useState)(window.isStandalone&&ut.isMaximized()),n=Object(a.useCallback)((()=>dt.send("close-editor")),[]);return Object(g.a)("resize",(()=>t(null==ut?void 0:ut.isMaximized())),window),s.a.createElement(mt,{className:"noselect"},s.a.createElement(rt,null),s.a.createElement(at,null),window.isStandalone&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{flex:1,height:"100%"},onDoubleClick:()=>dt.send("expand-window")}),"}",s.a.createElement(bt,null,s.a.createElement(ht,{key:"minimize",onClick:()=>dt.send("minimize-window")},s.a.createElement(I,{style:{width:11,height:1}})),s.a.createElement(ht,{key:"expand",onClick:()=>dt.send("toggle-expand-window")},e?s.a.createElement(w,null):s.a.createElement(x,null)),s.a.createElement(yt,{key:"close",onClick:n},s.a.createElement(v,{style:{width:10,height:10}})))))};const mt=y.b.header`
  -webkit-app-region: drag;
  width: 100vw;
  height: 48px;
  background-color: #2b2c2d;
  position: relative;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: stretch;
  z-index: 99999;
  padding-left: 1.2rem;
`,bt=y.b.div`
  display: flex;
  position: fixed;
  top: 0;
  right: 0;
  height: 48px;
  align-items: center;
  justify-content: flex-end;
  -webkit-app-region: no-drag;
`,ht=y.b.span`
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding-left: 24px;
  padding-right: 24px;

  :hover {
    background-color: #1B1C1C;
  }

  :active {
    background-color: #0A0B0B;
  }
`,yt=Object(y.b)(ht)`
  :hover {
    background-color: #c75050;
  }

  :active {
    background-color: #a53030;
  }
`;var gt=n(55),ft=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 160 140",width:20,height:20},e),s.a.createElement("path",{style:t,d:"m140.5,85.5l-6,0l0,-11.1c0,-7.9 -6.5,-14.4 -14.6,-14.4l-37.9,0l0,-12l5,0c7.5,0 13.5,-6 13.5,-13.5l0,-21c0,-7.4 -6.1,-13.5 -13.5,-13.5l-21,0c-7.4,0 -13.5,6.1 -13.5,13.5l0,21c0,7.5 6.1,13.5 13.5,13.5l6,0l0,12l-38.9,0c-8,0 -14.6,6.4 -14.6,14.4l0,11.1l-5,0c-7.4,0 -13.5,6.1 -13.5,13.5l0,21c0,7.4 6.1,13.5 13.5,13.5l21,0c7.4,0 13.5,-6.1 13.5,-13.5l0,-21c0,-7.4 -6.1,-13.5 -13.5,-13.5l-6,0l0,-11.1c0,-2.4 2,-4.4 4.6,-4.4l38.9,0l0,15.5l-5.5,0c-7.4,0 -13.5,6.1 -13.5,13.5l0,21c0,7.4 6.1,13.5 13.5,13.5l21,0c7.4,0 13.5,-6.1 13.5,-13.5l0,-21c0,-7.4 -6.1,-13.5 -13.5,-13.5l-5.5,0l0,-15.5l37.9,0c2.5,0 4.6,2 4.6,4.4l0,11.1l-5,0c-7.4,0 -13.5,6.1 -13.5,13.5l0,21c0,7.4 6.1,13.5 13.5,13.5l21,0c7.4,0 13.5,-6.1 13.5,-13.5l0,-21c0,-7.4 -6,-13.5 -13.5,-13.5zm-78,-51l0,-21c0,-1.9 1.6,-3.5 3.5,-3.5l21,0c1.9,0 3.5,1.6 3.5,3.5l0,21c0,1.9 -1.6,3.5 -3.5,3.5l-21,0c-1.9,0 -3.5,-1.5 -3.5,-3.5zm-24.5,64.5l0,21c0,1.9 -1.6,3.5 -3.5,3.5l-21,0c-1.9,0 -3.5,-1.6 -3.5,-3.5l0,-21c0,-1.9 1.6,-3.5 3.5,-3.5l21,0c2,0 3.5,1.6 3.5,3.5zm53,0l0,21c0,1.9 -1.6,3.5 -3.5,3.5l-21,0c-1.9,0 -3.5,-1.6 -3.5,-3.5l0,-21c0,-1.9 1.6,-3.5 3.5,-3.5l21,0c2,0 3.5,1.6 3.5,3.5zm53,21c0,1.9 -1.6,3.5 -3.5,3.5l-21,0c-1.9,0 -3.5,-1.6 -3.5,-3.5l0,-21c0,-1.9 1.6,-3.5 3.5,-3.5l21,0c1.9,0 3.5,1.6 3.5,3.5l0,21z"}))},Et=e=>{const t={fill:"none",stroke:e.style&&e.style.color||"#5C5D5E",strokeWidth:10,strokeMiterlimit:10},n={fill:"none",stroke:e.style&&e.style.color||"#5C5D5E",strokeWidth:5,strokeMiterlimit:10};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 178.33 171.34",width:20,height:20},e),s.a.createElement("g",null,s.a.createElement("circle",{style:t,cx:"89.13",cy:"39.67",r:"29.33"}),s.a.createElement("circle",{style:t,cx:"29.29",cy:"114.75",r:"22"}),s.a.createElement("circle",{style:t,cx:"149.04",cy:"114.25",r:"22"}),s.a.createElement("circle",{style:t,cx:"89.46",cy:"139",r:"22"}),s.a.createElement("line",{style:n,x1:"44.04",y1:"96.34",x2:"71.13",y2:"62.67"}),s.a.createElement("line",{style:n,x1:"134.79",y1:"97.09",x2:"107.46",y2:"62.67"}),s.a.createElement("line",{style:n,x1:"89.13",y1:"117.34",x2:"89.13",y2:"69"})))};const{ipcRenderer:vt}=window.isStandalone?window.require("electron"):{};let xt=null;var It=e=>{const{closeTab:t}=e,[n,o]=Object(a.useState)(1),[l,r]=Object(a.useState)(0),c=Object(u.c)(),d=Object(u.d)((e=>e.file.files)),p=Object(u.d)((e=>e.file.currentFile)),m=Object(a.useCallback)((()=>window.isStandalone?vt.send("new-file"):document.dispatchEvent(new Event("new-file"))),[]),b=Object(a.useCallback)((e=>e.source&&e.destination&&Object(qe.q)(e.draggableId,e.destination.index)(c)),[c]),h=Object(a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const t=document.getElementById("editor-tabs");o(t.getBoundingClientRect().width/t.scrollWidth),e>=0&&r(e)}),[]),y=Object(a.useCallback)((e=>{const t=document.getElementById("editor-tabs");t.scrollBy({left:e.deltaY,behavior:"smooth"});const n=Object(L.g)(Object(L.f)(t.scrollLeft+e.deltaY,0),t.scrollWidth-t.clientWidth);h(100*n/t.scrollWidth)}),[h]);return Object(a.useEffect)((()=>document.getElementById("editor-tabs")&&h())),s.a.createElement(jt,null,s.a.createElement(gt.a,{onDragEnd:b},s.a.createElement(gt.c,{droppableId:E()(),direction:"horizontal"},((e,n)=>s.a.createElement(Ct,Object.assign({id:"editor-tabs",className:"noselect",ref:e.innerRef},e.droppableProps,{onMouseEnter:()=>h(),onWheel:y}),d.filter((e=>e.show)).map(((e,n)=>s.a.createElement(gt.b,{draggableId:e.id,index:n,key:e.id},((n,a)=>((e,t)=>"fixed"===e.position?(xt||(xt=document.getElementById("draggable")),Object(i.createPortal)(t,xt)):t)(n.draggableProps.style,s.a.createElement(St,Object.assign({className:"noselect",title:e.path,active:p===e.id||d.find((e=>e.id===p)).parent===e.id,onClick:()=>Object(qe.o)(e.id)(c),onMouseUp:n=>1===n.button?t(e):null,dragging:a.isDragging,style:n.draggableProps.style,ref:n.innerRef},n.draggableProps,n.dragHandleProps),e.hasUnsavedChanges?s.a.createElement(kt,{onClick:n=>{n.stopPropagation(),t(e)}},"•"):s.a.createElement(Lt,{onClick:n=>{n.stopPropagation(),t(e)}}),s.a.createElement(Ot,null,e.name),e.type===T.r.BU&&s.a.createElement(Nt,null),e.type===T.r.PROCESS&&("bu"===e.mode?s.a.createElement(Nt,null):s.a.createElement(Dt,null)))))))),s.a.createElement(wt,{onClick:m},s.a.createElement(se,{style:{color:"#FFF",pointerEvents:"none"}})))))),n<1&&s.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,zIndex:9e3}},s.a.createElement(Tt,{id:"editor-tabs-scrollbar"},s.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},s.a.createElement(Bt,{position:l+"%",width:100*n+"%"})))))};const wt=y.b.span`
  display: flex;
  height: 100%;
  justify-content: center;
  align-items: center;
  width: 38px;
  cursor: pointer;
  flex-shrink: 0;
`,Ot=y.b.span`
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  pointer-events: none;
`,St=y.b.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  max-width: 245px;
  height: 100%;
  padding-left: 40px;
  padding-right: 40px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border-right: 1px solid rgba(75, 77, 94, 0.2);
  background-color: ${T.i.DARK_GREY};
  font-size: 13px;
  font-weight: normal;
  font-family: Lato;
  flex-shrink: 0;

  ${e=>e.active&&y.a`
    background-color: #1B1C1C;
  `}

  ${e=>e.dragging&&y.a`
    z-index: 80;
  `}
`,jt=y.b.div`
  height: ${T.O+"px"};
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 8000;
  overflow: hidden;
  pointer-events: none;

  &:not(:hover) #editor-tabs-scrollbar {
    opacity: 0;
  }
`,Ct=y.b.div`
  display: flex;
  flex-direction: row;
  background-color: ${T.i.DARK_GREY};
  height: 100%;
  position: relative;
  top: 0;
  left: 0;
  right: 0;
  z-index: 8000;
  font-size: 13px;
  overflow: hidden;
  box-shadow: inset rgba(0, 0, 0, 0.15) 0px 5px 20px 0px;
  pointer-events: auto;
`,kt=y.b.span`
  position: absolute;
  transform-origin: center center 0px;
  top: 50%;
  transform: translate(-50%, -50%);
  left: 21px;
  font-size: 24px;
  color: rgb(255, 255, 255);
  cursor: pointer;
`,Dt=Object(y.b)(Et)`
  position: absolute;
  transform-origin: center center 0px;
  top: 50%;
  transform: translate(-50%, -50%);
  right: 4px;
  width: 18px;
  height: 18px;
  color: #FFF;
  pointer-events: none;
`,Nt=Object(y.b)(ft)`
  position: absolute;
  transform-origin: center center 0px;
  top: 50%;
  transform: translate(-50%, -50%);
  right: 4px;
  width: 18px;
  height: 18px;
  color: #FFF;
  pointer-events: none;
`,Lt=Object(y.b)(v)`
  position: absolute;
  transform-origin: center center 0px;
  top: 50%;
  transform: translate(-50%, -50%);
  left: 21px;
  width: 13px;
  height: 12px;
  color: #FFF;
  cursor: pointer;

  :hover {
    width: 14.5px;
    height: 14.5px;
    color: ${T.i.PINK};
  }
`,Tt=y.b.div`
  position: absolute;
  width: 100%;
  height: 3px;
  bottom: 0;
  pointer-events: none;
  transition: opacity 0.1s ease-in;
`,Bt=y.b.div`
  position: absolute;
  width: ${e=>e.width};
  height: 100%;
  background-color: ${T.i.LIGHT_GREY};
  opacity: 0.25;
  left: ${e=>e.position};
  transition: left 0.1s ease-in;
`;var At=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",viewBox:"0 0 19 16",width:19,height:16},e),s.a.createElement("path",{style:t,d:"M18,14H1c-0.6,0-1,0.4-1,1s0.4,1,1,1h17c0.6,0,1-0.4,1-1S18.6,14,18,14z"}),s.a.createElement("path",{style:t,d:"M18,7H1C0.4,7,0,7.4,0,8s0.4,1,1,1h17c0.6,0,1-0.4,1-1S18.6,7,18,7z"}),s.a.createElement("path",{style:t,d:"M1,2h17c0.6,0,1-0.4,1-1s-0.4-1-1-1H1C0.4,0,0,0.4,0,1S0.4,2,1,2z"}))},Rt=e=>{const t={fill:e.color||"#777777",pointerEvents:"none"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:12,height:6},e,{viewBox:"0 0 10.1 6.4"}),s.a.createElement("polygon",{style:t,points:"5.1 0 0 6.4 10.1 6.4 5.1 0"}))},Pt=s.a.memo((e=>{const{className:t,width:n,height:i,checked:o,style:l,title:r,titleOn:c,titleOff:d,iconOn:u,iconOff:p,onToggle:m}=e,b=Object(a.useCallback)((()=>m&&m(!o)),[o,m]);return s.a.createElement("span",{style:Object.assign({},{fontSize:9,borderRadius:"50%",width:n||20,height:i||20,backgroundColor:o?"#002FFF":"#1b1b1c",display:"flex",justifyContent:"center",alignItems:"center"},l),className:"option-toggle "+t,title:(o?c:d)||r||"",onClick:b},o?u:p)})),Ft=e=>{const t={fill:e.style&&e.style.color||"#777777"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 15.8 16.6",width:12,height:12},e),s.a.createElement("g",null,s.a.createElement("path",{style:t,d:"M15.6,4.2l-2.9-2.8c-0.2-0.2-0.6-0.2-0.8,0S11.8,2,12,2.2l1,1l-1.2,1.2c-1.1-0.9-2.6-1.5-4.1-1.6V1.1h1.5 c0.3,0,0.6-0.2,0.6-0.5S9.4,0,9.1,0h-4C4.8,0,4.6,0.2,4.6,0.5s0.2,0.5,0.6,0.5h1.5v2.1c0,0.1,0,0.2,0.1,0.3 c0.1,0.2,0.3,0.4,0.5,0.4c3.3,0,6.1,2.6,6.1,5.9c0,3.2-2.7,5.9-6.1,5.9s-6.1-2.6-6.1-5.9c0-1,0.2-1.9,0.7-2.8 c0.1-0.3,0-0.6-0.2-0.7S1,6.1,0.9,6.4C0.3,7.4,0,8.5,0,9.7c0,3.8,3.2,6.9,7.2,6.9s7.2-3.1,7.2-6.9c0-1.7-0.7-3.3-1.8-4.5l1.2-1.2 l1,1c0.1,0.1,0.2,0.2,0.4,0.2c0.1,0,0.3-0.1,0.4-0.2C15.8,4.7,15.8,4.4,15.6,4.2z"}),s.a.createElement("path",{style:t,d:"M6,10.8c0.3,0.3,0.7,0.4,1.1,0.4c0.4,0,0.8-0.2,1.1-0.4c0.6-0.6,0.6-1.6,0-2.2C7.8,8.2,7.2,8.1,6.6,8.3 L2.5,5.1l3.2,4C5.6,9.3,5.6,9.5,5.6,9.7C5.6,10.1,5.7,10.5,6,10.8z"})))},Ut=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 88.569 88.569",width:12,height:12},e),s.a.createElement("path",{style:t,d:"M52.559,2.054L36.746,1.777c-0.31-0.008-0.614,0.036-0.91,0.125l-2.638,0.787C31.907,0.902,29.44,0,25.816,0h-0.51 c-4.653,0-8.438,3.786-8.438,8.438v10.877c0,4.653,3.786,8.438,8.438,8.438h0.51c3.933,0,6.504-1.062,7.686-3.165l1.727,0.168 v27.515c-1.546,1.234-2.542,3.132-2.542,5.26V81.84c0,3.711,3.018,6.729,6.728,6.729h9.736c3.71,0,6.728-3.019,6.728-6.729V57.53 c0-2.055-0.928-3.896-2.384-5.131V22.592c0.261-0.196,0.688-0.439,1.099-0.626c7.619-0.192,11.976,3.412,12.135,3.545 c0.885,0.772,2.141,0.957,3.213,0.469c1.07-0.487,1.758-1.555,1.758-2.73C71.699,12.035,62.742,2.131,52.559,2.054z M49.88,81.84 c0,0.401-0.326,0.729-0.728,0.729h-9.736c-0.401,0-0.728-0.327-0.728-0.729V57.53c0-0.401,0.326-0.729,0.728-0.729h9.736 c0.401,0,0.728,0.328,0.728,0.729V81.84z M53.817,15.99c-0.299,0.014-0.594,0.072-0.875,0.173 c-1.277,0.459-5.446,2.238-5.446,5.871v28.615H41.23V22.034c0-1.544-1.172-2.836-2.709-2.986l-6.975-0.68 c-0.842-0.081-1.68,0.196-2.307,0.764s-0.984,1.375-0.984,2.222c0,0.07-0.003,0.126-0.007,0.171 c-0.258,0.092-0.9,0.227-2.432,0.227h-0.51c-1.345,0-2.438-1.094-2.438-2.438V8.437c0-1.345,1.094-2.438,2.438-2.438h0.51 c1.532,0,2.173,0.136,2.432,0.229c0.004,0.045,0.007,0.102,0.007,0.171c0,0.947,0.447,1.839,1.207,2.405 c0.76,0.566,1.744,0.741,2.65,0.47l4.993-1.488l15.379,0.27c5.465,0.041,10.028,4.452,12.067,9.557 C61.804,16.591,58.19,15.785,53.817,15.99z"}))},$t=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 23.94 24",width:20,height:20},e),s.a.createElement("path",{style:t,d:"M23.84,9.1a1,1,0,0,0-.8-.7l-7.1-1L12.84.6A1,1,0,0,0,11,.6L7.94,7.4l-7.1,1a1,1,0,0,0-.8.7,1.09,1.09,0,0,0,.2,1l5.2,5.2-1.3,7.5a1,1,0,0,0,.4,1,1.38,1.38,0,0,0,1.1.1l6.3-3.6,6.3,3.6a.9.9,0,0,0,.5.1,1.42,1.42,0,0,0,.6-.2,1,1,0,0,0,.4-1l-1.3-7.5,5.2-5.2A.8.8,0,0,0,23.84,9.1Zm-7.2,5.2a1.4,1.4,0,0,0-.3.9l1,5.9-5-2.8a.9.9,0,0,0-.5-.1.9.9,0,0,0-.5.1l-5,2.8,1-5.9a.86.86,0,0,0-.3-.9l-4.2-4.2,5.7-.8c.3,0,.6-.3.8-.6l2.6-5.3,2.4,5.3a1,1,0,0,0,.8.6l5.7.8Z"}))},_t=n(61),Mt=n(266);n(529),n(530),n(531);const Vt=y.b.div.attrs((e=>({className:"node-tooltip"})))`
  position: absolute;
  left: ${e=>e.right?"auto":0};
  right: ${e=>e.right?0:"auto"};
  top: 0;
  z-index: 50000;
  transform: ${e=>e.right?"translateX(100%) translateX(20px)":"translateX(-100%) translateX(-20px)"};
  background-color: #262727;
  border-radius: 6px;
  min-width: ${e=>e.small?"100px":"200px"};
  min-height: ${e=>e.small?"40px":"70px"};
  padding: 10px 16px;
  font-weight: normal;
  font-size: 11px;
  pointer-events: none;
  transition: opacity 150ms ease-in;

  & > h5 {
    font-size: 13px;
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
    position: relative;
  }

  & svg {
    flex-shrink: 0;
  }
`,qt=y.b.div`
  position: absolute;
  background-color: #262727;
  top: 0;
  right: ${e=>e.right?"auto":0};
  left: ${e=>e.right?0:"auto"};
  transform: ${e=>e.right?"translateX(-150%) rotateZ(45deg)":"translateX(150%) rotateZ(45deg)"};
  width: 16px;
  height: 16px;
`,Gt=y.b.span`
  display: flex;
  align-items: center;
  max-width: 100%;
  overflow: hidden;
  margin-bottom: 5px;
`;var Kt=n(26),zt=n(273),Yt=n(267),Ht=e=>{const t={fill:e.color||"#777777"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 8.7 12.8",width:15,height:15},e),s.a.createElement("g",null,s.a.createElement("polygon",{style:t,points:"4.4,0 0.5,4.8 8.1,4.7 \t"}),s.a.createElement("polygon",{style:t,points:"0.6,8 4.4,12.8 8.2,7.9 \t"})))};let Wt=1;const Zt=e=>Kt.z.DropdownIndicator&&s.a.createElement(Kt.z.DropdownIndicator,e,s.a.createElement(Ht,{width:9*Wt,height:9*Wt,style:{marginRight:4*Wt}})),Jt=e=>{const{children:t,className:n,cx:a,getStyles:i,isDisabled:o,isFocused:l,isSelected:r,innerRef:c,innerProps:d}=e;return s.a.createElement("div",Object.assign({ref:c,style:i("option",e),className:a({option:!0,"option--is-disabled":o,"option--is-focused":l,"option--is-selected":r},n)},d),r&&s.a.createElement(Qt,null),t)};var Xt=s.a.memo((e=>{Wt=e.scale||1;const t=e.isCreatable?Yt.a:zt.a;return s.a.createElement(t,Object.assign({},e,{components:{DropdownIndicator:Zt,Option:Jt},theme:e=>({...e,colors:{...e.colors,primary:"#0b0b0c",primary25:"#0b0b0c",primary50:"#2B2C2D"}}),styles:{...e.style,container:(t,n)=>({...t,...e.style,flex:1}),menu:(e,t)=>({...e,border:"none",position:"absolute",zIndex:20}),menuList:(e,t)=>({...e,fontSize:9*Wt,border:"none",backgroundColor:"#1b1b1c",color:"#FFF",fontWeight:"bold"}),control:()=>({fontSize:9*Wt,height:24*Wt,border:"none",borderRadius:12*Wt,backgroundColor:"rgba(0,0,0,0.3)",color:"#FFF",fontWeight:"bold",display:"flex"}),placeholder:(e,t)=>({...e,color:"#FFF"}),singleValue:(e,t)=>({...e,color:"#FFF"}),input:(e,t)=>({...e,position:"absolute"}),valueContainer:(e,t)=>({...e,fontSize:9*Wt,paddingLeft:10}),indicatorSeparator:(e,t)=>({...e,display:"none"}),option:(e,t)=>{let n="#1b1b1c";return t.isSelected&&(n="#0b0b0c"),{...e,position:"relative",paddingTop:6,paddingBottom:6,paddingLeft:25,paddingRight:11,color:t.isSelected?"#FFFFFF":"#565758",backgroundColor:n}}}}))}));const Qt=Object(y.b)((e=>{const t={fill:e.style&&e.style.color||"#012eff"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 188.51 122.51",width:7,height:7},e),s.a.createElement("path",{style:t,d:"M78,122.51a12,12,0,0,1-8.35-3.38c-.17-.16-16.72-16.22-33.07-32.32C27,77.33,19.28,69.69,13.76,64.09,2.37,52.52,0,50.12,0,44.51A12,12,0,0,1,22.21,38.2c4.35,5.09,30.2,30.67,55.67,55.46L168,3.52a12,12,0,0,1,17,17L86.49,119A12,12,0,0,1,78,122.51Zm-54-78v0Zm0,0v0Zm0,0Z"}))}))`
  position: absolute;
  left: 9px;
  top: 50%;
  transform: translateY(-50%);
`;var en=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 129.08 107",width:28,height:28},e),s.a.createElement("path",{style:t,d:"M30.08,83.08a5,5,0,0,1-3.54-1.46L1.46,56.54a5,5,0,0,1,0-7.08L26.54,24.38a5,5,0,1,1,7.07,7.07L12.07,53,33.61,74.53a5,5,0,0,1,0,7.07A4.88,4.88,0,0,1,30.08,83.08Z"}),s.a.createElement("path",{style:t,d:"M99,83.08a5,5,0,0,1-3.54-8.53L117,53,95.47,31.47a5,5,0,1,1,7.07-7.07l25.08,25.08a5,5,0,0,1,0,7.07L102.54,81.63A5,5,0,0,1,99,83.08Z"}),s.a.createElement("path",{style:t,d:"M52.45,107a5,5,0,0,1-1.26-.16,5,5,0,0,1-3.59-6.09l25.11-97a5,5,0,0,1,9.68,2.5l-25.11,97A5,5,0,0,1,52.45,107Z"}))},tn=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 299.06 299.04",width:28,height:28},e),s.a.createElement("path",{style:t,d:"M295.84,100.82a75.12,75.12,0,0,0,1.79-7.36,79.25,79.25,0,0,0,0-30q-.72-3.72-1.79-7.36A78.41,78.41,0,0,0,243,3.22a75.12,75.12,0,0,0-7.36-1.79,79.25,79.25,0,0,0-30,0q-3.72.72-7.36,1.79A78.06,78.06,0,0,0,165.09,23L128.5,59.54a109.92,109.92,0,0,1,39.83,6.84l20.09-20.09a45.82,45.82,0,0,1,3.45-3.12,45,45,0,0,1,3.68-2.7q1.89-1.24,3.88-2.29a45.11,45.11,0,0,1,6.11-2.65c1.39-.49,2.8-.9,4.22-1.25a45.75,45.75,0,0,1,13-1.25q2.19.11,4.35.42a46.1,46.1,0,0,1,6.43,1.4c1.41.42,2.8.9,4.17,1.46a45.53,45.53,0,0,1,25,25c.55,1.37,1,2.76,1.46,4.17a45.79,45.79,0,0,1,1.4,6.43c.21,1.44.35,2.9.42,4.35a45.68,45.68,0,0,1-1.25,13c-.35,1.42-.76,2.83-1.25,4.22a45.66,45.66,0,0,1-2.65,6.11c-.69,1.32-1.46,2.61-2.29,3.88a45,45,0,0,1-2.7,3.68,45.82,45.82,0,0,1-3.12,3.45l-20.09,20.09L207.45,156l-6.3,6.3a45.48,45.48,0,0,1-70.56-7.75,14.41,14.41,0,0,0-10.76,4.22l-15.65,15.65a78.51,78.51,0,0,0,42.44,31c2.43.72,4.89,1.32,7.36,1.79.66.13,1.32.22,2,.33a79.22,79.22,0,0,0,28-.33q3.72-.72,7.36-1.79A78.6,78.6,0,0,0,224.5,185.6l15-15L276.12,134A78.23,78.23,0,0,0,295.84,100.82Z"}),s.a.createElement("path",{style:t,d:"M110.65,252.76A45.5,45.5,0,0,1,46.3,188.41l20.09-20.09,25.23-25.23,6.3-6.3a45.82,45.82,0,0,1,3.45-3.12,45,45,0,0,1,3.68-2.7q1.89-1.24,3.88-2.29A45.11,45.11,0,0,1,115,126c1.39-.49,2.8-.9,4.22-1.25a46.27,46.27,0,0,1,4.67-.88,45.72,45.72,0,0,1,8.35-.37q2.19.11,4.35.42a46.1,46.1,0,0,1,6.43,1.4c1.41.42,2.8.9,4.17,1.46a44.57,44.57,0,0,1,7.29,3.77,45.29,45.29,0,0,1,14,14,14.41,14.41,0,0,0,10.76-4.22l15.65-15.65a78.51,78.51,0,0,0-42.44-31c-2.43-.72-4.89-1.32-7.36-1.79-.66-.13-1.32-.22-2-.33a79,79,0,0,0-45.56,5.93,78,78,0,0,0-23,15.92l-15,15L23,165.07A78,78,0,0,0,3.22,198.22a75.12,75.12,0,0,0-1.79,7.36,79.25,79.25,0,0,0,0,30q.72,3.72,1.79,7.36A78.41,78.41,0,0,0,56.1,295.82a75.12,75.12,0,0,0,7.36,1.79,79.25,79.25,0,0,0,30,0q3.72-.72,7.36-1.79A78.06,78.06,0,0,0,134,276.09l36.59-36.59a109.92,109.92,0,0,1-39.83-6.84Z"}))},nn=e=>{const t={fill:"none"},n={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 314 314",width:28,height:28},e),s.a.createElement("polygon",{style:t,points:"114.24 137.58 114.24 137.58 176.42 199.76 176.42 199.76 114.24 137.58"}),s.a.createElement("path",{style:t,d:"M200.22,223.55h0l85.61,85.61A16.44,16.44,0,0,0,297.5,314h0a16.46,16.46,0,0,1-11.67-4.83Z"}),s.a.createElement("path",{style:t,d:"M4.83,28.17A16.5,16.5,0,0,1,16.5,0h0A16.5,16.5,0,0,0,4.83,28.17l85.56,85.56h0Z"}),s.a.createElement("path",{style:n,d:"M297.5,314a16.7,16.7,0,0,0,4.7-.68,16.7,16.7,0,0,1-4.7.68Z"}),s.a.createElement("polygon",{style:n,points:"176.42 199.76 176.42 199.76 200.22 223.55 200.22 223.55 176.42 199.76"}),s.a.createElement("polygon",{style:n,points:"90.39 113.73 90.39 113.73 114.24 137.58 114.24 137.58 90.39 113.73"}),s.a.createElement("path",{style:n,d:"M149.15,229.2l-11,10.95h0l-20.09,20.09a45.5,45.5,0,0,1-64.35-64.35L73.85,175.8l11-11,6.44-6.44L67.91,135.08,67,136,45,158,30.43,172.56A78,78,0,0,0,10.7,205.71c-.72,2.43-1.32,4.89-1.79,7.36a79.25,79.25,0,0,0,0,30q.72,3.72,1.79,7.36a77.62,77.62,0,0,0,10.43,21.94l-.48.48a78.51,78.51,0,0,0,42.44,31,75.12,75.12,0,0,0,7.36,1.79c.66.13,1.32.22,2,.33a79.22,79.22,0,0,0,28-.33q3.72-.72,7.36-1.79a78.27,78.27,0,0,0,31.77-18.42l.23-.22c.38-.37.77-.72,1.15-1.1l15-15,22.94-22.94-23.33-23.33Z"}),s.a.createElement("path",{style:n,d:"M164.25,85.89l11-11h0l20.09-20.09a45.5,45.5,0,0,1,64.35,64.35l-20.09,20.09-11,11-6.44,6.44L245.49,180l.89-.89,22-22L283,142.53a78,78,0,0,0,19.73-33.15c.72-2.43,1.32-4.89,1.79-7.36a79.25,79.25,0,0,0,0-30q-.72-3.72-1.79-7.36c-2.27-7.7-4.52-15.08-9.19-21.91l-.76-.51a78.51,78.51,0,0,0-42.44-30.95c-2.43-.72-4.89-1.32-7.36-1.79-.66-.13-1.32-.22-2-.33a79.22,79.22,0,0,0-28,.33q-3.72.72-7.36,1.79a78.27,78.27,0,0,0-31.77,18.42l-.23.22c-.38.37-.77.72-1.15,1.1l-15,15L134.46,69l23.33,23.33Z"}),s.a.createElement("path",{style:n,d:"M309.17,285.83l-94.9-94.9-39.59-39.59-12-12L122.75,99.41,28.17,4.83A16.5,16.5,0,0,0,4.83,28.16l85.56,85.56,23.85,23.85,62.18,62.18,23.8,23.8,85.61,85.61A16.44,16.44,0,0,0,297.5,314a16.7,16.7,0,0,0,4.7-.68,16.5,16.5,0,0,0,7-27.48Z"}),s.a.createElement("polygon",{style:n,points:"174.67 151.34 214.26 190.93 214.26 190.93 174.67 151.34"}),s.a.createElement("polygon",{style:n,points:"162.66 139.33 162.66 139.33 122.74 99.41 122.74 99.41 162.66 139.33"}))},an=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 75.65 103.63",width:28,height:28},e),s.a.createElement("path",{style:t,d:"M51.53,20.52l-1.17,4.79,16.34-.07-2.47,10.9-15.9.07L37.41,83.39a26.62,26.62,0,0,1-8.7,14.73,24.16,24.16,0,0,1-16,5.51,29.15,29.15,0,0,1-7.41-.84A13.33,13.33,0,0,1,0,100.2l5.94-10a11,11,0,0,0,7.32,2.25A9.7,9.7,0,0,0,19.84,90a12.6,12.6,0,0,0,3.72-6.93L34.45,36.26l-9.67,0,2.47-10.9,9.67,0,1.2-5.12A25.6,25.6,0,0,1,46.88,5.51Q53.56,0,63.34,0a27.71,27.71,0,0,1,7.08.84,12.4,12.4,0,0,1,5.23,2.59l-6,10a10.55,10.55,0,0,0-7-2.26Q53.59,11.26,51.53,20.52Z"}))},sn=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 105.55 88.78",width:28,height:28},e),s.a.createElement("polygon",{style:t,points:"30.25 71.72 16.06 14.43 0 14.51 18.84 88.78 33.42 88.71 70.87 33.63 56.06 33.72 30.25 71.72"}),s.a.createElement("polygon",{style:t,points:"105.55 18.5 87.05 18.5 87.05 0 79.05 0 79.05 18.5 60.55 18.5 60.55 26.5 79.05 26.5 79.05 45 87.05 45 87.05 26.5 105.55 26.5 105.55 18.5"}))},on=e=>{const t={fill:e.style&&e.style.color||"#5C5D5E"};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 150.75 152.27",width:28,height:28},e),s.a.createElement("path",{style:t,d:"M150.75,75.63a25.66,25.66,0,0,0-23-25.49A66.42,66.42,0,0,0,55.65,10.31,25.63,25.63,0,0,0,12.34,37.4a66.29,66.29,0,0,0,1.34,78.85,25.62,25.62,0,0,0,44.07,25.57A66.36,66.36,0,0,0,128,101.1,25.68,25.68,0,0,0,150.75,75.63ZM66.5,127.41c-1.27,0-2.52-.06-3.77-.15,0-.21,0-.42,0-.63a25.62,25.62,0,0,0-38.92-21.92,51.37,51.37,0,0,1-.75-56.45A25.62,25.62,0,0,0,60.75,25.63c0-.3,0-.59,0-.89a52.43,52.43,0,0,1,5.77-.33,51.55,51.55,0,0,1,46.21,28.8,25.63,25.63,0,0,0,.22,45A51.57,51.57,0,0,1,66.5,127.41Z"}))};class ln extends a.Component{constructor(e){super(e),this.shouldComponentUpdate=(e,t)=>e.latestNode===this.props.latestNode||this.props.latestNode!==this.props.action,this.onDblClick=e=>{e.target.classList.contains("condition-node")&&(e.preventDefault(),this.toggle())},this.toggle=()=>{this.setState({opened:!this.state.opened})},this.close=()=>{this.setState({opened:!1})},this.openEditing=()=>{this.setState({editing:!0})},this.closeEditing=()=>{this.setState({editing:!0}),this.onEditCondition()},this.onConditionTypeChange=e=>{const{dispatchUpdateBUNode:t,buID:n,behavior:a}=this.props,{conditionType:s}=a,{value:i}=e;if(i===s)return;const o={...a,conditionType:i};this.setState({conditionType:e.value}),t(n,o)},this.onSelectTypeFocus=()=>{this.setState({selectFieldOpen:!0})},this.onSelectTypeBlur=()=>{this.setState({selectFieldOpen:!1})},this.onEditCondition=()=>{const{dispatchUpdateBUNode:e,buID:t,behavior:n}=this.props,{expressionLeft:a,expressionRight:s}=n,{value:i}=this.expressionLeftInput.current;let o="";o=this.expressionRightInput.current?this.expressionRightInput.current.value:s,(a!==i||s!==o)&&e(t,{...n,expressionLeft:i,expressionRight:o})},this.deleteNode=()=>{const{dispatchDeleteBUNode:e,behavior:t,buID:n}=this.props,{id:a}=t;e(n,a)};const{behavior:t}=e,{conditionType:n}=t;this.state={opened:!1,animating:!1,editing:!1,selectFieldOpen:!1,conditionType:n},this.expressionLeftInput=s.a.createRef(),this.expressionRightInput=s.a.createRef(),this.conditionTypes=[{label:T.j.pretty.EQUALS,value:T.j.EQUALS},{label:T.j.pretty.GREATER,value:T.j.GREATER},{label:T.j.pretty.LESSER,value:T.j.LESSER},{label:T.j.pretty.GREATER_EQUAL,value:T.j.GREATER_EQUAL},{label:T.j.pretty.LESSER_EQUAL,value:T.j.LESSER_EQUAL},{label:T.j.pretty.NOT_EQUAL,value:T.j.NOT_EQUAL},{label:T.j.pretty.BOOLEAN,value:T.j.BOOLEAN}]}componentDidMount(){this.props.latestNode===this.props.action&&(this.setState({opened:!0}),setTimeout((()=>this.props.buTaskAdded()),100))}optionalPortal(e,t){return"fixed"===e.position?(this._dragEl||(this._dragEl=document.getElementById("draggable")),Object(i.createPortal)(t,this._dragEl)):t}renderNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{opened:n,conditionType:a,animating:i,selectFieldOpen:o}=this.state,{t:l,localVars:r,behavior:c,isLast:d,buID:u,editorScale:p}=this.props,{success:m,failure:b,id:h,expressionLeft:y,expressionRight:g}=c,f=Object.assign({},e&&e.draggableProps),E=Object.assign({},e&&e.dragHandleProps),v=t&&t.isDragging?p:1;return s.a.createElement(dn,Object.assign({ref:e&&e.innerRef,dragging:t.isDragging,scale:v},f,E),s.a.createElement(un,{className:"condition-node",scale:v,selectFieldOpen:o,onDoubleClick:this.onDblClick},!n&&!i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(hn,{scale:v}),s.a.createElement(bn,{width:21*v,height:18*v}),s.a.createElement(yn,{scale:v,onClick:this.toggle}),s.a.createElement(mn,{className:"bin",closed:1,onClick:this.deleteNode})),s.a.createElement(_t.Transition,{items:n,native:!0,from:{width:52,height:52},enter:{width:228,height:"auto"},leave:{width:52,height:52},config:{duration:n?250:150},onStart:()=>this.setState({animating:!0}),onRest:()=>this.setState({animating:!1})},(e=>e&&(e=>s.a.createElement(pn,{style:e,animating:i?1:0},s.a.createElement("div",{className:"input-row",style:{justifyContent:"space-between",marginTop:0}},s.a.createElement(bn,{width:21*v,height:18*v,style:{marginLeft:5}}),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},s.a.createElement(mn,{onClick:this.deleteNode}),s.a.createElement(cn,{onClick:this.close},s.a.createElement(rn,null)))),s.a.createElement("div",{className:"input-row"},s.a.createElement("input",{style:{width:110,marginRight:5},type:"text",id:"expression-left",name:"expression-left",placeholder:l("Expression")+" 1",defaultValue:y,ref:this.expressionLeftInput,onKeyDown:Object(L.j)(this.onEditCondition),onBlur:this.onEditCondition}),s.a.createElement(Xt,{defaultValue:{label:T.j.pretty[a],value:T.j[a]},options:this.conditionTypes,onChange:this.onConditionTypeChange,onFocus:this.onSelectTypeFocus,onBlur:this.onSelectTypeBlur}),a!==T.j.BOOLEAN&&s.a.createElement("input",{style:{width:110,marginLeft:5},type:"text",id:"expression-right",name:"expression-right",placeholder:l("Expression")+" 2",defaultValue:g,ref:this.expressionRightInput,onKeyDown:Object(L.j)(this.onEditCondition),onBlur:this.onEditCondition})))))),!n&&s.a.createElement(Vt,{small:!0},s.a.createElement("h5",null,s.a.createElement(qt,null),s.a.createElement(Gt,null,s.a.createElement(bn,{width:13,height:13,style:{marginRight:12}}),y||l("[Missing]"),a===T.j.BOOLEAN&&" ?",a!==T.j.BOOLEAN&&(` ${T.j.pretty[a]} `||" = "),a!==T.j.BOOLEAN&&(g||l("[Missing]")))))),s.a.createElement(_t.Transition,{items:n,native:!0,from:{width:0,height:0,paddingTop:50,paddingRight:0,paddingBottom:0,paddingLeft:0},enter:{width:"auto",height:"auto",paddingTop:60,paddingRight:20,paddingBottom:30,paddingLeft:20},leave:{width:0,height:0,paddingTop:50,paddingRight:0,paddingBottom:0,paddingLeft:0},config:{duration:n?250:150}},(e=>e&&(e=>s.a.createElement(gn,{animating:i?1:0,style:e},s.a.createElement("div",null,s.a.createElement(fn,null,s.a.createElement("span",{className:"inline-hr"}),s.a.createElement(En,null,l("True")),s.a.createElement("span",{className:"inline-hr"})),s.a.createElement(Mn,{buID:u,style:vn.childBehavior,editorScale:p,parentTask:h,arrayName:"success",actions:m,variables:r,isCondition:!0})),s.a.createElement("span",{style:{borderRight:"1px solid #808080"}}),s.a.createElement("div",null,s.a.createElement(fn,null,s.a.createElement("span",{className:"inline-hr"}),s.a.createElement(En,null,l("False")),s.a.createElement("span",{className:"inline-hr"})),s.a.createElement(Mn,{buID:u,style:vn.childBehavior,editorScale:p,parentTask:h,arrayName:"failure",actions:b,variables:r,isCondition:!0})))))),s.a.createElement(Yn,{show:d||t&&t.isDragging?0:1,scale:1}))}render(){const{behavior:e,index:t,enableDrag:n}=this.props,{opened:a}=this.state,{id:i}=e;return n?s.a.createElement(gt.b,{draggableId:i,index:t,isDragDisabled:a},((e,t)=>s.a.createElement(s.a.Fragment,null,this.optionalPortal(e.draggableProps.style,this.renderNode(e,t))))):this.renderNode()}}const rn=Object(y.b)(Rt)`
  width: 9px;/*${e=>12*e.scale+"px"};*/
  height: 4.5px;/*${e=>6*e.scale+"px"};*/
  pointer-events: none;
`,cn=y.b.span`
  width: 30px;
  height: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
`,dn=y.b.div`
  pointer-events: all;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-width: ${e=>248*e.scale+"px"};
  margin-bottom: 8px;
  outline: none;

  ${e=>e.dragging&&y.a`
    min-width: 0;
  `}
`,un=y.b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  /* height: 54px; */
  min-height: ${e=>54*e.scale+"px"};
  height: auto;
  min-width: ${e=>54*e.scale+"px"};
  max-width: ${e=>248*e.scale+"px"};
  background-color: rgb(43, 44, 45);
  box-shadow: rgba(0, 0, 0, 0.2) 0px ${e=>3*e.scale+"px"} ${e=>15*e.scale+"px"} 0px;
  border-radius: ${e=>8*e.scale+"px"};
  z-index: 10;
  padding: ${e=>8*e.scale+"px"};
  transform: ${e=>`scale(${e.scale})`};

  &:not(:hover) .bin {
    display: none;
  }

  &:not(:hover) .node-tooltip {
    opacity: 0;
  }

  &:hover .node-tooltip {
    transition-delay: 0.4s;
  }

  ${e=>e.selectFieldOpen&&y.a`
    z-index: 20;
  `}
`,pn=Object(y.b)(_t.animated.div)`
  display: flex;
  flex-direction: column;
  width: 100%;
  align-items: flex-end;
  pointer-events: none;

  ${e=>e.animating&&y.a`
    overflow: hidden;
  `}
`,mn=Object(y.b)(U)`
  margin-left: 16px;
  cursor: pointer;

  ${e=>e.closed&&y.a`
    position: absolute;
    bottom: 6px;
    right: 6px;
  `}
`,bn=Object(y.b)((e=>{const t={fill:e.color||"#777777"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:21,height:18,viewBox:"0 0 746 768"},e),s.a.createElement("path",{style:t,d:"M650,374.79c0-4.53-0.12-9.06-0.34-13.58c-0.11-2.21-0.31-4.39-0.47-6.58c-0.17-2.32-0.3-4.64-0.53-6.96 c-0.27-2.75-0.64-5.47-0.98-8.19c-0.22-1.73-0.41-3.47-0.66-5.2c-0.43-2.96-0.96-5.88-1.49-8.8c-0.27-1.5-0.51-3.01-0.81-4.51 c-0.59-2.97-1.26-5.91-1.94-8.85c-0.34-1.46-0.65-2.93-1.02-4.39c-0.71-2.85-1.49-5.67-2.29-8.48c-0.44-1.57-0.87-3.14-1.34-4.71 c-0.79-2.62-1.65-5.21-2.51-7.8c-0.59-1.76-1.16-3.53-1.79-5.29c-0.83-2.32-1.72-4.62-2.61-6.91c-0.77-2-1.54-4.01-2.36-5.99 c-0.83-2-1.71-3.98-2.59-5.95c-0.99-2.24-1.97-4.47-3.02-6.69c-0.81-1.7-1.66-3.37-2.49-5.05c-1.21-2.43-2.43-4.85-3.71-7.25 c-0.78-1.46-1.6-2.88-2.41-4.32c-1.42-2.54-2.85-5.07-4.35-7.57c-0.79-1.3-1.61-2.58-2.42-3.87c-1.59-2.55-3.19-5.09-4.87-7.59 c-0.86-1.28-1.77-2.53-2.65-3.8c-1.69-2.42-3.37-4.85-5.14-7.23c-1.06-1.43-2.18-2.81-3.27-4.22c-1.66-2.15-3.31-4.31-5.04-6.42 c-1.5-1.83-3.07-3.59-4.61-5.37c-1.42-1.64-2.79-3.3-4.25-4.91c-3.08-3.4-6.23-6.73-9.48-9.97 C518.24,128.02,448.73,96.9,371.95,96.9C218.38,96.9,93.9,221.38,93.9,374.95c0,81.73,35.27,155.21,91.41,206.09 c1.62,1.47,3.29,2.85,4.93,4.27c1.78,1.54,3.53,3.1,5.35,4.6c2.12,1.74,4.29,3.39,6.45,5.07c1.4,1.08,2.77,2.19,4.19,3.24 c2.39,1.78,4.82,3.46,7.25,5.15c1.26,0.88,2.51,1.78,3.78,2.64c2.51,1.68,5.05,3.28,7.6,4.88c1.28,0.8,2.55,1.62,3.85,2.41 c2.51,1.51,5.05,2.94,7.6,4.37c1.43,0.8,2.85,1.62,4.29,2.39c2.41,1.29,4.84,2.51,7.28,3.73c1.67,0.83,3.33,1.68,5.01,2.48 c2.22,1.05,4.47,2.04,6.72,3.04c1.97,0.87,3.93,1.75,5.93,2.58c2,0.83,4.01,1.59,6.01,2.37c2.29,0.89,4.57,1.77,6.89,2.6 c1.77,0.63,3.54,1.21,5.32,1.8c2.58,0.86,5.15,1.72,7.76,2.5c1.58,0.47,3.16,0.9,4.75,1.35c2.8,0.79,5.6,1.57,8.44,2.28 c1.48,0.37,2.96,0.68,4.44,1.02c2.93,0.68,5.85,1.34,8.81,1.93c1.51,0.3,3.03,0.54,4.54,0.81c2.91,0.52,5.82,1.05,8.76,1.48 c1.76,0.26,3.52,0.45,5.28,0.67c2.7,0.34,5.39,0.71,8.11,0.97c2.36,0.23,4.72,0.37,7.08,0.54c2.15,0.15,4.3,0.36,6.46,0.46 c4.58,0.23,9.17,0.35,13.75,0.35c0,0,0,0,0,0c4.58,0,9.17-0.12,13.75-0.35c2.17-0.11,4.31-0.31,6.47-0.46 c2.36-0.17,4.72-0.31,7.07-0.54c2.73-0.27,5.42-0.63,8.12-0.97c1.76-0.22,3.52-0.41,5.27-0.67c2.95-0.43,5.86-0.96,8.77-1.48 c1.51-0.27,3.03-0.51,4.54-0.81c2.96-0.58,5.89-1.25,8.82-1.93c1.48-0.34,2.96-0.66,4.43-1.02c2.84-0.71,5.65-1.49,8.45-2.28 c1.58-0.45,3.16-0.87,4.74-1.35c2.61-0.79,5.19-1.64,7.77-2.51c1.77-0.59,3.55-1.17,5.31-1.8c2.32-0.83,4.61-1.71,6.9-2.6 c2.01-0.78,4.01-1.54,6-2.37c2-0.83,3.97-1.71,5.94-2.58c2.24-0.99,4.48-1.98,6.7-3.03c1.69-0.8,3.35-1.65,5.03-2.48 c2.43-1.21,4.86-2.43,7.26-3.72c1.45-0.78,2.87-1.6,4.31-2.4c2.54-1.42,5.08-2.85,7.58-4.36c1.3-0.78,2.58-1.61,3.86-2.41 c2.55-1.59,5.09-3.19,7.59-4.87c1.28-0.86,2.53-1.77,3.8-2.65c2.43-1.69,4.85-3.37,7.23-5.14c1.42-1.06,2.8-2.17,4.21-3.26 c2.15-1.67,4.31-3.31,6.43-5.05c1.83-1.5,3.59-3.07,5.38-4.62c1.63-1.41,3.29-2.79,4.9-4.24c6.8-6.16,13.29-12.65,19.45-19.45 c1.45-1.6,2.82-3.25,4.23-4.88c1.55-1.79,3.13-3.57,4.64-5.4c1.73-2.1,3.37-4.26,5.03-6.4c1.09-1.41,2.22-2.8,3.28-4.24 c1.77-2.37,3.44-4.79,5.13-7.21c0.89-1.28,1.8-2.53,2.67-3.82c1.67-2.5,3.27-5.03,4.85-7.57c0.81-1.3,1.64-2.58,2.43-3.89 c1.5-2.49,2.93-5.02,4.34-7.55c0.81-1.45,1.64-2.88,2.42-4.34c1.28-2.39,2.5-4.81,3.71-7.24c0.84-1.68,1.69-3.35,2.5-5.05 c1.05-2.21,2.03-4.44,3.02-6.68c0.88-1.98,1.76-3.96,2.59-5.96c0.82-1.98,1.59-3.98,2.36-5.98c0.89-2.3,1.78-4.6,2.61-6.92 c0.62-1.75,1.2-3.51,1.78-5.27c0.87-2.59,1.73-5.18,2.52-7.81c0.47-1.56,0.89-3.13,1.33-4.69c0.8-2.82,1.58-5.64,2.29-8.49 c0.36-1.46,0.67-2.93,1.01-4.39c0.68-2.94,1.35-5.88,1.94-8.86c0.29-1.5,0.53-3,0.8-4.5c0.53-2.93,1.05-5.85,1.49-8.81 c0.25-1.73,0.44-3.46,0.66-5.19c0.35-2.73,0.72-5.45,0.98-8.2c0.23-2.31,0.36-4.63,0.53-6.95c0.16-2.2,0.36-4.38,0.47-6.59 c0.22-4.52,0.34-9.05,0.34-13.57c0-0.06,0-0.11,0-0.17C650,374.89,650,374.84,650,374.79z M211,535.9 c-41.24-41.24-66.77-98.17-66.77-160.95c0-125.57,102.16-227.73,227.73-227.73c62.78,0,119.72,25.54,160.95,66.77L211,535.9z"}))}))`
  pointer-events: none;
`,hn=Object(y.b)($)`
  position: absolute;
  cursor: pointer;
  top: ${e=>6*e.scale+"px"};
  left: ${e=>6*e.scale+"px"};
  width: ${e=>9*e.scale+"px"};
  height: ${e=>9*e.scale+"px"};
`,yn=Object(y.b)(_)`
  position: absolute;
  cursor: pointer;
  top: ${e=>6*e.scale+"px"};
  right: ${e=>6*e.scale+"px"};
  width: ${e=>9*e.scale+"px"};
  height: ${e=>9*e.scale+"px"};
`,gn=Object(y.b)(_t.animated.div)`
  display: flex;
  flex-direction: row;
  justify-content: center;
  position: relative;
  top: -36px;
  margin-bottom: -36px;
  background-color: rgba(0, 0, 0, 0.13);
  border-radius: 7.5px;
  padding: 45px 15px 22px;

  ${e=>e.animating&&y.a`
    overflow: hidden;
  `}
`,fn=y.b.span`
  display: flex;
  justify-content: center;
  align-items: center;
  padding-left: 60px;
  padding-right: 60px;
  margin-bottom: 7.5px;
`,En=y.b.span`
  font-weight: bold;
  font-size: 15px;
  color: #2B2C2D;
  margin-left: 11px;
  margin-right: 11px;
`,vn={childBehavior:{marginLeft:15,marginRight:15}};ln.defaultProps={enableDrag:!0};const xn={dispatchUpdateBUNode:N.V,dispatchDeleteBUNode:N.E,buTaskAdded:N.y};var In=Object(u.b)(((e,t)=>{let{bu:n}=e,{buID:a,action:s}=t;return{behavior:Object(N.G)(n.entities.present.byIds[a].present,s),latestNode:n.ui.latestNode}}),xn)(Object(h.d)()(ln));const wn={container:{pointerEvents:"all",fontSize:11,position:"relative",height:0,marginTop:23,marginBottom:0,backgroundColor:"#2B2C2D",width:248,borderRadius:12,display:"flex",flexDirection:"column",alignItems:"stretch"},addBT:{position:"absolute",top:0,left:"50%",transform:"translate(-50%, -50%)",width:32,height:32,backgroundColor:"#2B2C2D",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 3px 15px 0 rgba(0,0,0,0.2)",cursor:"pointer",":active":{backgroundColor:"#242626"}},containerOpened:{padding:"23px 15px 11px 15px",height:86,boxShadow:"0 3px 15px 0 rgba(0,0,0,0.2)"},addBTOpened:{backgroundColor:"#731B31",border:"1px solid #FD3365",":active":{backgroundColor:"#620A20"}},buttonsRow:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:1,marginTop:8},bt:{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:13,height:26,width:92,backgroundColor:"#1B1C1C",boxShadow:"0 6px 22px 0 rgba(0,0,0,0.2)",cursor:"pointer",":active":{backgroundColor:"#1E1F20"}},closeBT:{color:"#777",position:"absolute",top:0,right:0,width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"}};var On=s.a.memo((e=>{const t=Object(u.c)(),[n,i]=Object(a.useState)(!1),{buID:o,buState:l,parentTask:r,arrayName:c,actionsOnly:d}=e,p=Object(a.useCallback)((()=>{Object(N.x)(o,T.a.ASSIGN_VARIABLE,l,r,c)(t),i(!1)}),[c,o,l,t,r]),m=Object(a.useCallback)((()=>{Object(N.x)(o,T.a.CONDITION,l,r,c)(t),i(!1)}),[c,o,l,t,r]),[b]=Object(h.c)();return s.a.createElement("div",{className:"noselect",style:Object.assign({},wn.container,n&&wn.containerOpened)},s.a.createElement("span",{style:Object.assign({},wn.addBT,n&&wn.addBTOpened),onClick:()=>d?p():i(!n)},s.a.createElement(se,null)),n&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{style:{textAlign:"center"}},b("Create")),s.a.createElement("div",{style:wn.buttonsRow},s.a.createElement("span",{style:wn.bt,key:"action",onClick:p},b("Action")),s.a.createElement("span",{style:{fontWeight:"normal"}},b("or")),s.a.createElement("span",{style:wn.bt,key:"condition",onClick:m},b("Condition")),s.a.createElement("span",{style:wn.closeBT,onClick:()=>i(!1)},s.a.createElement(v,{style:{pointerEvents:"none"},width:9,height:9})))))}));class Sn extends a.Component{constructor(e){super(e),this.shouldComponentUpdate=(e,t)=>!this.props.latestNode||e.latestNode===this.props.latestNode,this.onDblClick=e=>{e.target.classList.contains("event-node")&&(e.preventDefault(),this.toggle())},this.toggle=()=>{this.setState({opened:!this.state.opened})},this.close=()=>{this.setState({opened:!1})},this.onEditEvent=()=>{const{buID:e,updateBUNode:t,behavior:n}=this.props;let{value:a}=this.eventNameInput.current;const s=this.tagInputs.map((e=>e.current?e.current.value:""));" "===a[a.length-1]&&(a=a.substring(0,a.length-1)),t(e,{...n,event:a,tags:s})},this.addEventTag=()=>{this.tagInputs.push(s.a.createRef()),this.onEditEvent()},this.deleteEventTag=e=>{this.tagInputs.splice(e,1),this.onEditEvent()},this.onEditName=()=>{const{buID:e,updateBUNode:t,behavior:n}=this.props;let{value:a}=this.nodeNameInput.current;" "===a[a.length-1]&&(a=a.substring(0,a.length-1)),t(e,{...n,name:a})},this.deleteNode=()=>{const{deleteBUNode:e,behavior:t,buID:n}=this.props,{id:a}=t;e(n,a)},this.state={opened:!1},this.nodeNameInput=s.a.createRef(),this.eventNameInput=s.a.createRef(),this.tagInputs=[]}componentDidMount(){this.props.latestNode===this.props.action&&(this.setState({opened:!0}),setTimeout((()=>this.props.buTaskAdded()),100))}render(){const{opened:e}=this.state,{t:t,localVars:n,behavior:a,zIndex:i,buID:o,editorScale:l}=this.props,{handler:r,event:c,id:d,name:u,tags:p}=a,m={width:248,height:54,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,backgroundColor:"rgb(43, 44, 45)"};return s.a.createElement(_t.Spring,{from:m,to:e?{width:"auto",height:"auto",paddingTop:57,paddingRight:30,paddingBottom:30,paddingLeft:30,backgroundColor:"#2A2A2B"}:m,config:{tension:170,friction:24}},(a=>s.a.createElement(jn,{className:"event-node",opened:e?1:0,z:i,onDoubleClick:this.onDblClick,style:a},s.a.createElement(Tn,{style:{left:15}},s.a.createElement($t,null)),e?s.a.createElement(Ln,{style:{width:"100%"}},s.a.createElement(xi,{scale:l,style:{width:"calc(100% - 35px)"},defaultValue:u||t("Event"),placeholder:t("Event"),ref:this.nodeNameInput,onKeyDown:Object(L.j)(this.onEditName),onBlur:this.onEditName})):s.a.createElement(Ln,null,u||t("Event")),s.a.createElement(Dn,{scale:l,className:"bin",opened:e?1:0,onClick:this.deleteNode}),!e&&s.a.createElement(Tn,{style:{right:15},onClick:this.toggle},s.a.createElement(_,null)),e&&s.a.createElement(s.a.Fragment,null,s.a.createElement(vi,{scale:l,style:{width:248}},s.a.createElement(Bn,{htmlFor:"event-name"},"Event Name"),s.a.createElement(xi,{scale:l,id:"event-name",placeholder:t("Event Name"),defaultValue:c||null,ref:this.eventNameInput,onKeyDown:Object(L.j)(this.onEditEvent),onBlur:this.onEditEvent})),p&&p.map(((n,a)=>s.a.createElement(vi,{optional:1,scale:l,key:`${a}-${n}`},s.a.createElement(Bn,{scale:l,width:3.35},0===a&&t("Tags")),s.a.createElement("div",{style:{display:"flex",flex:1}},s.a.createElement("span",{style:{display:"flex",alignItems:"center",flex:1}},s.a.createElement(xi,{scale:l,defaultValue:n,placeholder:t("Tag"),ref:this.tagInputs[a],onBlur:this.onEditEvent,onKeyDown:Object(L.j)(this.onEditEvent)}),s.a.createElement(Nn,{scale:l,marginright:4,marginleft:11,nodeopened:e?1:0,onClick:()=>this.deleteEventTag(a)})))))),s.a.createElement(vi,{optional:1,scale:l,style:{justifyContent:p&&0!==p.length?"flex-end":"space-between"}},(!p||0===p.length)&&s.a.createElement(Bn,{scale:l,width:3.35},t("Tags")),s.a.createElement(ta,{scale:l,onClick:this.addEventTag})),s.a.createElement(Mn,{buID:o,editorScale:l,parentTask:d,arrayName:"handler",style:{marginTop:10,pointerEvents:"none"},actions:r,variables:n}),s.a.createElement(kn,{onClick:this.close},s.a.createElement(Cn,null))),!e&&s.a.createElement(Vt,{right:!0,small:!0},s.a.createElement("h5",null,u||t("Event"),s.a.createElement(qt,{right:!0})),s.a.createElement(Gt,null,s.a.createElement($t,{width:13,height:13,style:{marginRight:6}}),c||t("[Missing]"),p&&p.map((e=>""!==e&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),"- ",e))))))))}}const jn=Object(y.b)(_t.animated.div)`
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-width: 248px;
  height: 54px;
  width: 158px;
  background-color: rgb(43, 44, 45);
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  border-radius: 27px;
  z-index: ${e=>e.z};
  margin-bottom: 7px;
  pointer-events: all;

  &:not(:hover) .bin {
    display: none;
  }

  &:not(:hover) .node-tooltip {
    opacity: 0;
  }

  &:hover .node-tooltip {
    transition-delay: 0.4s;
  }

  ${e=>e.opened&&y.a`
    & .bin {
      display: inline !important;
    }
  `}
`,Cn=Object(y.b)(Rt)`
  width: 9px;
  height: 4.5px;
`,kn=y.b.span`
  width: 30px;
  height: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  position: absolute;
  top: 27px;
  transform: translate(-50%, -50%);
  right: 0px;
`,Dn=Object(y.b)(U)`
  margin-left: 12px;
  cursor: pointer;
  position: absolute;
  transform: translateY(-50%);
  right: ${e=>(e.opened?48:34)+"px"};
  top: ${e=>e.opened?"27px":"50%"};
`,Nn=Object(y.b)(U)`
  margin-left: ${e=>12*e.scale+"px"};
  cursor: pointer;
  width: ${e=>9*e.scale+"px"};
  height: ${e=>9*e.scale+"px"};
  margin-left: ${e=>e.scale*e.marginleft+"px"};
  margin-right: ${e=>e.scale*e.marginright+"px"};

  ${e=>e.nodeopened?"":y.a`
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: ${e=>34*e.scale+"px"};
  `}
`,Ln=y.b.span`
  font-size: 11px;
  max-width: 70%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  position: absolute;
  left: 50%;
  top: 27px;
  transform: translate(-50%, -50%);
  pointer-events: none;
`,Tn=y.b.span`
  position: absolute;
  top: 27px;
  transform: translateY(-50%);
  cursor: pointer;
  width: 9px;
  height: 9px;

  & > svg {
    vertical-align: super;
    width: 100%;
    height: 100%;
  }
`,Bn=y.b.label`
  font-size: 10px;
  color: rgba(189, 193, 210, 0.3);
  margin-right: 7px;
  margin-left: 3.5px;
  margin-top: 0px;
  margin-bottom: 0px;
  ${e=>e.width&&y.a`
    width: ${e=>e.scale*e.width+"rem"};
  `}
`,An={updateBUNode:N.V,deleteBUNode:N.E,buTaskAdded:N.y};var Rn=Object(u.b)(((e,t)=>{let{bu:n}=e,{buID:a,action:s}=t;return{behavior:Object(N.G)(n.entities.present.byIds[a].present,s),latestNode:n.ui.latestNode}}),An)(Object(h.d)()(Sn));const Pn=y.b.div`
  position: absolute;
  left: calc(100% - 34px);
  top: 20px;
  min-width: 248px;
`;var Fn=e=>{const t=Object(u.c)(),[n,i]=Object(a.useState)(0),{buState:o,buID:l}=e,[r]=Object(h.c)(),c=Object(a.useCallback)((()=>Object(N.x)(l,T.a.EVENT_LISTENER,o)(t)),[t,o,l]),{events:d,variables:p,editorScale:m}=e,b=n<d.length;return n!==d.length&&i(d.length),s.a.createElement(Pn,null,s.a.createElement(te,{style:{marginLeft:18,marginBottom:20,fontWeight:"bold"},onClick:c,icon:s.a.createElement(se,null),label:r("Add Event")}),d.map(((e,t)=>s.a.createElement(Rn,{buID:l,editorScale:m,zIndex:10+d.length-t,localVars:p,action:e.id,key:"event-"+t,index:t,isLast:t===d.length-1,forceOpen:b&&t===d.length-1}))))};const Un=Object(F.a)((e=>e.bu),((e,t)=>({buID:t.buID,actions:t.actions})),((e,t)=>{let{actions:n,buID:a}=t;return n.map((t=>({id:t,type:Object(N.L)(e.entities.present.byIds[a].present,t)})))})),$n=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const{buID:i,main:o,style:l,variables:r,children:c,parentTask:d,arrayName:u,buState:p,enableDroppable:m,editorScale:b,isCondition:h}=e,y=t.filter((e=>e.type!==T.a.EVENT_LISTENER)),g=t.filter((e=>e.type===T.a.EVENT_LISTENER));return s.a.createElement(Vn,Object.assign({},n&&n.droppableProps,{className:j()("noselect",{"main-behavior-wrapper":o}),id:d?`buAction-${d}-${u}`:"buState-"+p,main:o,editorScale:b,style:l,ref:n&&n.innerRef,isdragging:a&&a.isDragging}),y.length>0?y.map(((e,t)=>e.type===T.a.CONDITION?s.a.createElement(In,{buID:i,localVars:r,action:e.id,key:e.id,index:t,editorScale:b,enableDrag:m,isLast:t===y.length-1}):s.a.createElement(la,{buID:i,localVars:r,action:e.id,key:e.id,index:t,editorScale:b,enableDrag:m,isLast:t===y.length-1}))):s.a.createElement("div",{style:{width:248}}),!d&&s.a.createElement(Fn,{buID:i,variables:r,events:g,buState:p,editorScale:b}),c,n.placeholder,s.a.createElement(On,{buID:i,buState:p,parentTask:d,arrayName:u,actionsOnly:h}))},_n=e=>{const[t]=Object(a.useState)(E()()),{buID:n,actions:i}=e,o=Object(u.d)((e=>Un(e,{buID:n,actions:i}))),{parentTask:l,arrayName:r,buState:c,enableDroppable:d}=e;return d?s.a.createElement(gt.c,{droppableId:t,type:l?`buAction#${l}#${r}`:"buState#"+c},((t,n)=>$n(e,o,t,n))):$n(e,o)};_n.defaultProps={enableDroppable:!0};var Mn=_n;const Vn=y.b.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  transform-origin: center top 0px;
  max-width: 100%;

  ${e=>e.main&&y.a`
    position: absolute;
    /* top: calc(30% + 0px); */
    /* left: calc(50% + 0px); */
    background-color: rgb(24, 25, 25);
    border: 2px solid rgb(255, 51, 102);
    border-radius: 10px;
    padding: 45px;
    box-shadow: rgba(0, 0, 0, 0.5) 0px 4px 15px 1px;
    transform: translate(-50%, 0px) scale(1);
    max-width: none;
    transform: ${e=>e.editorScale&&`translate(-50%, 0) scale(${e.editorScale})`};
  `}
  & > div:not([class]) {
    transform: ${e=>e.editorScale&&`scale(${1/e.editorScale})`} !important;
    width: 248px !important;
    /* height: 54px !important; */
  }

  & > div[data-react-beautiful-dnd-placeholder="1"] {
    height: 54px !important;
    transform: ${e=>e.editorScale&&`scale(${1/e.editorScale})`} !important;
  }
  
`,qn=Object(F.a)((e=>e.bu),((e,t)=>t),((e,t)=>{let{buID:n,buStateID:a}=t;return e.entities.present.byIds[n].present.buStates.byIds[a]})),Gn=Object(F.a)((e=>e.bu),((e,t)=>t),((e,t)=>e.ui[t].buCanvasScale));var Kn=s.a.memo((e=>{const[t]=Object(h.c)(),n=Object(u.c)(),{buID:o,buStateID:l}=e,r=Object(u.d)((e=>qn(e,{buID:o,buStateID:l}))),c=Object(u.d)((e=>Gn(e,o))),{id:d,name:p,variables:m,behavior:b}=r,[y,g]=Object(a.useState)(!1),f=s.a.createRef(),E=Object(a.useCallback)((()=>{const e=f.current.value;if(e!==r.name){const t={...r,name:e};Object(N.W)(o,t)(n)}g(!1)}),[o,r,n,f]),x=Object(a.useCallback)((()=>g(!0)),[]),I=Object(a.useCallback)((e=>f.current!==e.target&&E()),[E,f]);Object(a.useEffect)((()=>(Object(i.findDOMNode)(document.getElementsByClassName("bu-state-canvas")[0]).focus(),document.activeCanvas="bu-state-canvas",y?document.addEventListener("click",I,!1):document.removeEventListener("click",I,!1),()=>{document.removeEventListener("click",I,!1),document.activeCanvas="bu-canvas"})),[y,I]);const w=Object(a.useCallback)((e=>{const t=Array.from(document.querySelectorAll(`#${e.type.replace(/#/g,"-")} div[data-react-beautiful-dnd-draggable]`));e.destination?(t.splice(e.destination.index,0,{}),t.forEach(((t,n)=>{n!==e.destination.index&&t&&t.style&&(e.destination.index,e.source.index,n>e.destination.index&&(t.style.transform="translate(0, 61px)"))}))):void 0===e.destination&&(t.splice(e.source.index,0,{}),t.forEach(((t,n)=>{n<=e.source.index||!t||!t.style||(t.style.transform="translate(0, 61px)")})))}),[]),O=Object(a.useCallback)((e=>{if(!e.source||!e.destination)return;const[t,a,s]=e.type.split("#");"buAction"===t?Object(N.R)(o,null,a,s,e.source.index,e.destination.index)(n):Object(N.R)(o,a,null,null,e.source.index,e.destination.index)(n)}),[o,n]),S=Object(a.useCallback)((()=>Object(N.A)(o,r.id)(n)),[o,r.id,n]),j=Object(a.useCallback)((e=>{Object(D.l)(o,e)(n)}),[o,n]),C=Object(a.useCallback)((e=>{Object(D.k)(o,e)(n)}),[o,n]);return s.a.createElement(gt.a,{onDragEnd:O,onDragStart:w,onDragUpdate:w},s.a.createElement(Hn,{className:"noselect bu-state-canvas",tabIndex:"0",onKeyDown:Object(L.k)({Escape:e=>"bu-state-canvas"!==e.target.id&&S()})},y?s.a.createElement("input",{ref:f,type:"text",defaultValue:p,style:Object.assign({},zn.canvasTitle,{color:"#FFF"}),onKeyDown:Object(L.j)(E)}):s.a.createElement("span",{style:zn.canvasTitle,onClick:x},s.a.createElement("span",{style:{cursor:"text"}},p),s.a.createElement(Ce,{style:{marginLeft:5,cursor:"pointer"}})),s.a.createElement(Ie,{noSelection:!0,onScaleUpdate:j,onPositionUpdate:C,canvasID:"bu-state-canvas",tabIndex:"0"},s.a.createElement(Mn,{main:!0,style:{top:"30%",left:"50%"},editorScale:c,buState:d,buID:o,key:p,actions:b,variables:m})),s.a.createElement(Wn,{onClick:S,label:t("Close State"),icon:s.a.createElement(v,{style:{color:T.i.LIGHT_GREY},width:10,height:10})})))}));const zn={canvasTitle:{fontFamily:"Lato",position:"absolute",top:10,textAlign:"center",display:"flex",alignItems:"center",left:"50%",transform:"translateX(-50%)",fontSize:18,color:"#535353",zIndex:100}},Yn=y.b.span`
  transition: height ease-in 0.25s;
  border-left: 1px solid #808080;
  border-right: 1px solid #808080;
  height: ${e=>(e.show?10:0)+"px"};
  position: absolute;
  left: 50%;
  bottom: -10px;
  transform: translateX(-50%);
`,Hn=y.b.div`
  display: flex;
  flex: 1;
  position: relative;
  height: 100%;
  overflow: hidden;
  font-weight: bold;
  font-size: 12px;
  font-family: Lato;
  box-shadow: -6px 0 5px -5px #000000;
  border-left: 2px solid #393B3B;
`,Wn=Object(y.b)(te)`
  position: absolute;
  top: 22px;
  left: 22px;
`;class Zn extends a.Component{constructor(e){super(e),this.onClickDoc=e=>{e.target.classList.contains("bu-state-canvas")&&this.onClickOutside()},this.onClickOutside=()=>{const{editing:e}=this.state;e&&this.onEditName(!0)},this.onDblClick=e=>{e.target.classList.contains("bu-action-node")&&(e.preventDefault(),this.toggle())},this.toggle=()=>{this.setState({editing:!this.state.editing})},this.endEdit=()=>{const{behavior:e}=this.props,{type:t}=e;switch(t){case T.a.CALL_FUNCTION:this.onEditFunction();break;case T.a.ASSIGN_VARIABLE:this.onEditVariable();break;case T.a.EVENT_TRIGGER:this.onEditEvent()}this.setState({editing:!1})},this.onEditName=()=>{const{dispatchUpdateBUNode:e,buID:t,behavior:n}=this.props,a=this.getTaskNameFromInput(),s={...n,name:a};a!==n.name&&e(t,s)},this.onEditVariable=e=>{const{dispatchUpdateBUNode:t,buID:n,behavior:a}=this.props,{variable:s}=a,{value:i}=this.variableNameInput.current,{value:o}=this.variableValueInput.current,l=this.getTaskNameFromInput(),r={...a,name:l,variable:{...s,name:i,value:o}};"boolean"==typeof e&&(r.variable.global=e),t(n,r)},this.onEditFunction=()=>{const{dispatchUpdateBUNode:e,buID:t,behavior:n}=this.props,{type:a}=n,{value:s}=this.functionNameInput.current,{value:i}=this.fnClassNameInput.current,{value:o}=this.localAttrNameInput.current,l=this.getTaskNameFromInput();if(a!==T.a.CALL_FUNCTION)return;const r=this.functionArgs?this.functionArgs.map(((e,t)=>({type:"value",value:e.current?e.current.value:""}))):[];e(t,{...n,name:l,className:i,localAttrName:o,functionName:s,params:r})},this.onSetDestinationState=e=>{const{dispatchUpdateBUNode:t,buID:n,behavior:a}=this.props,{value:s}=e;t(n,{...a,name:this.getTaskNameFromInput(),value:s})},this.onScriptUpdate=()=>{const{dispatchUpdateBUNode:e,buID:t,behavior:n}=this.props;e(t,{...n,script:this.scriptInput.current.editor.getValue(),scriptType:"lua"})},this.onEditEvent=()=>{const{buID:e,behavior:t,dispatchUpdateBUNode:n}=this.props,{type:a}=t,{value:s}=this.eventNameInput.current,i=this.getTaskNameFromInput();if(a===T.a.EVENT_TRIGGER){const{value:a}=this.eventArgInput.current,o=this.tagInputs?this.tagInputs.map((e=>e.current?e.current.value:"")):[];n(e,{...t,name:i,event:s,value:a,tags:o})}else a!==T.a.FUSE_EVENT&&a!==T.a.UNFUSE_EVENT||n(e,{...t,name:i,event:s})},this.onChangeType=e=>{const{dispatchUpdateBUNode:t,buID:n,behavior:a}=this.props,{type:i}=a,{value:o}=e,l=this.getTaskNameFromInput();if(o===i)return;t(n,{...a,name:l,type:o});const{params:r,tags:c}=a;o===T.a.CALL_FUNCTION?(this.functionArgsTypes=r?r.map((()=>s.a.createRef())):[],this.functionArgs=r?r.map((()=>s.a.createRef())):[]):o===T.a.EVENT_TRIGGER&&(this.tagInputs=c?c.map((()=>s.a.createRef())):[])},this.addArgument=()=>{this.functionArgs.push(s.a.createRef()),this.functionArgsTypes.push(s.a.createRef()),this.onEditFunction()},this.deleteArg=e=>{this.functionArgs.splice(e,1),this.functionArgsTypes.splice(e,1),this.onEditFunction()},this.addEventTag=()=>{this.tagInputs.push(s.a.createRef()),this.onEditEvent()},this.deleteEventTag=e=>{this.tagInputs.splice(e,1),this.onEditEvent()},this.deleteNode=()=>{const{dispatchDeleteBUNode:e,behavior:t,buID:n}=this.props,{id:a}=t;e(n,a)};const{behavior:t}=e,{variable:n}=t;this.state={editing:!1,variableIsGlobal:!!n&&n.global},this.nameInput=s.a.createRef(),this.eventNameInput=s.a.createRef(),this.eventArgInput=s.a.createRef(),this.functionNameInput=s.a.createRef(),this.localAttrNameInput=s.a.createRef(),this.fnClassNameInput=s.a.createRef(),this.variableNameInput=s.a.createRef(),this.variableValueInput=s.a.createRef(),this.scriptInput=s.a.createRef()}componentDidMount(){const{behavior:e,latestNode:t,action:n,buTaskAdded:a}=this.props,{type:i,params:o,tags:l}=e;this.functionArgsTypes=[],this.functionArgs=[],this.tagInputs=[],i===T.a.CALL_FUNCTION?(this.functionArgsTypes=o?o.map((()=>s.a.createRef())):[],this.functionArgs=o?o.map((()=>s.a.createRef())):[]):i===T.a.EVENT_TRIGGER&&(this.tagInputs=l?l.map((()=>s.a.createRef())):[]),t===n&&(this.setState({editing:!0}),setTimeout(a,100))}getTaskNameFromInput(){let{value:e}=this.nameInput.current;return" "===e[e.length-1]&&(e=e.substring(0,e.length-1)),e}optionalPortal(e,t){return"fixed"===e.position?(this._dragEl||(this._dragEl=document.getElementById("draggable")),Object(i.createPortal)(t,this._dragEl)):t}renderNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{t:n,isLast:a,behavior:i,buStates:o}=this.props,{name:l,type:r,variable:c,value:d,functionName:u,className:p,localAttrName:m,params:b,event:h,tags:y,script:g}=i,{editing:f}=this.state,E=n(T.a[r]),v=t&&t.isDragging?this.props.editorScale:1;return s.a.createElement(_t.Spring,{from:{height:T.L},to:f?{height:"auto"}:{height:T.L},config:{tension:170,friction:24}},(i=>s.a.createElement(aa,Object.assign({className:"bu-action-node",ref:e&&e.innerRef,onDoubleClick:this.onDblClick,scale:v,editorscale:this.props.editorScale?1:0,editing:f?1:0,islast:a?1:0},e&&e.draggableProps,e&&e.dragHandleProps,{style:Object.assign({},i,e&&e.draggableProps.style)}),!f&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Jn,{scale:v},r===T.a.CALL_FUNCTION&&s.a.createElement(an,null),r===T.a.SCRIPT&&s.a.createElement(en,null),r===T.a.ASSIGN_VARIABLE&&s.a.createElement(sn,null),r===T.a.EVENT_TRIGGER&&s.a.createElement($t,null),r===T.a.SET_STATE&&s.a.createElement(on,null),r===T.a.FUSE_EVENT&&s.a.createElement(tn,null),r===T.a.UNFUSE_EVENT&&s.a.createElement(nn,null)),s.a.createElement(na,{scale:v,className:"noselect"},l||E),s.a.createElement(Qn,{className:"bin",scale:v,onClick:this.deleteNode}),s.a.createElement(Xn,{onClick:this.toggle,scale:v})),f&&s.a.createElement(s.a.Fragment,null,s.a.createElement(vi,{scale:v},s.a.createElement(xi,{scale:v,fontSize:14,defaultValue:l,placeholder:n("Task Name"),ref:this.nameInput,onBlur:this.onEditName,onKeyDown:Object(L.k)({Enter:this.onEditName,Escape:this.endEdit})}),s.a.createElement(Qn,{className:"bin",scale:v,nodeopened:1,onClick:this.deleteNode}),s.a.createElement("span",{style:{width:30*v,height:30*v,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:this.endEdit},s.a.createElement(ea,{scale:v}))),s.a.createElement(vi,{scale:v},s.a.createElement(Xt,{scale:v,defaultValue:{value:r,label:E},options:[{value:T.a.ASSIGN_VARIABLE,label:n(T.a.ASSIGN_VARIABLE)},{value:T.a.CALL_FUNCTION,label:n(T.a.CALL_FUNCTION)},{value:T.a.SET_STATE,label:n(T.a.SET_STATE)},{value:T.a.EVENT_TRIGGER,label:n(T.a.EVENT_TRIGGER)},{value:T.a.FUSE_EVENT,label:n(T.a.FUSE_EVENT)},{value:T.a.UNFUSE_EVENT,label:n(T.a.UNFUSE_EVENT)},{value:T.a.SCRIPT,label:n(T.a.SCRIPT)}],onChange:this.onChangeType})),s.a.createElement("hr",null),r===T.a.ASSIGN_VARIABLE&&s.a.createElement(vi,{scale:v},s.a.createElement(sa,null,s.a.createElement(ia,{scale:v},n("Name")),s.a.createElement(xi,{scale:v,width:60,placeholder:n("Variable"),defaultValue:c&&c.name,ref:this.variableNameInput,onBlur:this.onEditVariable,onKeyDown:Object(L.j)(this.onEditVariable)})),s.a.createElement(sa,null,s.a.createElement(ia,{scale:v,marginleft:8},n("Value")),s.a.createElement(Pt,{style:{marginright:5},titleOff:n("Local"),titleOn:n("Global"),iconOff:s.a.createElement("span",null,"G"),iconOn:s.a.createElement("span",{style:{color:"#FFF"}},"G"),checked:!!c&&c.global,onToggle:e=>{this.onEditVariable(e)}}),s.a.createElement(xi,{scale:v,width:45,defaultValue:c&&c.value,placeholder:n("Value"),ref:this.variableValueInput,onBlur:this.onEditVariable,onKeyDown:Object(L.j)(this.onEditVariable)}))),r===T.a.CALL_FUNCTION&&s.a.createElement(s.a.Fragment,null,s.a.createElement(vi,{scale:v},s.a.createElement(ia,{scale:v,width:4},n("Class Name")),s.a.createElement(xi,{scale:v,placeholder:n("Class"),defaultValue:p,ref:this.fnClassNameInput,onBlur:this.onEditFunction,onKeyDown:Object(L.j)(this.onEditFunction)})),s.a.createElement(vi,{scale:v},s.a.createElement(ia,{scale:v,width:4},n("Function Name")),s.a.createElement(xi,{scale:v,placeholder:n("Function"),defaultValue:u,ref:this.functionNameInput,onBlur:this.onEditFunction,onKeyDown:Object(L.j)(this.onEditFunction)})),s.a.createElement(vi,{scale:v,optional:1},s.a.createElement(ia,{scale:v,width:4},n("Local Attr")),s.a.createElement(xi,{scale:v,placeholder:`${n("Local Attr")} (${n("Optional")})`,defaultValue:m,ref:this.localAttrNameInput,onBlur:this.onEditFunction,onKeyDown:Object(L.j)(this.onEditFunction)})),b&&b.map(((e,t)=>s.a.createElement(vi,{scale:v,key:`${t}-${e.value}`,optional:1},s.a.createElement(ia,{scale:v,width:4},0===t&&n("Arguments")),s.a.createElement("div",{style:{display:"flex",flex:1}},"value"===e.type?s.a.createElement("span",{style:{display:"flex",alignItems:"center",flex:1}},s.a.createElement(xi,{scale:v,defaultValue:e.value&&e.value,placeholder:n("Argument"),ref:this.functionArgs[t],onBlur:this.onEditFunction,onKeyDown:Object(L.j)(this.onEditFunction)}),s.a.createElement(Qn,{scale:v,marginright:4,marginleft:11,nodeopened:1,onClick:e=>this.deleteArg(t)})):s.a.createElement(Xt,{scale:v,ref:this.functionArgs[t],onChange:this.onSetDestinationState,defaultValue:{value:e.reference,label:e.reference},options:o.map((e=>({value:e.id,label:e.name})))}))))),s.a.createElement(vi,{scale:v,optional:1,style:{justifyContent:b&&0!==b.length?"flex-end":"space-between"}},(!b||0===b.length)&&s.a.createElement(ia,{scale:v},n("Arguments")),s.a.createElement(ta,{scale:v,onClick:this.addArgument}))),r===T.a.SET_STATE&&s.a.createElement(vi,{scale:v},s.a.createElement(Xt,{scale:v,defaultValue:{value:d&&o.some((e=>e.id===d))?d:o[0].id,label:d&&o.some((e=>e.id===d))?o.find((e=>e.id===d)).name:o[0].name},options:o.map((e=>({value:e.id,label:e.name}))),onChange:this.onSetDestinationState})),r===T.a.EVENT_TRIGGER&&s.a.createElement(s.a.Fragment,null,s.a.createElement(vi,{scale:v},s.a.createElement(ia,{scale:v,width:3},"Event"),s.a.createElement(xi,{scale:v,defaultValue:h,placeholder:n("Event"),ref:this.eventNameInput,onBlur:this.onEditEvent,onKeyDown:Object(L.j)(this.onEditEvent)})),s.a.createElement(vi,{scale:v,optional:1},s.a.createElement(ia,{scale:v,width:3},"Value"),s.a.createElement(xi,{scale:v,defaultValue:d,placeholder:`${n("Value")} (${n("Optional")})`,ref:this.eventArgInput,onBlur:this.onEditEvent,onKeyDown:Object(L.j)(this.onEditEvent)})),y&&y.map(((e,t)=>s.a.createElement(vi,{scale:v,key:`${t}-${e}`,optional:1},s.a.createElement(ia,{scale:v,width:3},0===t&&n("Tags")),s.a.createElement("div",{style:{display:"flex",flex:1}},s.a.createElement("span",{style:{display:"flex",alignItems:"center",flex:1}},s.a.createElement(xi,{scale:v,defaultValue:e,placeholder:n("Tag"),ref:this.tagInputs[t],onBlur:this.onEditEvent,onKeyDown:Object(L.j)(this.onEditEvent)}),s.a.createElement(Qn,{scale:v,marginright:4,marginleft:11,nodeopened:1,onClick:()=>this.deleteEventTag(t)})))))),s.a.createElement(vi,{optional:1,scale:v,style:{justifyContent:y&&0!==y.length?"flex-end":"space-between"}},(!y||0===y.length)&&s.a.createElement(ia,{scale:v,width:3},n("Tags")),s.a.createElement(ta,{scale:v,onClick:this.addEventTag}))),(r===T.a.FUSE_EVENT||r===T.a.UNFUSE_EVENT)&&s.a.createElement(vi,{scale:v},s.a.createElement(ia,{scale:v,width:3},n("Event")),s.a.createElement(xi,{scale:v,defaultValue:h,placeholder:n("Event"),ref:this.eventNameInput,onBlur:this.onEditEvent,onKeyDown:Object(L.j)(this.onEditEvent)})),r===T.a.SCRIPT&&s.a.createElement(Mt.UnControlled,{defaultValue:g||"",options:{lineNumbers:!0,lineWrapping:!0,theme:"material",mode:"lua"},ref:this.scriptInput,onBlur:this.onScriptUpdate})),s.a.createElement(Yn,{show:a||t&&t.isDragging?0:1,scale:v}),!f&&s.a.createElement(Vt,null,s.a.createElement("h5",null,l||n(T.a[r]),s.a.createElement(qt,null)),s.a.createElement("span",null,n(T.a[r])),s.a.createElement("br",null),s.a.createElement("br",null),r===T.a.FUSE_EVENT&&s.a.createElement(Gt,null,s.a.createElement(tn,{width:13,height:13,style:{marginRight:6}}),h||n("[Missing]")),r===T.a.UNFUSE_EVENT&&s.a.createElement(Gt,null,s.a.createElement(nn,{width:13,height:13,style:{marginRight:6}}),h||n("[Missing]")),r===T.a.EVENT_TRIGGER&&s.a.createElement(Gt,null,s.a.createElement($t,{width:13,height:13,style:{marginRight:6}}),h||n("[Missing]"),d&&`(${d})`,y.map((e=>""!==e&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),"- ",e)))),r===T.a.SET_STATE&&s.a.createElement(Gt,null,s.a.createElement(on,{width:13,height:13,style:{marginRight:6}}),o.some((e=>e.id===d))?o.find((e=>e.id===d)).name:n("[Missing]")),r===T.a.ASSIGN_VARIABLE&&s.a.createElement(Gt,null,s.a.createElement(sn,{width:13,height:13,style:{marginRight:6}}),c.name||n("[Missing]")," = ",c.value||n("[Missing]")),r===T.a.CALL_FUNCTION&&s.a.createElement(Gt,null,s.a.createElement(an,{width:13,height:13,style:{marginRight:6}}),p?p+".":""," ",u?u+"(":n("[Missing]")+"(",b&&b.map(((e,t)=>`${e.value}${t<b.length-1?", ":""}`))," ",")",m&&s.a.createElement("br",null)," ",m&&`${n("Local Attribute")}: ${m}`)))))}render(){const{behavior:e,index:t,enableDrag:n}=this.props,{id:a}=e,{editing:i}=this.state;return s.a.createElement(s.a.Fragment,null,n?s.a.createElement(gt.b,{draggableId:a,index:t,isDragDisabled:i},((e,t)=>s.a.createElement(s.a.Fragment,null,this.optionalPortal(e.draggableProps.style,this.renderNode(e,t))))):this.renderNode())}}const Jn=y.b.span`
  position: absolute;
  cursor: pointer;
  top: 50%;
  transform: translateY(-50%);
  display: inline-flex;
  align-items: center;
  left: ${e=>15*e.scale+"px"};
  width: ${e=>11*e.scale+"px"};
  height: ${e=>11*e.scale+"px"};

  & > svg {
    vertical-align: super;
    width: 100%;
    height: 100%;
  }
`,Xn=Object(y.b)(_)`
  position: absolute;
  cursor: pointer;
  top: 50%;
  transform: translateY(-50%);
  right: ${e=>15*e.scale+"px"};
  width: ${e=>9*e.scale+"px"};
  height: ${e=>9*e.scale+"px"};
`,Qn=Object(y.b)(U)`
  margin-left: ${e=>12*e.scale+"px"};
  cursor: pointer;
  width: ${e=>9*e.scale+"px"};
  height: ${e=>9*e.scale+"px"};
  margin-left: ${e=>e.scale*e.marginleft+"px"};
  margin-right: ${e=>e.scale*e.marginright+"px"};

  ${e=>e.nodeopened?"":y.a`
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: ${e=>34*e.scale+"px"};
  `}
`,ea=Object(y.b)(Rt)`
  width: ${e=>9*e.scale+"px"};
  height: ${e=>4.5*e.scale+"px"};
`,ta=Object(y.b)(se)`
  width: ${e=>7.5*e.scale+"px"};
  height: ${e=>7.5*e.scale+"px"};
  cursor: pointer;
  margin-right: ${e=>4.5*e.scale+"px"};
`,na=y.b.span`
  font-size: ${e=>11*e.scale+"px"};
  max-width: 70%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
`,aa=Object(y.b)(_t.animated.div)`
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: all;
  /* height: ${e=>54*e.scale+"px"}; */
  width: ${e=>248*e.scale+"px"};
  background-color: #2B2C2D;
  box-shadow: rgba(0, 0, 0, 0.2) 0px ${e=>3*e.scale+"px"} ${e=>15*e.scale+"px"} 0px;
  border-radius: ${e=>12*e.scale+"px"};
  margin-bottom: ${e=>7*e.scale+"px"};
  position: relative;
  outline: none;
  transition: background-color 0.5s ease-in;

  & .react-codemirror2 {
    width: 100%;
    height: 300px;
  }
  & .react-codemirror2 .CodeMirror {
    width: ${e=>`calc(100% * ${e.editorscale})`};
    height: ${e=>`calc(300px * ${e.editorscale})`};
    transform-origin: top left;
    transform: ${e=>`scale(${1/e.editorscale})`};
    border-radius: 7px;
  }

  &:not(:hover) .bin {
    display: none;
  }

  &:not(:hover) .node-tooltip {
    opacity: 0;
  }

  &:hover .node-tooltip {
    transition-delay: 0.4s;
  }

  ${e=>e.editing&&y.a`
    flex-direction: column;
    align-items: flex-start;
    /* height: auto; */
    padding: ${e=>7*e.scale+"px"};
    & .bin {
      display: inline !important;
    }
  `}

  ${e=>e.islast&&y.a`
    margin-bottom: 0;
  `}
`,sa=y.b.div`
  display: flex;
  align-items: center;
  flex: 1;
`,ia=y.b.label`
  font-size: ${e=>e.scale*(e.fontSize||10)+"px"};
  color: rgba(189, 193, 210, 0.3);
  margin-right: ${e=>e.scale*(e.marginleft||8)+"px"};
  margin-left: ${e=>e.scale*(e.marginright||4)+"px"};
  margin-top: 0px;
  margin-bottom: 0px;

  ${e=>e.width&&y.a`
    width: ${e=>e.scale*e.width+"rem"};
  `}
`;Zn.defaultProps={enableDrag:!0};const oa={dispatchUpdateBUNode:N.V,dispatchDeleteBUNode:N.E,buTaskAdded:N.y};var la=Object(u.b)(((e,t)=>{let{bu:n}=e,{action:a,buID:s}=t;return{behavior:Object(N.G)(n.entities.present.byIds[s].present,a),buStates:Object(N.K)(n.entities.present.byIds[s].present),latestNode:n.ui.latestNode}}),oa)(Object(h.d)()(Zn)),ra=s.a.memo((e=>{const{hide:t,hideLabel:n,arr:i,selectFrom:o,propName:l,label:r,placeholder:c,onFocus:d,validateOnBlur:u,onValidate:p,onEscape:m,onDelete:b,onAdd:y,onCreateOption:g,onInnerPropToggle:f,children:E}=e,v=i.map((()=>s.a.createRef())),{t:x}=Object(h.c)(),I=Object(a.useCallback)((e=>{if(!p)return;const t=v[e].current,n=[...i];"object"==typeof n[e]&&n[e].hasOwnProperty("value")?n[e]={...n[e],value:t.value}:n[e]=t.value,p(l,n,e)}),[i,v,p,l]),w=Object(a.useCallback)(((e,t)=>{if(!p)return;const n=[...i];n[e]=t,p(l,n,e)}),[i,p,l]);return!t&&s.a.createElement(s.a.Fragment,null,!E&&i.map(((e,t)=>{let a="",i=-1,p=[];if("string"==typeof e)a=e,i=t;else{if("object"!=typeof e||!e.hasOwnProperty("value"))return null;a=e.value,i=e.id,p=Object.keys(e),p.splice(p.indexOf("id"),1),p.splice(p.indexOf("value"),1)}const h=s.a.createElement(vi,{key:`${i}-${a}`},!n&&s.a.createElement(da,{style:{flex:.25}},0===t&&r),s.a.createElement("div",{style:{display:"flex",flex:n?1:.75,alignItems:"center"}},o?s.a.createElement(Xt,{isSearchable:!0,isCreatable:!0,onCreateOption:e=>g&&g(e,t),defaultValue:a&&o.some((e=>e.id===a))?{value:i,label:o.find((e=>e.id===a)).value}:null,options:o.map((e=>({value:e.id,label:e.value}))),onChange:e=>w(t,e.value)}):s.a.createElement(xi,{style:{width:"100%"},scale:1,defaultValue:a&&a,placeholder:c||"",ref:v[t],onFocus:d,onBlur:()=>u&&I(t),onKeyDown:Object(L.k)({Enter:()=>I(t),Escape:()=>m})}),s.a.createElement(ca,{marginright:4,marginleft:11,nodeopened:1,onClick:()=>b&&b(i)})));return p.length>0?s.a.createElement(Oa,{key:`${i}-${a}`},h,p.map((t=>"boolean"==typeof e[t]?s.a.createElement(vi,{nospace:1,key:`${i}-${a}-${t}`},s.a.createElement("input",{style:{marginRight:5},type:"checkbox",checked:e[t],onChange:n=>f&&f(i,{...e,[t]:n.currentTarget.checked})}),s.a.createElement(da,{style:{color:T.i.WHITE,fontWeight:"bold"}},x(`${l}-${t}`))):null))):h})),E?i.length>0&&s.a.createElement("span",{style:{display:"block",marginBottom:8}},s.a.createElement(da,null,r)):null,E&&E.map(((e,t)=>s.a.createElement(s.a.Fragment,{key:e.key},s.a.createElement(vi,{style:{flexWrap:"nowrap"}},e,s.a.createElement(ca,{marginright:4,marginleft:11,nodeopened:1,onClick:()=>b&&b(t)}))))),s.a.createElement(vi,{style:{justifyContent:0===i.length?"space-between":"flex-end"}},0===i.length&&s.a.createElement(da,null,!n&&r),s.a.createElement(ta,{scale:1,onClick:y})))}));const ca=Object(y.b)(U)`
  margin-left: 12px;
  cursor: pointer;
  width: 9px;
  height: 9px;
  margin-left: ${e=>e.marginleft+"px"};
  margin-right: ${e=>e.marginright+"px"};

  ${e=>e.nodeopened?"":y.a`
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: 34px;
  `}
`,da=y.b.span`
  font-size: 10px;
  color: rgba(189, 193, 210, 0.3);
  margin-right: 0px;
  margin-left: 4px;
  margin-top: 0px;
  margin-bottom: 0px;

  ${e=>e.width&&y.a`
    width: ${e=>e.width+"px"};
    min-width: ${e=>e.width+"px"};
  `}
`;var ua=n(25),pa=s.a.memo((e=>{const{procID:t,jump:n,showSource:i,allNodes:o,allEvents:l,onUpdate:r}=e,{actions:c}=n,{t:d}=Object(h.c)(),p=Object(u.c)(),m=Object(a.useCallback)((()=>Object(ke.pb)(t,{...n,actions:[...n.actions,{type:"",taskID:"",lockerID:""}]})(p)),[p,n,t]),b=Object(a.useCallback)((e=>Object(ke.pb)(t,{...n,actions:n.actions.filter(((t,n)=>n!==e))})(p)),[p,n,t]),y=Object(a.useCallback)(((e,a)=>Object(ke.pb)(t,{...n,actions:n.actions.map(((t,n)=>n!==e?t:a))})(p)),[p,n,t]),g=Object(a.useCallback)((e=>{const a=Object(ua.d)(t,"events",e,{log:!0})(p);Object(ke.pb)(t,{...n,event:a})(p)}),[p,n,t]);return s.a.createElement(Oa,null,!!i&&s.a.createElement(vi,null,s.a.createElement("span",{style:{flex:.34}},s.a.createElement(wa,null,d("Jump From"))),s.a.createElement("span",{style:{flex:.66}},s.a.createElement(Xt,{defaultValue:{value:n.from,label:n.fromName},onChange:e=>r({...n,from:e.value}),options:o.filter((e=>e.id!==n.to)).map((e=>({value:e.id,label:e.name})))}))),s.a.createElement(vi,null,s.a.createElement("span",{style:{flex:.34}},s.a.createElement(wa,null,d("On Event"))),s.a.createElement("span",{style:{flex:.66}},s.a.createElement(Xt,{isSearchable:!0,isCreatable:!0,onCreateOption:e=>g(e),value:n.event&&l.some((e=>e.id===n.event))?{value:n.event,label:l.find((e=>e.id===n.event)).value}:null,options:l.map((e=>({value:e.id,label:e.value}))),onChange:e=>r({...n,event:e.value})}))),s.a.createElement(vi,null,s.a.createElement("span",{style:{flex:.34}},s.a.createElement(wa,null,d("Jump To"))),s.a.createElement("span",{style:{flex:.66}},s.a.createElement(Xt,{defaultValue:{value:n.to,label:n.toName},onChange:e=>r({...n,to:e.value}),options:o.filter((e=>e.id!==n.from)).map((e=>({value:e.id,label:e.name})))}))),s.a.createElement("br",null),s.a.createElement(ra,{arr:c,propName:"actions",label:d("Actions"),onAdd:m,onDelete:b},c.map(((e,t)=>s.a.createElement(ma,{className:"action",key:t},s.a.createElement(Xt,{defaultValue:{value:e.type,label:d(e.type)},onChange:n=>y(t,{...e,type:n.value}),options:Object.keys(T.u).map((e=>({value:T.u[e],label:d(T.u[e])})))}),s.a.createElement(vi,null,s.a.createElement(Xt,{defaultValue:{value:e.taskID,label:e.taskID&&o.find((t=>t.id===e.taskID)).name},onChange:n=>y(t,{...e,taskID:n.value}),options:o.map((e=>({value:e.id,label:e.name})))})),(e.type===T.u.UNLOCK||e.type===T.u.LOCK)&&s.a.createElement(vi,null,s.a.createElement("span",{style:{flex:.25}},s.a.createElement(wa,null,d(e.type===T.u.UNLOCK?"From":"To"))),s.a.createElement("span",{style:{flex:.75}},s.a.createElement(Xt,{defaultValue:{value:e.lockerID,label:e.lockerID&&o.find((t=>t.id===e.lockerID)).name},onChange:n=>y(t,{...e,lockerID:n.value}),options:o.map((e=>({value:e.id,label:e.name})))}))))))))}));const ma=y.b.div`
  width: 100%;
  background-color: #262829;
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  border-radius: 12px;
  padding: 7px;
`;var ba=n(28),ha=s.a.memo((e=>{const{procID:t,node:n,inputRefs:i,isCIE:o,id:l,bu:r,editBU:c,onUpdate:d,onInputFocus:p,onEsc:m,onBUChange:b}=e,{t:y}=Object(h.c)(),g=Object(u.c)(),f=Object(u.d)((e=>Object(N.S)(e,t))),E=Object(u.d)((e=>Object(ba.f)(e,r.id)));r.name=E?E.name:"";const v=Object(a.useCallback)((()=>o?Object(ke.qb)(t,{...n,cies:{...n.cies,values:n.cies.values.map(((e,t)=>t===l?{...e,params:[...e.params,Object(ke.g)()]}:e))}})(g):Object(ke.qb)(t,{...n,behaviorUnit:{...n.behaviorUnit,params:[...n.behaviorUnit.params,Object(ke.g)()]}})(g)),[o,t,n,g,l]),x=Object(a.useCallback)((e=>o?Object(ke.qb)(t,{...n,cies:{...n.cies,values:n.cies.values.map(((e,t)=>t===l?{...e,params:e.params.filter(((e,n)=>n!==t))}:e))}})(g):Object(ke.qb)(t,{...n,behaviorUnit:{...n.behaviorUnit,params:n.behaviorUnit.params.filter(((t,n)=>n!==e))}})(g)),[o,t,n,g,l]),I=Object(a.useCallback)(((e,a)=>o?Object(ke.qb)(t,{...n,cies:{...n.cies,values:n.cies.values.map(((t,n)=>n===l?{...r,params:r.params.map((t=>t.id===e?{...t,type:a}:t))}:t))}})(g):Object(ke.qb)(t,{...n,behaviorUnit:{...r,params:r.params.map((e=>e.id===l?{...e,type:a}:e))}})(g)),[r,g,l,o,n,t]);let w=[...f.map((e=>({value:e.id,label:e.name||"Untitled"}))),{value:"import",label:s.a.createElement("span",{style:{display:"inline-flex",alignItems:"center"}},s.a.createElement(oe,{style:{marginLeft:-7},width:30}),y("Import State Machine"))},{value:"new",label:s.a.createElement("span",{style:{display:"inline-flex",alignItems:"center"}},s.a.createElement(se,{style:{marginLeft:-7},width:30}),y("New State Machine"))}];return s.a.createElement(Oa,null,s.a.createElement(vi,null,s.a.createElement(wa,{style:{flex:1}},y("State Machine")),r&&r.id&&s.a.createElement(Ii,{onClick:()=>c(r.id)},s.a.createElement(Ce,{style:{pointerEvents:"none",marginLeft:-8},width:30}),y("Edit"))),s.a.createElement(vi,null,s.a.createElement(Xt,{value:r&&r.id?{value:r.id,label:r.name||"Untitled"}:null,onChange:e=>b(e,l),options:w})),s.a.createElement("br",null),s.a.createElement(ra,{arr:r.params,propName:"jumps",label:y("Params"),onAdd:v,onDelete:x},r.params.map(((e,t)=>s.a.createElement(vi,{key:e.id},s.a.createElement(Xt,{defaultValue:{value:e.type,label:y(e.type)},onChange:t=>I(e.id,t.value),options:[{value:"value",label:y("value")},{value:"pointer",label:y("pointer")}]}),s.a.createElement(vi,null,s.a.createElement(xi,{style:{flex:.45},ref:i[t].name,scale:1,defaultValue:e.name,placeholder:y("Name"),onFocus:p||null,onBlur:d,onKeyDown:Object(L.k)({Enter:d,Escape:m||null})}),s.a.createElement("span",{style:{flex:.1,textAlign:"center"}}," = "),s.a.createElement(xi,{style:{flex:.45},ref:i[t].value,scale:1,defaultValue:e.value,placeholder:y(e.type),onFocus:p||null,onBlur:d,onKeyDown:Object(L.k)({Enter:d,Escape:m||null})})))))))}));const{ipcRenderer:ya}=window.isStandalone?window.require("electron"):{};var ga=s.a.memo((e=>{const{procID:t,id:n,isLast:i,selected:o,allNodes:l,allTools:r,allActors:c,allEvents:d,allSubProcesses:p}=e,m=Object(u.c)(),b=Object(u.e)().getState,{t:y}=Object(h.c)(),g=Object(u.d)((e=>Object(ke.ib)(e,{id:n,procID:t}))),f=Object(u.d)((e=>Object(N.S)(e,t))),{type:v,name:x,description:I,duration:w,cies:O,actors:S,tools:j,options:C,behaviorUnit:k,subProcess:D,subs:B}=g,{timer:A,events:R}=C,P=Object(u.d)((e=>Object(Ge.g)(e,n))),F=Object(a.useCallback)((e=>Object(Ge.c)(n,e)(m)),[m,n]),U=Object(a.useMemo)(ke.N,[]),$=Object(u.d)((e=>U(e,{id:n,procID:t}))),[_,M]=Object(a.useState)(!!D),V={name:s.a.createRef(),description:s.a.createRef(),duration:s.a.createRef(),timer:s.a.createRef(),events:R.enabled?R.values.map((()=>s.a.createRef())):[],params:k?k.params.map((()=>({name:s.a.createRef(),value:s.a.createRef()}))):[],cieParams:O?O.values.map((e=>e.params.map((()=>({name:s.a.createRef(),value:s.a.createRef()}))))):[]},q=Object(a.useCallback)((e=>{e.id!==g.id&&(e={...g});const a={...e,name:P?V.name.current.value:e.name,description:P?V.description.current.value:e.description,duration:Object(L.f)(P?parseFloat(V.duration.current.value||-1):e.duration,-1),options:P?{...e.options,timer:V.timer.current?{...e.options.timer,value:parseFloat(V.timer.current.value)}:{...e.options.timer}}:{...e.options}};e.behaviorUnit&&(a.behaviorUnit={...e.behaviorUnit,params:V.params.map(((t,n)=>({...e.behaviorUnit.params[n],name:t.name.current.value,value:t.value.current.value})))}),e.cies&&(a.cies={...e.cies,values:e.cies.values.map(((e,t)=>({...e,params:V.cieParams[t].map(((t,n)=>({...e.params[n],name:t.name.current.value,value:t.value.current.value})))})))}),Object(ke.qb)(t,a)(m),Object(Ge.f)(n,!1)(m)}),[g,P,V,t,m,n]),G=Object(a.useCallback)(((e,a)=>{"timer"===e||"events"===e?Object(ke.qb)(t,{...g,options:{...g.options,[e]:{...g.options[e],values:a}}})(m):Object(ke.qb)(t,{...g,[e]:Array.isArray(g[e])?a:{...g[e],values:a}})(m),Object(Ge.f)(n,!1)(m)}),[m,n,g,t]),K=Object(a.useCallback)((e=>{e.target.closest("input")||e.target.closest("textarea")||(Object(Ge.f)(n,!0)(m),setTimeout((()=>Object(Ge.f)(n,!1)(m)),300))}),[m,n]),z=Object(a.useCallback)((e=>Object(ke.pb)(t,e)(m)),[m,t]),Y=Object(a.useCallback)((()=>Object(Ge.f)(n,!0)(m)),[m,n]),H=Object(a.useCallback)((()=>Object(ke.J)(t,n)(m)),[m,n,t]),W=Object(a.useCallback)((e=>!P&&!e.target.closest(".bin")&&!e.target.closest(".option-toggle")&&F(!0)),[P,F]),Z=Object(a.useCallback)((()=>Object(ke.qb)(t,{...g,actors:[...g.actors,""]})(m)),[m,g,t]),J=Object(a.useCallback)((e=>Object(ke.qb)(t,{...g,actors:g.actors.filter(((t,n)=>n!==e))})(m)),[m,g,t]),X=Object(a.useCallback)(((e,n)=>Object(ke.qb)(t,{...g,actors:S.map(((a,s)=>n===s?Object(ua.d)(t,"actors",e)(m):a))})(m)),[S,m,g,t]),Q=Object(a.useCallback)((()=>Object(ke.qb)(t,{...g,tools:{...j,values:[...j.values,""]}})(m)),[m,g,j,t]),ee=Object(a.useCallback)((e=>Object(ke.qb)(t,{...g,tools:{...j,values:j.values.filter(((t,n)=>n!==e))}})(m)),[m,g,t,j]),te=Object(a.useCallback)(((e,n)=>{const a=Object(ua.d)(t,"tools",e)(m);Object(ke.qb)(t,{...g,tools:{...j,values:j.values.map(((e,t)=>n===t?a:e))}})(m)}),[m,g,t,j]),ne=Object(a.useCallback)((e=>Object(ke.qb)(t,{...g,options:{...C,events:{...C.events,enabled:e}}})(m)),[t,g,C,m]),ae=Object(a.useCallback)((()=>Object(ke.qb)(t,{...g,options:{...C,events:{...C.events,values:[...C.events.values,""]}}})(m)),[t,g,C,m]),ie=Object(a.useCallback)((e=>Object(ke.qb)(t,{...g,options:{...C,events:{...C.events,values:C.events.values.filter(((t,n)=>n!==e))}}})(m)),[m,g,C,t]),oe=Object(a.useCallback)(((e,n)=>{const a=Object(ua.d)(t,"events",e)(m);Object(ke.qb)(t,{...g,options:{...C,events:{...C.events,values:C.events.values.map(((e,t)=>n===t?a:e))}}})(m)}),[m,g,C,t]),le=Object(a.useCallback)((()=>Object(ke.qb)(t,{...g,cies:{...O,values:[...O.values,ke.i]}})(m)),[t,g,O,m]),re=Object(a.useCallback)((e=>Object(ke.qb)(t,{...g,cies:{...O,values:O.values.filter(((t,n)=>n!==e))}})(m)),[O,m,g,t]),ce=Object(a.useCallback)((()=>Object(ke.A)(t,n,"")(m)),[t,n,m]),de=Object(a.useCallback)((e=>Object(ke.H)(t,$[e].id)(m)),[m,$,t]),ue=Object(a.useCallback)(((e,a)=>Object(ke.Y)(t,n,e,a,f.some((e=>e.path===a)))(m)),[f,m,n,t]),pe=Object(a.useCallback)(((e,a)=>Object(ke.X)(t,n,e,a)(m)),[m,n,t]),me=Object(a.useCallback)((e=>Object(ke.L)(t,e)(m,b)),[m,b,t]),be=Object(a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=E()();m({type:ba.b,payload:{id:n,procID:t}}),null!==e?pe(n,e):ue(n,"")}),[m,ue,pe,t]),he=Object(a.useCallback)((()=>window.isStandalone?ya.send("import-bu",t):document.dispatchEvent(new CustomEvent("import-bu",{detail:{procID:t}}))),[t]),ye=Object(a.useCallback)((e=>"import"===e.value?he():"new"===e.value?be():ue(e.value)),[he,ue,be]),ge=Object(a.useCallback)(((e,t)=>"import"===e.value?he():"new"===e.value?be(t):pe(e.value,t)),[he,pe,be]),fe=Object(a.useCallback)((e=>Object(ke.F)(t,e,n)(m)),[m,t,n]),Ee=Object(a.useCallback)((e=>Object(ke.eb)(t,e)(m)),[m,t]),ve=Object(a.useCallback)((e=>Object(ke.I)(t,n,e,"sub")(m)),[m,t,n]);return s.a.createElement(fa,{id:"card-"+n,islast:i?1:0,opened:P,selected:o,onDoubleClick:W,onMouseDown:K},s.a.createElement(vi,null,v===T.B.BU&&s.a.createElement("span",{style:{width:30,textAlign:"center"}},s.a.createElement(ft,{width:14,height:14})),P?s.a.createElement(xi,{ref:V.name,scale:1,fontSize:14,defaultValue:x,placeholder:y("Task Name"),onFocus:Y,onBlur:q,onKeyDown:Object(L.k)({Enter:q,Escape:()=>F(!1)})}):s.a.createElement(xa,null,x),s.a.createElement(Ea,{className:"bin",onMouseDown:e=>e.stopPropagation(),onClick:H,scale:1,nodeopened:1}),s.a.createElement("span",{style:{width:30,height:30,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",marginRight:P?0:-6},onClick:()=>F(!P)},s.a.createElement(va,{style:{transform:`rotate(${P?0:-180}deg)`,transition:"transform 0.25s ease-in",pointerEvents:"none"}}))),(P||I)&&s.a.createElement(vi,null,P?s.a.createElement("textarea",{ref:V.description,style:{width:"100%",marginBottom:7},name:"desc-"+n,id:"desc-"+n,defaultValue:I,placeholder:y("Description"),onFocus:Y,onBlur:q,onKeyDown:Object(L.k)({Escape:()=>F(!1)})}):s.a.createElement(Ia,null,I)),P&&s.a.createElement(vi,null,s.a.createElement(wa,{style:{flex:.25}},y("Duration")),s.a.createElement("div",{style:{display:"flex",flex:.75}},s.a.createElement(xi,{style:{width:"100%"},type:"number",min:0,ref:V.duration,scale:1,defaultValue:w>=0?w:"",placeholder:y("Value"),onFocus:Y,onBlur:q,onKeyDown:Object(L.k)({Enter:q,Escape:()=>F(!1)})}))),P&&v===T.B.BU&&s.a.createElement(ha,{procID:t,isCIE:!1,bu:k,node:g,editBU:me,onBUChange:ye,onInputFocus:Y,onEsc:()=>F(!1),onUpdate:q,inputRefs:V.params}),s.a.createElement(vi,{nospace:1},s.a.createElement(wa,{style:{flex:.25}},y("Options")),s.a.createElement(vi,{style:{flex:.75},nospace:1},s.a.createElement(Pt,{style:{marginRight:5},title:y("Timer"),iconOff:s.a.createElement(Ft,null),iconOn:s.a.createElement(Ft,{style:{color:"#FFF"}}),checked:A.enabled,onToggle:e=>q({...g,options:{...g.options,timer:{...g.options.timer,enabled:e}}})}),s.a.createElement(Pt,{style:{marginRight:5},title:y("Wait for Event"),iconOff:s.a.createElement($t,{width:12,height:12}),iconOn:s.a.createElement($t,{width:12,height:12,style:{color:"#FFF"}}),checked:R.enabled,onToggle:e=>ne(e)}),v===T.B.TASK&&s.a.createElement(Pt,{style:{marginRight:5},title:y("CIE"),iconOff:s.a.createElement(ft,{width:12,height:12}),iconOn:s.a.createElement(ft,{width:12,height:12,style:{color:"#FFF"}}),checked:O.enabled,onToggle:e=>q({...g,cies:{...g.cies,enabled:e}})}),s.a.createElement(Pt,{style:{marginRight:5},title:y("Tools"),iconOff:s.a.createElement(Ut,null),iconOn:s.a.createElement(Ut,{style:{color:"#FFF"}}),checked:j.enabled,onToggle:e=>q({...g,tools:{...g.tools,enabled:e}})}))),P&&s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",null),s.a.createElement(vi,null,s.a.createElement(wa,{style:{marginRight:10}},B&&B.length>0?y("Subtasks"):y("Sub-Process")),B&&B.length>0?s.a.createElement(Ii,{onClick:T.n.bind(void 0,n)},y("Convert to Sub-Process")):D?s.a.createElement(Ii,{onClick:Ee.bind(void 0,D)},s.a.createElement(Ce,{style:{pointerEvents:"none",marginLeft:-8},width:30}),y("Edit")):_?s.a.createElement(Ii,{onClick:()=>M(!1)},y("Hide List")):s.a.createElement(Ii,{onClick:()=>M(!0)},y("Show List"))),B&&0!==B.length?s.a.createElement(s.a.Fragment,null,B.map((e=>s.a.createElement(vi,{key:e,style:{paddingLeft:20}},s.a.createElement(wa,{style:{color:T.i.WHITE,flex:.8}},l.find((t=>t.id===e)).name),s.a.createElement("span",{title:y("Unlink Subtask"),style:{cursor:"pointer",marginLeft:10,marginRight:5},onMouseDown:e=>e.stopPropagation(),onClick:()=>ve(e)},s.a.createElement(nn,{width:12,height:12,style:{pointerEvents:"none"}})))))):_&&s.a.createElement(vi,null,s.a.createElement(Xt,{isSearchable:!0,isCreatable:!0,value:D?{value:D,label:p.find((e=>e.id===D)).name}:null,onChange:e=>"new"===e.value?fe():q({...g,subProcess:e.value}),onCreateOption:e=>fe(e),options:[...p.map((e=>({value:e.id,label:e.name}))),{value:"new",label:s.a.createElement("span",{style:{display:"inline-flex",alignItems:"center"}},s.a.createElement(se,{style:{marginLeft:-8},width:30}),y("New Sub-Process"))}]}),D&&s.a.createElement("span",{title:y("Unlink Sub-Process"),style:{cursor:"pointer",marginLeft:10,marginRight:5},onMouseDown:e=>e.stopPropagation(),onClick:()=>q({...g,subProcess:""})},s.a.createElement(nn,{width:12,height:12,style:{pointerEvents:"none"}})))),P&&s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",null),A.enabled&&s.a.createElement(vi,null,s.a.createElement(wa,{style:{flex:.25}},y("Timer")),s.a.createElement("div",{style:{display:"flex",flex:.75}},s.a.createElement(xi,{style:{width:"100%"},type:"number",min:0,ref:V.timer,scale:1,defaultValue:A.value,placeholder:y("Value"),onFocus:Y,onBlur:q,onKeyDown:Object(L.k)({Enter:q,Escape:()=>F(!1)})}))),s.a.createElement(ra,{hide:!R.enabled,arr:R.values,selectFrom:d,propName:"events",label:y("Events"),placeholder:y("Event"),validateOnBlur:!0,onFocus:Y,onEscape:()=>F(!1),onValidate:G,onAdd:ae,onDelete:ie,onCreateOption:oe}),s.a.createElement(ra,{hide:!S,arr:S,selectFrom:c,propName:"actors",label:y("Actors"),placeholder:y("Actor"),validateOnBlur:!0,onFocus:Y,onEscape:()=>F(!1),onValidate:G,onAdd:Z,onDelete:J,onCreateOption:X}),s.a.createElement(ra,{hide:!j.enabled,arr:j.values,selectFrom:r,propName:"tools",label:y("Tools"),placeholder:y("Tool"),validateOnBlur:!0,onFocus:Y,onEscape:()=>F(!1),onValidate:G,onAdd:Q,onDelete:ee,onCreateOption:te}),v===T.B.TASK&&O&&O.enabled&&s.a.createElement("hr",null),v===T.B.TASK&&O&&s.a.createElement(ra,{hide:!O.enabled,arr:O.values,propName:"cies",label:y("CIEs"),placeholder:y("CIE"),validateOnBlur:!0,onFocus:Y,onEscape:()=>F(!1),onValidate:G,onAdd:le,onDelete:re},O.enabled&&O.values.map(((e,n)=>s.a.createElement(ha,{key:`${e.id}-${n}`,procID:t,isCIE:!0,bu:e,node:g,id:n,editBU:me,onBUChange:ge,onInputFocus:Y,onEsc:()=>F(!1),onUpdate:q,inputRefs:V.cieParams[n]})))),s.a.createElement("hr",null),s.a.createElement(ra,{arr:$,propName:"jumps",label:y("Jumps"),onAdd:ce,onDelete:de},$.map((e=>s.a.createElement(pa,{key:e.id,procID:t,showSource:!1,jump:e,allNodes:l,allEvents:d,onUpdate:z,onInputFocus:Y,onEsc:()=>F(!1)}))))))}));const fa=y.b.div`
  display: inline-block;
  pointer-events: all;
  width: 100%;
  background-color: #2B2C2D;
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  border-radius: 12px;
  margin-bottom: 7px;
  padding: 7px;
  position: relative;
  outline: none;
  /* transition: background-color 0.15s ease-in; */
  font-weight: bold;
  font-size: 9px;
  font-family: Lato;

  ${e=>!e.opened&&y.a`
    padding-left: 13px;
    padding-right: 13px;
  `}

  ${e=>e.selected&&y.a`
    background-color: #1A3653;
    border: solid 1px #39F;
  `}

  ${e=>e.islast&&y.a`
    margin-bottom: 0;
  `}
`,Ea=Object(y.b)(U)`
  margin-left: 12px;
  cursor: pointer;
  width: 9px;
  height: 9px;
  margin-left: ${e=>e.marginleft+"px"};
  margin-right: ${e=>e.marginright+"px"};

  ${e=>e.nodeopened?"":y.a`
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: 34px;
  `}
`,va=Object(y.b)(Rt)`
  width: 9px;
  height: 4.5px;
`,xa=y.b.span`
  flex: 1;
  font-size: 12px;
  margin-left: 0.25rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,Ia=y.b.span`
  flex: 1;
  font-size: 10px;
  margin-left: 0.25rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,wa=y.b.span`
  font-size: 10px;
  color: rgba(189, 193, 210, 0.3);
  margin-right: 0px;
  margin-left: 4px;
  margin-top: 0px;
  margin-bottom: 0px;

  ${e=>e.width&&y.a`
    width: ${e=>e.width+"px"};
    min-width: ${e=>e.width+"px"};
  `}
`,Oa=y.b.div`
  display: inline-block;
  width: 100%;
  background-color: ${T.i.DARK_GREY};
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  border-radius: 12px;
  margin-bottom: 7px;
  padding: 7px;
  position: relative;
  outline: none;
`;var Sa=e=>{const{t:t}=Object(h.c)(),{procID:n,propName:i,array:o}=e,l=Object(u.c)(),r=Object(a.useCallback)((()=>Object(ua.d)(n,i,"","events"===i?{log:!0}:null)(l)),[l,n,i]),c=Object(a.useCallback)((e=>Object(ua.f)(n,i,e)(l)),[l,n,i]),d=Object(a.useCallback)(((e,t,a)=>Object(ua.h)(n,i,t[a].id,t[a].value)(l)),[l,n,i]),p=Object(a.useCallback)(((e,t)=>Object(ua.h)(n,i,e,t.value,{...t})(l)),[l,n,i]);return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{style:{fontSize:12,fontFamily:"Lato",fontWeight:"bold",color:T.i.LIGHT_GREY,marginTop:-10,textAlign:"center"}},"tools"===i?t("toolsInspector"):"actors"===i?t("actorsInspector"):"events"===i?t("eventsInspector"):""),s.a.createElement(ra,{arr:o,hideLabel:!0,validateOnBlur:!0,propName:i,onAdd:r,onDelete:c,onValidate:d,onInnerPropToggle:"events"===i?p:null}))};const{ipcRenderer:ja}=window.isStandalone?window.require("electron"):{};var Ca=e=>{const{procID:t}=e,{t:n}=Object(h.c)(),i=Object(u.c)(),o=Object(u.e)().getState,l=Object(u.d)((e=>e.bu.entities.present.allIds.filter((n=>e.bu.entities.present.byIds[n].present.process===t&&e.process.entities.byIds[t].present.behaviorUnits.includes(n))).map((t=>e.bu.entities.present.byIds[t].present)))),r=Object(a.useCallback)((()=>i({type:ba.b,payload:{id:E()(),procID:t}})),[i,t]),c=Object(a.useCallback)((()=>window.isStandalone?ja.send("import-bu",t):document.dispatchEvent(new CustomEvent("import-bu",{detail:{procID:t},bubbles:!0}))),[t]),d=Object(a.useCallback)((e=>Object(ke.L)(t,e)(i,o)),[i,o,t]),p=Object(a.useCallback)((e=>i({type:ba.c,payload:{buID:e,procID:t}})),[i,t]);return s.a.createElement(vi,null,s.a.createElement(vi,null,s.a.createElement(ka,{style:{width:"100%",marginBottom:10},onClick:r},s.a.createElement(se,{width:30}),n("New State Machine")),s.a.createElement(ka,{style:{width:"100%"},onClick:c},s.a.createElement(oe,{width:30}),n("Import State Machine"))),l.map((e=>s.a.createElement(Oa,{key:e.id,style:{marginTop:15}},s.a.createElement(vi,{style:{marginBottom:10,overflow:"hidden"}},s.a.createElement(wa,{style:{flex:1,color:T.i.WHITE,fontFamily:"Lato"}},e.name),s.a.createElement(ka,{onClick:()=>d(e.id)},s.a.createElement(Ce,{style:{pointerEvents:"none"},width:30}),n("Edit"))),s.a.createElement(vi,null,s.a.createElement(ka,{style:{width:"100%"},onClick:()=>p(e.id)},s.a.createElement(U,{style:{marginRight:5}}),n("Delete")))))))};const ka=y.b.span`
  border-radius: 12px;
  padding: 4px 10px 4px 2px;
  height: 24px;
  background-color: ${T.i.DARKER_GREY};
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  font-family: Lato;
  font-size: 10px;
  font-weight: bold;
  box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);

  &:hover,
  &:focus {
    background-color: ${T.i.DARKER_GREY_DARK};
  }

  &:active {
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.2);
  }
`,Da=Object(Ke.a)(((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.nodes.allIds:[]}),((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.nodes.byIds:{}}),((e,t)=>{let{procID:n}=t;return e.process.entities.byIds[n]?e.process.entities.byIds[n].present.subProcesses:{}}),((e,t)=>{let{types:n,page:a}=t;return{types:n,page:a}}),((e,t,n,a)=>{let{types:s,page:i}=a;return e.filter((e=>s.includes(t[e].type)&&i.id===Object(ke.Q)(n,e))).map((e=>({id:t[e].id,name:t[e].name})))}));var Na=e=>{const{procID:t}=e,[n,i]=Object(a.useState)(!1),[o,l]=Object(a.useState)("inspector"),{t:r}=Object(h.c)(),c=Object(u.d)((e=>Object(ke.jb)(e,t))),d=Object(u.d)((e=>Da(e,{procID:t,types:[T.B.TASK,T.B.BU],page:c}))),p=Object(u.d)((e=>e.process.ui.selectedNodes)),m=d.map((e=>{let{name:t,id:n}=e;return{name:t,id:n}})),b=Object(u.d)((e=>Object(ua.g)(e,{procID:t,type:"tools"}))),y=Object(u.d)((e=>Object(ua.g)(e,{procID:t,type:"actors"}))),f=Object(u.d)((e=>Object(ua.g)(e,{procID:t,type:"events"}))),E=Object(u.d)((e=>Object(ke.kb)(e,t))),v=!!Object(u.d)((e=>e.process.entities.byIds[t]&&e.process.entities.byIds[t].present.editBU)),x=Object(a.useCallback)((e=>{l("inspector"),setTimeout((()=>{document.getElementById("card-"+e).scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}),100),document.getElementById("card-"+e)&&document.getElementById("card-"+e).scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}),[]);return Object(g.a)(T.b,(()=>l("bu")),document.body),Object(g.a)(T.t,(e=>{n?(i(!1),setTimeout((()=>{x(e.detail)}),100)):x(e.detail)}),document.body),s.a.createElement(La,{disabled:v,closed:n},s.a.createElement(Ta,{disabled:v,closed:n||v,onClick:()=>i(!n)},s.a.createElement(At,{style:{pointerEvents:"none"}}),!n&&!v&&s.a.createElement(Ba,null,r(o.replace(/^\w/,(e=>e.toUpperCase()))))),!n&&!v&&s.a.createElement(Ra,null,s.a.createElement(Xt,{scale:1.25,isSearchable:!1,defaultValue:{value:o,label:r(o.replace(/^\w/,(e=>e.toUpperCase())))},onChange:e=>l(e.value),options:[{value:"inspector",label:r("Inspector")},{value:"events",label:r("Events")},{value:"actors",label:r("Actors")},{value:"tools",label:r("Tools")},{value:"bu",label:r("State Machines")}]})),!n&&!v&&s.a.createElement(Aa,{closed:n||v},"inspector"===o&&d.map(((e,n)=>{let{id:a}=e;return s.a.createElement(ga,{id:a,procID:t,key:a,selected:p.includes(a),isLast:n===d.length-1,allNodes:m,allTools:b,allActors:y,allEvents:f,allSubProcesses:E})})),"tools"===o&&s.a.createElement(Sa,{array:b,procID:t,propName:o}),"actors"===o&&s.a.createElement(Sa,{array:y,procID:t,propName:o}),"events"===o&&s.a.createElement(Sa,{array:f,procID:t,propName:o}),"bu"===o&&s.a.createElement(Ca,{procID:t})))};const La=y.b.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  height: 100%;
  background-color: #262829;
  box-shadow: rgba(0,0,0,0.15) -5px 0px 20px 0px;
  
  ${e=>(e.closed||e.disabled)&&y.a`
    min-width: 65px;
    align-items: center;
    justify-content: flex-start;
  `}
`,Ta=y.b.span`
  height: 65px;
  min-height: 65px;
  margin-left: 23px;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  cursor: pointer;

  ${e=>e.closed&&y.a`
    width: 100%;
    margin-left: 0;
    justify-content: center;
  `}

  ${e=>e.disabled&&y.a`
    pointer-events: none;
  `}
`,Ba=y.b.span`
  font-weight: bold;
  font-size: 1.25rem;
  font-family: Lato;
  word-wrap: break-word;
  margin-left: 23px;
  pointer-events: none;
`,Aa=y.b.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  width: calc(15vw + 65px);
  min-width: 120px;
  max-width: 350px;
  height: 100%;
  padding: 1rem;
  overflow: auto;

  ${e=>e.closed&&y.a`
    min-width: 0;
    width: auto;
    height: auto;
    padding: 1rem 0 0.5rem 0;
    background-color: ${T.i.DARK_GREY};
    border-radius: 9px;
  `}
`,Ra=y.b.div`
  display: flex;
  justify-content: stretch;
  align-items: center;
  width: 90%;
  margin: auto;
  height: 40px;
  margin-bottom: 10px;
`;var Pa=n(268);const Fa=e=>{let{bu:t}=e;return t.ui.loading};var Ua=e=>{const{file:t,procID:n}=e,a=Object(u.d)(Fa),i=Object(u.d)((e=>Object(D.h)(e.bu,t)));return s.a.createElement("div",{style:{position:"absolute",left:0,top:n?0:T.O,right:0,bottom:0}},t&&s.a.createElement(Pa.a,{className:j()({"state-canvas-opened":i}),split:"vertical",minSize:200,defaultSize:i?"50%":"100%",allowResize:!!i},s.a.createElement(Re,{buID:t,procID:n,loading:a,key:"canvas"}),i?s.a.createElement(Kn,{buID:t,buStateID:i}):s.a.createElement("span",null)))},$a=e=>{const t={fill:"none",stroke:e.style&&e.style.color||"#777777",strokeWidth:11,strokeLinecap:"round",strokeMiterlimit:10},n={fill:"none",stroke:e.style&&e.style.color||"#777777",strokeWidth:11,strokeLinecap:"round",strokeMiterlimit:10,strokeDasharray:"6.6361,15.4277"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 192.11 193.37",width:26,height:26},e),s.a.createElement("g",null,s.a.createElement("path",{style:t,d:"M107.69,21.87l-86.46,86.46c-5.61,5.61-5.61,14.8,0,20.42l5.91,5.91c8.66-6.55,21.04-5.88,28.93,2.01 c7.89,7.89,8.56,20.27,2.01,28.93l5.91,5.91c5.61,5.61,14.8,5.61,20.42,0l86.46-86.46c5.61-5.61,5.61-14.8,0-20.42L128.1,21.87 C122.49,16.25,113.3,16.25,107.69,21.87z"}),s.a.createElement("g",null,s.a.createElement("g",null,s.a.createElement("line",{style:t,x1:"96.45",y1:"33.1",x2:"99.19",y2:"35.84"}),s.a.createElement("line",{style:n,x1:"110.1",y1:"46.75",x2:"151.45",y2:"88.1"}),s.a.createElement("line",{style:t,x1:"156.9",y1:"93.55",x2:"159.64",y2:"96.29"})))))},_a=e=>{const t={fill:"none",stroke:e.style&&e.style.color||"#777777",strokeWidth:13,strokeLinecap:"round",strokeMiterlimit:10};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 134 155.91",width:26,height:26},e),s.a.createElement("path",{style:t,d:"M92.75,36.47C110.72,45.78,123,64.57,123,86.21c0,30.93-25.07,56-56,56s-56-25.07-56-56 c0-22.04,12.74-41.11,31.25-50.25"}),s.a.createElement("line",{style:t,x1:"66.75",y1:"13.71",x2:"66.75",y2:"68.21"}))},Ma=s.a.memo((e=>{const{name:t,style:n,highlight:i,selected:o,small:l,medium:r,type:c,forceConnected:d,noentry:u,noexit:p,nosubnode:m,nojumpnode:b,entryConnected:h,exitConnected:y,subConnected:g,jumpConnected:f,subProcess:E,onPointerEnter:v,onAccessPointTriggered:x,onStopDrag:I,onDoubleClick:w,onCollapse:O}=e,[S,j]=Object(a.useState)(!1),C=Object(a.useCallback)((e=>e.stopPropagation()),[]),k=Object(a.useCallback)((e=>{document.body.removeEventListener("pointerdown",k,!1),document.body.removeEventListener("pointerup",k,!1),I&&I(e)}),[I]),D=Object(a.useCallback)((e=>{"function"==typeof x&&x(e,e.target.dataset.nodetype)}),[x]),N=Object(a.useCallback)((e=>{e.stopPropagation(),D(e),document.body.addEventListener("pointerdown",k,!1)}),[k,D]),L=Object(a.useCallback)((e=>{D(e),document.body.addEventListener("pointerup",k,!1)}),[k,D]),B=Object(a.useCallback)((e=>{e.stopPropagation(),j(!S),O&&O(!S)}),[S,O]);return s.a.createElement("div",{style:Object.assign({},Va.node,c===T.B.MILESTONE&&Va.milestone,i&&Va.highlightedNode,o&&Va.selectedNode,r&&Va.nodeMedium,l&&Va.nodeSmall,n),onPointerEnter:v,onDoubleClick:w},E?s.a.createElement(Et,{style:Object.assign({top:l||r?"50%":"35%"},Va.icon,o&&{color:"#FEFEFE"})}):c===T.B.TASK&&s.a.createElement($a,{style:Object.assign({top:l||r?"50%":"35%"},Va.icon,o&&{color:"#FEFEFE"})})||c===T.B.BEGIN&&s.a.createElement(_a,{width:l||r?26:34,height:l||r?26:34,style:Object.assign({pointerEvents:"none"},o&&{color:"#FEFEFE"})})||c===T.B.BU&&s.a.createElement(ft,{width:l||r?24:30,height:l||r?24:30,style:Object.assign({top:l||r?"50%":"35%"},Va.icon,o&&{color:"#FEFEFE"})}),!u&&s.a.createElement(qa,{onPointerDown:N,draggable:!0,onDragStart:L,onClick:C,connected:d||h?1:0,entry:!0,type:c,color:T.i.GREEN,className:"node-entry-point","data-nodetype":"entry",onContextMenu:C}),!p&&s.a.createElement(qa,{onPointerDown:N,draggable:!0,onDragStart:L,onClick:C,connected:d||y?1:0,exit:!0,type:c,color:T.i.BLUE,className:"node-exit-point","data-nodetype":"exit",onContextMenu:C}),!m&&s.a.createElement(qa,{onPointerDown:N,draggable:!0,onDragStart:L,onClick:C,connected:d||g?1:0,subnode:!0,type:c,color:T.i.PINK,className:"node-sub-point","data-nodetype":"sub",onContextMenu:C}),!b&&!l&&!r&&s.a.createElement(qa,{onPointerDown:N,draggable:!0,onDragStart:L,onClick:C,connected:d||f?1:0,jump:!0,type:c,color:T.i.YELLOW,className:"node-jump-point","data-nodetype":"jump"}),!m&&!l&&!r&&g&&s.a.createElement(Ga,{onClick:B,onDoubleClick:e=>e.stopPropagation()},S?"+":"−"),(c===T.B.TASK||c===T.B.BU)&&t&&s.a.createElement("span",{style:{textAlign:"center",fontSize:11,fontWeight:"bold",maxWidth:"75%",maxHeight:"75%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",zIndex:2,position:"absolute",left:"50%",bottom:"15%",transform:"translate(-50%,-50%)"}},t))}));const Va={node:{borderRadius:"50%",height:T.y,width:T.v,backgroundColor:"#333536",boxShadow:"0 4px 20px 0 rgba(0,0,0,0.2)",boxSizing:"content-box",border:"none",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",cursor:"inherit"},nodeMedium:{width:T.z,height:T.w},nodeSmall:{width:T.A,height:T.x},selectedNode:{backgroundColor:"#1A3653",border:"solid 1px #39F"},highlightedNode:{border:"dashed 1px #39F"},milestone:{background:"none",backgroundColor:"transparent",border:"none",boxShadow:"none",width:T.A,height:T.x},icon:{pointerEvents:"none",position:"absolute",left:"50%",transform:"translate(-50%,-50%)"}},qa=y.b.span`
  display: flex;
  border-radius: 50%;
  border-style: dashed;
  border-width: 1px;
  border-color: ${e=>e.color};
  height: 14px;
  width: 14px;
  box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);
  position: absolute;
  transform: translate(-50%, -50%);
  background-color: #333536;
  cursor: pointer;

  &:hover {
    border: none;
    background-color: ${e=>e.color};
    opacity: 1;
  }

  ${e=>e.entry&&y.a`
    left: 50%;
    top: ${e.type===T.B.MILESTONE?"50%":"0"};
    transform: ${e.type===T.B.MILESTONE?"translate(-50%, -100%)":"translate(-50%, -50%)"};
  `}

  ${e=>e.exit&&y.a`
    left: 50%;
    bottom: ${e.type===T.B.MILESTONE?"50%":"0"};
    transform: ${e.type===T.B.MILESTONE?"translate(-50%, 100%)":"translate(-50%, 50%)"};
  `}

  ${e=>e.subnode&&y.a`
    top: 50%;
    right: 0;
    transform: translate(50%, -50%);
  `}

  ${e=>e.jump&&y.a`
    top: 85%;
    left: 85%;
    transform: translate(-50%, -50%);
    opacity: 0.5;
  `}

  ${e=>(e.forceConnected||e.connected)&&y.a`
    border: none;
    background-color: ${e=>e.color};
    opacity: 1;
  `}
`,Ga=y.b.span`
  border: solid 1px ${T.i.WHITE};
  display: flex;
  justify-content: center;
  align-items: center;
  width: 14px;
  height: 14px;
  background-color: ${T.i.DARK_GREY};
  cursor: pointer;
  position: absolute;
  top: 50%;
  right: -14px;
  transform: translate(50%, -50%);
`;var Ka=e=>{const t={fill:e.style&&e.style.color||T.i.BLACK};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 69.9 69.9",width:15,height:15},e),s.a.createElement("path",{style:t,d:"M23,58.2c-2.9,0-5.7-1.1-7.9-3.3c-4.4-4.4-4.4-11.5,0-15.8l8.5-8.5c4.4-4.4,11.5-4.4,15.8,0c0.8,0.8,0.8,2,0,2.8 c-0.8,0.8-2,0.8-2.8,0c-2.8-2.8-7.4-2.8-10.2,0l-8.5,8.5c-2.8,2.8-2.8,7.4,0,10.2c2.8,2.8,7.4,2.8,10.2,0l5.8-5.8 c0.8-0.8,2-0.8,2.8,0c0.8,0.8,0.8,2,0,2.8l-5.8,5.8C28.7,57.1,25.8,58.2,23,58.2z"}),s.a.createElement("path",{style:t,d:"M38,43.2c-2.9,0-5.7-1.1-7.9-3.3c-0.8-0.8-0.8-2,0-2.8c0.8-0.8,2-0.8,2.8,0c2.8,2.8,7.4,2.8,10.2,0l8.5-8.5 c2.8-2.8,2.8-7.4,0-10.2c-1.4-1.4-3.2-2.1-5.1-2.1s-3.7,0.7-5.1,2.1l-6,6c-0.8,0.8-2,0.8-2.8,0c-0.8-0.8-0.8-2,0-2.8l6-6 c4.4-4.4,11.5-4.4,15.8,0c4.4,4.4,4.4,11.5,0,15.8l-8.5,8.5C43.7,42.1,40.8,43.2,38,43.2z"}))},za=e=>{const t={fill:e.style&&e.style.color||T.i.BLACK};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 69.9 69.9",width:15,height:15},e),s.a.createElement("path",{style:t,d:"M27,33"}),s.a.createElement("path",{style:t,d:"M20.5,39.5"}),s.a.createElement("path",{style:t,d:"M47.2,38.5c-0.5,0-1-0.2-1.4-0.6c-0.8-0.8-0.8-2,0-2.8l6.3-6.3c2.8-2.8,2.8-7.4,0-10.2c-2.8-2.8-7.4-2.8-10.2,0l-6,6 c-0.8,0.8-2,0.8-2.8,0c-0.8-0.8-0.8-2,0-2.8l6-6c4.4-4.4,11.5-4.4,15.8,0c4.4,4.4,4.4,11.5,0,15.8l-6.3,6.3 C48.2,38.3,47.7,38.5,47.2,38.5z"}),s.a.createElement("path",{style:t,d:"M23.6,58.3c-2.9,0-5.7-1.1-7.9-3.3c-4.4-4.4-4.4-11.5,0-15.8l6.3-6.3c0.8-0.8,2-0.8,2.8,0c0.8,0.8,0.8,2,0,2.8L18.5,42 c-2.8,2.8-2.8,7.4,0,10.2c2.8,2.8,7.4,2.8,10.2,0l6-6c0.8-0.8,2-0.8,2.8,0c0.8,0.8,0.8,2,0,2.8l-6,6C29.3,57.2,26.4,58.3,23.6,58.3z"}),s.a.createElement("path",{style:t,d:"M53.5,55.2c-0.5,0-1-0.2-1.4-0.6l-36-36c-0.8-0.8-0.8-2,0-2.8c0.8-0.8,2-0.8,2.8,0l36,36c0.8,0.8,0.8,2,0,2.8 C54.5,55,54,55.2,53.5,55.2z"}))};function Ya(e,t){const n=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=Object(L.f)(Object(L.a)(t.x-e.x),40),i=Object(L.f)(Object(L.a)(t.y-e.y),40);let o="",l=0,r=0;switch(e.x<=t.x&&e.y<=t.y?"top-left":e.x>=t.x&&e.y<=t.y?"top-right":e.x<=t.x&&e.y>=t.y?"bottom-left":"bottom-right"){case"top-left":l=t.x-e.x,r=t.y-e.y,o=`M 0 0 L ${l} ${r}`;break;case"top-right":l=e.x-t.x,r=t.y-e.y,o=`M 0 ${r} L ${l} 0`;break;case"bottom-left":l=t.x-e.x,r=e.y-t.y,o=`M 0 ${r} L ${l} 0`;break;case"bottom-right":l=e.x-t.x,r=e.y-t.y,o=`M 0 0 L ${l} ${r}`}return{left:n,top:a,width:s,height:i,path:o}}const Ha=(e,t)=>{const n={...e},a={...t},s=n.x<a.x?n.x:a.x,i=n.y<a.y?n.y:a.y,o={x:0,y:0};let l=0,r=0;switch(n.x<=a.x&&n.y<=a.y?"top-left":n.x>=a.x&&n.y<=a.y?"top-right":n.x<=a.x&&n.y>=a.y?"bottom-left":"bottom-right"){case"top-left":l=a.x-n.x,r=a.y-n.y,o.x=s+l/2,o.y=i+r/2;break;case"top-right":l=n.x-a.x,r=a.y-n.y,o.x=s+l/2,o.y=i+r/2;break;case"bottom-left":l=a.x-n.x,r=n.y-a.y,l<n.width/2+a.width/2?(o.x=s-n.width/2-24,o.y=i+r/2):(o.x=s+l/2,o.y=i+r/2);break;case"bottom-right":l=n.x-a.x,r=n.y-a.y,l<n.width/2+a.width/2+12?(o.x=s-(n.width/2+a.width/2-24)-24,o.y=i+r/2):(o.x=s+l/2,o.y=i+r/2)}return o};var Wa=s.a.memo((e=>{const[t]=Object(a.useState)(e.color||T.i.LIGHTER_GREY),{procID:n,from:i,to:o,type:l,id:r,canvasID:c,className:d,selectable:p}=e,m=Object(u.c)(),b=s.a.createRef(),h=Object(a.useCallback)((()=>b.current.classList.add("hovered")),[b]),y=Object(a.useCallback)((()=>b.current.classList.remove("hovered")),[b]);let g={...Object(u.d)((e=>Object(ke.lb)(e,{id:i,procID:n})))};if("mouse"===i)e.mouse.width=1,e.mouse.height=1,g={...e.mouse};else{const{type:e}=g;g.width=e===T.B.MILESTONE?T.A:T.y,g.height=e===T.B.MILESTONE?T.x:T.v,"sub"===l?g.x+=g.width/2:"jump"===l?(g.x+=-g.width/2+.85*g.width,g.y+=-g.height/2+.85*g.height):g.y+=e===T.B.MILESTONE?7:g.height/2}let f={...Object(u.d)((e=>Object(ke.lb)(e,{id:o,procID:n})))};if("mouse"===o)e.mouse.width=T.y,e.mouse.height=T.v,f={...e.mouse};else{const{type:e}=f;f.width=e===T.B.MILESTONE?T.A:T.y,f.height=e===T.B.MILESTONE?T.x:T.v,f.y-=e===T.B.MILESTONE?7:f.height/2}const E=Object(u.d)((e=>Object(Ge.j)(e,r))),v=Object(a.useCallback)((()=>"jump"===l?Object(ke.H)(n,r)(m):Object(ke.I)(n,i,o,l||"exit")(m)),[m,i,n,o,l,r]);let[x,I]=((e,t,n,s)=>{const[i,o]=Object(a.useState)(!1),[l,r]=Object(a.useState)(!1),c=Object(a.useCallback)((e=>{!i||e.target.closest("#"+t)||e.target.classList.contains("react-contextmenu-item")||l&&e.target.closest("."+n)||2!==e.button&&o(!1)}),[n,t,i,l]),d=Object(a.useCallback)((e=>{"Shift"!==e.key||l?"Delete"===e.key&&i&&"function"==typeof s&&s():r(!0)}),[s,i,l]),u=Object(a.useCallback)((e=>{"Shift"!==e.key||l||r(!1)}),[l]);return Object(a.useEffect)((()=>{const t=document.getElementById(e).parentNode;return document.body.addEventListener("keydown",d,!1),document.body.addEventListener("keyup",u,!1),i&&t.addEventListener("click",c,!1),()=>{document.body.removeEventListener("keydown",d,!1),document.body.removeEventListener("keyup",u,!1),t.removeEventListener("click",c,!1)}}),[e,c,d,u,i]),[i,o]})(c,r,d,v);!1===p&&(x=!1);const w=Object(a.useCallback)((()=>Object(Ge.i)(r)(m)),[m,r]),O=Object(a.useCallback)((()=>Object(Ge.m)(r,"on")(m)),[m,r]),S=Object(a.useCallback)((()=>"on"!==E&&Object(Ge.m)(r,"hover")(m)),[m,r,E]);Object(a.useEffect)((()=>("jump"===l&&"on"!==E?document.getElementById("jump-link-bt-"+r).addEventListener("mouseleave",w,!1):"on"===E&&document.getElementById("jump-link-bt-"+r).removeEventListener("mouseleave",w,!1),()=>{"jump"===l&&document.getElementById("jump-link-bt-"+r).removeEventListener("mouseleave",w,!1)})),[m,r,w,E,l]);const{left:C,top:k,width:D,height:N,path:B,btPos:A}=function(e,t,n){const a=e.x<t.x?e.x:t.x,s=e.y<t.y?e.y:t.y,i=Object(L.f)(Object(L.a)(t.x-e.x),40),o=Object(L.f)(Object(L.a)(t.y-e.y),40);let l="",r=0,c=0,d=0,u=0,p=0;switch(e.x<=t.x&&e.y<=t.y?"top-left":e.x>=t.x&&e.y<=t.y?"top-right":e.x<=t.x&&e.y>=t.y?"bottom-left":"bottom-right"){case"top-left":r=t.x-e.x,c=t.y-e.y,"sub"===n?l=c<6?`\n          M 0,0\n          l ${r}, 0`:`\n          M 0,0\n          l ${r-12}, 0\n          c 12 0, 12 0, 12 12\n          l 0, ${c-12}`:r<18?(u=c/2,l=`\n            M 0 0\n            l 0, ${u-r/2}\n            c 0 ${r/2}, 0 ${r/2}, ${r/4} ${r/2}\n            l ${r/2}, 0\n            c ${r/4} 0, ${r/4} 0, ${r/4} ${r/2}\n            l 0, ${u-r/2}\n            `):(u=c/2,l=`\n          M 0,0\n          l 0, ${u-12}\n          c 0 12, 0 12, 12 12\n          l ${r-24}, 0\n          c 12 0, 12 0, 12 12\n          l 0, ${u-12}`);break;case"top-right":r=e.x-t.x,c=t.y-e.y,"sub"===n?c<24?(u=c/4,l=`\n          M ${r} 0\n          l 12 0\n          c 12 0, 12 0, 12 ${u}\n          l 0 ${u/4}\n          c 0 ${u}, 0 ${u}, -${u} ${u}\n          l -${r+12}, 0\n          c -${u} 0, -${u} 0, -${u} ${u}\n          l 0, ${u/2}`):(u=c/2-24,l=`\n          M ${r} 0\n          l 12 0\n          c 12 0, 12 0, 12 12\n          l 0 ${u}\n          c 0 12, 0 12, -12 12\n          l -${r}, 0\n          c -12 0, -12 0, -12 12\n          l 0, ${u}`):r<24?(u=c/2,l=`\n            M ${r} 0\n            l 0 ${u-r/4}\n            c 0 ${r/4}, 0 ${r/4}, -${r/4} ${r/4}\n            l -${r/2} 0\n            c -${r/4} 0, -${r/4} 0, -${r/4} ${r/4}\n            L 0 ${c}`):(u=c/2,l=`\n            M ${r} 0\n            l 0 ${u-12}\n            c 0 12, 0 12, -12 12\n            l -${r-24} 0\n            c -12 0, -12 0, -12 12\n            L 0 ${c}`);break;case"bottom-left":r=t.x-e.x,c=e.y-t.y,"sub"===n?r<e.width/2+t.width/2?(p=r/4,u=c/2,l=`\n            M 0 ${c}\n            l 12 0\n            c 12 0, 12 0, 12 -12\n            l 0 -${u-24}\n            c 0 -12, 0 -12, -12 -12\n            l -${e.width/2+t.width/2-r} 0\n            c -12 0, -12 0, -12 -12\n            l 0 -${u}\n            c 0 -12, 0 -12, 12 -12\n            L ${r-12} -24\n            c 12 0, 12 0, 12 12\n            L ${r} 0`,c<e.height/2+t.height/2&&(l=`\n                M 0 ${c}\n                l 0 -${c+24}\n                c 0 -${r/4}, 0 -${r/4}, ${r/4} -${r/4}\n                l ${r/2} 0\n                c ${r/4} 0, ${r/4} 0, ${r/4} ${r/4}\n                L ${r} 0`)):(p=r/2-12,u=c,l=`\n            M 0 ${c}\n            l ${p} 0\n            c 12 0, 12 0, 12 -12\n            l 0 -${u}\n            c 0 -12, 0 -12, 12 -12\n            l ${p-12} 0\n            c 12 0, 12 0, 12 12\n            L ${r} 0`):r<e.width/2+t.width/2?(u=c+24,l=`\n            M 0 ${c}\n            l 0 12\n            c 0 12, 0 12, -12 12\n            l -${e.width/2} 0\n            c -12 0, -12 0, -12 -12\n            l 0 -${u}\n            c 0 -12, 0 -12, 12 -12\n            l ${r+e.width/2} 0\n            c 12 0, 12 0, 12 12\n            L ${t.x-e.x} 0`):c<36?(p=r/2-c/2,d=c/4,l=`\n              M 0 ${c}\n              l 0 ${d}\n              c 0 ${d}, 0 ${d}, ${d} ${d}\n              l ${p} 0\n              c ${d} 0, ${d} 0, ${d} -${d}\n              l 0 -${1.5*c}\n              c 0 -${d}, 0 -${d}, ${d} -${d}\n              l ${p} 0\n              c ${d} 0, ${d} 0, ${d} ${d}\n              L ${Object(L.a)(t.x-e.x)} 0`):(p=r/2,u=c+24,l=`\n              M 0 ${c}\n              l 0 12\n              c 0 12, 0 12, 12 12\n              l ${p-24} 0\n              c 12 0, 12 0, 12 -12\n              l 0 -${u}\n              c 0 -12, 0 -12, 12 -12\n              l ${p-24} 0\n              c 12 0, 12 0, 12 12\n              L ${Object(L.a)(t.x-e.x)} 0`);break;case"bottom-right":r=e.x-t.x,c=e.y-t.y,l="sub"===n?`\n          M ${r} ${c}\n          l 12 0\n          c 12 0, 12 0, 12 -12\n          l 0 -${c}\n          c 0 -12, 0 -12, -12 -12\n          L 12 -24\n          c -12 0, -12 0, -12 12\n          L 0 0`:r<e.width/2+t.width/2+12?`\n            M ${r} ${c}\n            l 0 12\n            c 0 12, 0 12, -12 12\n            l -${r+e.width/2+t.width/2-24} 0\n            c -12 0, -12 0, -12 -12\n            l 0 -${c+24}\n            c 0 -12, 0 -12, 12 -12\n            L -12 -24\n            c 12 0, 12 0, 12 12\n            L 0 0`:`\n            M ${r} ${c}\n            l 0 12\n            c 0 12, 0 12, -12 12\n            l -${r/2-24} 0\n            c -12 0, -12 0, -12 -12\n            l 0 -${c+24}\n            c 0 -12, 0 -12, -12 -12\n            L 12 -24\n            c -12 0, -12 0, -12 12\n            L 0 0`}return{left:a,top:s,width:i,height:o,btPos:Ha(e,t),path:l}}(g,f,l);return s.a.createElement(s.a.Fragment,null,s.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/1999/xhtml",className:j()(d,{"no-hover":"mouse"===o||"mouse"===i}),id:r,ref:b,width:D,height:N,style:Object.assign({left:C,top:k},"jump"===l&&{zIndex:4},x&&{zIndex:5})},s.a.createElement("path",{d:B,onMouseOver:h,onMouseOut:y,onClick:()=>I(!x),style:{stroke:x?T.i.PINK:t,strokeWidth:"jump"!==l||E?2:1},strokeDasharray:"sub"===l||l===T.u.LOCK||l===T.u.UNLOCK?6:0})),("jump"===l||l===T.u.LOCK||l===T.u.UNLOCK)&&s.a.createElement("span",{className:"jump-link-bt",id:"jump-link-bt-"+r,onMouseOver:S,onClick:O,onPointerDown:null,onContextMenu:e=>e.stopPropagation(),style:{left:A.x,top:A.y,backgroundColor:"jump"!==l||E?t:T.i.DARK_GREY,borderColor:t,borderStyle:"solid",borderWidth:1,zIndex:10}},"jump"===l&&s.a.createElement($t,{width:12,height:12,style:{transform:"rotate(-45deg)",color:E?"rgba(0,0,0,0.5)":T.i.YELLOW}}),l===T.u.LOCK&&s.a.createElement(Ka,{width:18,height:18,style:{transform:"rotate(-45deg)"}}),l===T.u.UNLOCK&&s.a.createElement(za,{width:18,height:18,style:{transform:"rotate(-45deg)"}})))})),Za=e=>{const[t,n]=Object(a.useState)(e),s=Object(a.useRef)(t);return Object(a.useEffect)((()=>{s.current=t}),[t]),[t,s,n]},Ja=e=>{const{id:t,procID:n,right:a}=e,[i]=Object(h.c)(),o=Object(u.d)((e=>Object(ke.ib)(e,{id:t,procID:n}))),{type:l,name:r,description:c,cies:d,tools:p,options:m}=o,{timer:b,events:y}=m;return s.a.createElement(Vt,{right:a},s.a.createElement("h5",null,l===T.B.BU&&s.a.createElement(ft,{style:{marginRight:5}}),r||i(T.B[l]),s.a.createElement(qt,{right:a})),s.a.createElement("span",null,i(T.B[l])),c?s.a.createElement("p",null,c):s.a.createElement("br",null),s.a.createElement(Gt,null,s.a.createElement(Pt,{style:{marginRight:5},title:i("Timer"),iconOff:s.a.createElement(Ft,null),iconOn:s.a.createElement(Ft,{style:{color:T.i.WHITE}}),checked:b.enabled}),s.a.createElement(Pt,{style:{marginRight:5},title:i("Wait for Event"),iconOn:s.a.createElement($t,{width:12,height:12,style:{color:T.i.WHITE}}),iconOff:s.a.createElement($t,{width:12,height:12}),checked:y.enabled}),s.a.createElement(Pt,{style:{marginRight:5},title:i("Tools"),iconOn:s.a.createElement(Ut,{style:{color:T.i.WHITE}}),iconOff:s.a.createElement(Ut,null),checked:p.enabled}),l!==T.B.BU&&s.a.createElement(Pt,{style:{marginRight:5},title:i("CIEs"),iconOn:s.a.createElement(ft,{width:12,height:12,style:{color:T.i.WHITE}}),iconOff:s.a.createElement(ft,{width:12,height:12}),checked:d.enabled})))};const Xa=Object(F.a)((e=>e.process),((e,t)=>{let{id:n,procID:a}=t;return{id:n,procID:a}}),((e,t)=>{let{id:n,procID:a}=t;return Object(ke.S)(e.entities.byIds[a].present,n)}));var Qa=s.a.memo((e=>{const[t,n,o]=Za({x:0,y:0}),[l,r,c]=Za(null),[d,p,m]=Za(null),[b,y,f]=Za(null),{id:E,procID:v,page:x,scale:I}=e,[w]=Object(h.c)(),S=Object(u.c)(),j=document.getElementById("process-canvas"),{type:C,x:k,y:D,name:N}=Object(u.d)((e=>Xa(e,{id:E,procID:v}))),L={x:k,y:D},B=!!j&&k*I+j.getBoundingClientRect().x<340*I,A=Object(u.d)((e=>Object(ke.Z)(e,{id:E,procID:v}))),R=Object(u.d)((e=>Object(ke.ab)(e,{id:E,procID:v}))),P=Object(u.d)((e=>Object(ke.cb)(e,{id:E,procID:v}))),F=Object(u.d)((e=>Object(ke.db)(e,{id:E,procID:v}))),U=Object(u.d)((e=>Object(ke.bb)(e,{id:E,procID:v}))),$=Object(u.d)((e=>Object(Ge.h)(e,E))),_=Object(u.d)(Ge.e),[M,q]=Object(a.useState)(!1),G=Object(a.useCallback)((e=>e?Object(Ge.k)(E,e)(S):Object(Ge.b)(E,e)(S)),[S,E]),K=Object(a.useCallback)((()=>{document.getElementById("drawing-link")||(q(!0),G(!0))}),[G]),z=Object(a.useCallback)((()=>{document.getElementById("drawing-link")||(q(!1),G(!1))}),[G]),Y=Object(a.useCallback)((()=>Object(ke.J)(v,E)(S)),[S,v,E]);Object(g.a)(T.k,(()=>M&&Y()),document);const H=Object(a.useCallback)((e=>Object(ke.rb)(v,E,e)(S)),[S,E,v]),W=Object(a.useCallback)((e=>{const{x:t,y:n}=j.getBoundingClientRect();o({x:(e.clientX-t)/I,y:(e.clientY-n)/I});const a=e.target.closest(".process-node");if(a){const t=a.dataset.id;if(t===E)return;y.current===E?(c(e.target.classList.contains("node-sub-point")?"sub":e.target.classList.contains("node-jump-point")?"jump":"normal"),m(t)):f(t)}else y.current===E?(f(E),m("mouse"),c("normal")):f("mouse")}),[j,I,E,f,o,m,y,c]),Z=Object(a.useCallback)(((e,t)=>{r.current||document.getElementById("drawing-link")||(c("sub"===t?"sub":"jump"===t?"jump":"normal"),"entry"===t?(m("mouse"),f(E)):(m(E),f("mouse")),W(e),document.body.addEventListener("pointermove",W,!1))}),[W,c,r,E,f,m]),J=Object(a.useCallback)((e=>{e.stopPropagation();const t="sub"===r.current?"sub":"jump"===r.current?"jump":"exit";if("mouse"!==p.current&&"mouse"!==y.current)"jump"===t?Object(ke.A)(v,p.current,y.current)(S):Object(ke.B)(v,p.current,y.current,t)(S);else if(0!==e.button)e.stopPropagation();else{const e=Object(ke.C)(T.B.TASK,x,n.current.x,p.current===E?n.current.y+T.v/2:n.current.y-T.v/2)(S);"jump"===t?Object(ke.A)(v,p.current===E?E:e,p.current===E?e:E)(S):Object(ke.B)(v,p.current===E?E:e,p.current===E?e:E,t)(S)}c(null),m(null),f(null),document.body.removeEventListener("pointermove",W,!1)}),[r,p,y,c,m,f,W,v,S,x,n,E]),X=Object(a.useCallback)((()=>{C!==T.B.TASK&&C!==T.B.BU||(Object(Ge.c)(E,!0)(S),document.body.dispatchEvent(new CustomEvent(T.t,{detail:E})))}),[S,E,C]),Q=Object(a.useCallback)((e=>Object(ke.mb)(v,E,e)(S)),[S,v,E]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(V,Object.assign({canvasID:e.canvasID,className:"process-node",onSelected:K,onDeselected:z},e,{x:L.x,y:L.y}),s.a.createElement(O.b,{id:"node-context-"+E,holdToDisplay:-1},s.a.createElement(Ma,{name:!_&&N,medium:_,style:e.style,highlight:$,subProcess:F,noentry:C===T.B.BEGIN?1:0,nosubnode:C!==T.B.TASK&&C!==T.B.BU||F?1:0,nojumpnode:C!==T.B.TASK&&C!==T.B.BU?1:0,noexit:e.noexit,onDoubleClick:X,onAccessPointTriggered:Z,onStopDrag:J,onCollapse:Q,selected:M,entryConnected:"normal"===l&&b===E||A,exitConnected:"normal"===l&&d===E||R,subConnected:"sub"===l&&d===E||P,jumpConnected:"jump"===l&&d===E||U,type:C})),(C===T.B.TASK||C===T.B.BU)&&s.a.createElement(Ja,{procID:v,id:E,right:B})),l&&Object(i.createPortal)(s.a.createElement(Wa,{procID:v,from:d,to:b,mouse:t,canvasID:e.canvasID,className:"node-link",color:"jump"===l?T.i.YELLOW:T.i.PINK,type:l,id:"drawing-link"}),j),j&&Object(i.createPortal)(s.a.createElement(O.a,{id:"node-context-"+E},(C===T.B.TASK||C===T.B.BU)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(O.c,{onClick:X},w("Inspect Node")),s.a.createElement(O.c,{divider:!0}),C===T.B.TASK?s.a.createElement(O.c,{onClick:()=>H(T.B.BU)},w("Link Task to State Machine")):s.a.createElement(O.c,{onClick:()=>H(T.B.TASK)},w("Unlink Task from State Machine")),s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:e=>document.querySelector(`#process-node-${E} .node-sub-point`).dispatchEvent(new PointerEvent("pointerdown",{...e}))},w("Add Subtask Point Sync"))),C!==T.B.BEGIN&&s.a.createElement(O.c,{onClick:e=>document.querySelector(`#process-node-${E} .node-entry-point`).dispatchEvent(new PointerEvent("pointerdown",{...e}))},w("Add Entry Point Sync")),s.a.createElement(O.c,{onClick:e=>document.querySelector(`#process-node-${E} .node-exit-point`).dispatchEvent(new PointerEvent("pointerdown",{...e}))},w("Add Exit Point Sync")),(C===T.B.TASK||C===T.B.BU)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:e=>document.querySelector(`#process-node-${E} .node-jump-point`).dispatchEvent(new PointerEvent("pointerdown",{...e}))},w("Add Jump"))),s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:T.l.bind(null,[E])},w("Copy")),s.a.createElement(O.c,{onClick:()=>{M||e.onDelete(E),Object(T.o)()}},w("Delete")),P&&s.a.createElement(s.a.Fragment,null,s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:T.n.bind(null,E)},w("Create Sub-process")))),j.parentNode))})),es=s.a.memo((e=>{const{canvasID:t,scale:n,page:i}=e,o=Object(u.c)(),l=Object(a.useCallback)(((e,a)=>{const{x:s,y:l}=a.getClientOffset(),{type:r,subProcess:c}=e,d=a.getInitialClientOffset(),u=a.getInitialSourceClientOffset(),p=document.getElementById(t).getBoundingClientRect(),m=r===T.B.MILESTONE?T.A:T.y,b=r===T.B.MILESTONE?T.x:T.v;Object(ke.C)(r,i,(s-p.x+m/2-(d.x-u.x))/n,(l-p.y+b/2-(d.y-u.y))/n,{subProcess:c})(o)}),[o,t,i,n]),[,r]=Object(m.e)({accept:[T.B.TASK,T.B.BEGIN,T.B.MILESTONE,T.B.BU],drop:l});return s.a.createElement("div",{ref:r,style:{width:"100%",height:"100%",position:"relative"}},e.children)})),ts=n(177),ns=n.n(ts),as=()=>{const{t:e}=Object(h.c)(),t=Object(u.c)(),[n,i]=Object(a.useState)(!1),o=Object(u.d)((e=>!e.process.ui.hideElements.nodeNames)),l=Object(u.d)((e=>!e.process.ui.hideElements.jumps)),r=Object(a.useCallback)(((e,n)=>Object(Ge.l)(n,e)(t)),[t]);return s.a.createElement(ss,{opened:n},s.a.createElement(is,{opened:n,onClick:()=>i(!n)},s.a.createElement(ls,null),s.a.createElement(ls,null),s.a.createElement(ls,null),s.a.createElement(ls,null),s.a.createElement(ls,null),s.a.createElement(ls,null),s.a.createElement(ls,null),s.a.createElement(ls,null)),n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(os,{htmlFor:"node-names-switch"},s.a.createElement("span",{style:{color:o?T.i.WHITE:T.i.LIGHT_GREY}},e("Node names")),s.a.createElement(ns.a,{id:"node-names-switch",uncheckedIcon:!1,checkedIcon:!1,onColor:T.i.DARK_GREY,offColor:T.i.DARK_GREY,onHandleColor:T.i.BLUE,offHandleColor:T.i.LIGHT_GREY,handleDiameter:20,width:50,checked:o,onChange:e=>r(!e,"nodeNames")})),s.a.createElement("hr",null),s.a.createElement(os,{htmlFor:"node-jumps-switch"},s.a.createElement("span",{style:{color:l?T.i.WHITE:T.i.LIGHT_GREY}},e("Jump links")),s.a.createElement(ns.a,{id:"node-jumps-switch",uncheckedIcon:!1,checkedIcon:!1,onColor:T.i.DARK_GREY,offColor:T.i.DARK_GREY,onHandleColor:T.i.BLUE,offHandleColor:T.i.LIGHT_GREY,handleDiameter:20,width:50,checked:l,onChange:e=>r(!e,"jumps")}))))};const ss=y.b.div`
  pointer-events: all;
  display: inline-block;
  position: absolute;
  bottom: 22px;
  right: 22px;
  pointer-events: all;
  width: 180px;
  background-color: #2B2C2D;
  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 15px 0px;
  border-radius: 12px;
  outline: none;
  font-weight: bold;
  font-size: 12px;
  font-family: Lato;

  ${e=>!e.opened&&y.a`
    height: 24px;
  `}
`,is=y.b.span`
  display: flex;
  cursor: pointer;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin-bottom: .5rem;
  height: 24px;
  border-radius: 12px 12px 0 0;
  background-color: ${T.i.DARK_GREY};

  ${e=>!e.opened&&y.a`
    border-radius: 12px;
    height: 100%;
  `}
`,os=y.b.label`
  pointer-events: all;
  padding: 5px 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
`,ls=y.b.span`
  display: inline-block;
  width: 2px;
  margin: 0 1px;
  height: 8px;
  opacity: 0.5;
  pointer-events: none;
  background-color: ${T.i.LIGHT_GREY};
`;var rs=e=>{const t={fill:e.style&&e.style.color||T.i.BLACK};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 175 90",width:15,height:15},e),s.a.createElement("path",{style:t,d:"m87.9,44.4c0,6.4 -1,12.2 -3.1,17.7c-2.1,5.4 -5.1,10.1 -8.9,14.1c-3.8,4 -8.5,7 -13.9,9.3s-11.4,3.3 -18,3.3c-6.6,0 -12.5,-1.1 -17.9,-3.3s-10,-5.3 -13.9,-9.3c-3.9,-4 -6.9,-8.6 -9,-14.1c-2.1,-5.4 -3.2,-11.3 -3.2,-17.7s1.1,-12.2 3.2,-17.7c2.1,-5.4 5.1,-10.1 9,-14.1c3.9,-4 8.5,-7 13.9,-9.3c5.4,-2.2 11.4,-3.3 17.9,-3.3c4.4,0 8.5,0.5 12.4,1.5c3.9,1 7.4,2.5 10.7,4.3c3.2,1.9 6.1,4.1 8.7,6.8s4.8,5.6 6.6,8.9c1.8,3.3 3.2,6.8 4.1,10.7c0.9,3.9 1.4,8 1.4,12.2zm-16.5,0c0,-4.8 -0.6,-9 -1.9,-12.8c-1.3,-3.8 -3.1,-7 -5.5,-9.6c-2.4,-2.6 -5.2,-4.7 -8.6,-6.1c-3.4,-1.4 -7.2,-2.1 -11.4,-2.1c-4.2,0 -8.1,0.7 -11.4,2.1c-3.4,1.4 -6.3,3.4 -8.6,6.1c-2.4,2.6 -4.2,5.9 -5.5,9.6c-1.3,3.8 -1.9,8.1 -1.9,12.8c0,4.8 0.6,9 1.9,12.8c1.3,3.8 3.1,7 5.5,9.6c2.4,2.6 5.3,4.6 8.6,6c3.4,1.4 7.2,2.1 11.4,2.1c4.2,0 8,-0.7 11.4,-2.1c3.4,-1.4 6.2,-3.4 8.6,-6c2.4,-2.6 4.2,-5.8 5.5,-9.6c1.3,-3.8 1.9,-8 1.9,-12.8z"}),s.a.createElement("path",{style:t,d:"m175.3,1l0,86.8l-8.3,0c-1.3,0 -2.4,-0.2 -3.2,-0.6c-0.9,-0.4 -1.7,-1.1 -2.5,-2.1l-45.3,-57.8c0.2,2.6 0.4,5.1 0.4,7.3l0,53.2l-14.2,0l0,-86.8l8.5,0c0.7,0 1.3,0 1.8,0.1c0.5,0.1 0.9,0.2 1.3,0.4c0.4,0.2 0.8,0.4 1.1,0.8c0.4,0.3 0.8,0.8 1.2,1.4l45.5,58.1c-0.1,-1.4 -0.2,-2.8 -0.3,-4.1c-0.1,-1.4 -0.1,-2.6 -0.1,-3.8l0,-52.7l14.1,0l0,-0.2z"}))},cs=e=>{const t={fill:e.style&&e.style.color||T.i.BLACK};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 225 90",width:15,height:15},e),s.a.createElement("path",{style:t,d:"m87.9,44.4c0,6.4 -1,12.2 -3.1,17.7c-2.1,5.4 -5.1,10.1 -8.9,14.1c-3.8,4 -8.5,7 -13.9,9.3s-11.4,3.3 -18,3.3c-6.6,0 -12.5,-1.1 -17.9,-3.3s-10,-5.3 -13.9,-9.3c-3.9,-4 -6.9,-8.6 -9,-14.1c-2.1,-5.4 -3.2,-11.3 -3.2,-17.7s1.1,-12.2 3.2,-17.7c2.1,-5.4 5.1,-10.1 9,-14.1c3.9,-4 8.5,-7 13.9,-9.3c5.4,-2.2 11.4,-3.3 17.9,-3.3c4.4,0 8.5,0.5 12.4,1.5c3.9,1 7.4,2.5 10.7,4.3c3.2,1.9 6.1,4.1 8.7,6.8s4.8,5.6 6.6,8.9c1.8,3.3 3.2,6.8 4.1,10.7c0.9,3.9 1.4,8 1.4,12.2zm-16.5,0c0,-4.8 -0.6,-9 -1.9,-12.8c-1.3,-3.8 -3.1,-7 -5.5,-9.6c-2.4,-2.6 -5.2,-4.7 -8.6,-6.1c-3.4,-1.4 -7.2,-2.1 -11.4,-2.1c-4.2,0 -8.1,0.7 -11.4,2.1c-3.4,1.4 -6.3,3.4 -8.6,6.1c-2.4,2.6 -4.2,5.9 -5.5,9.6c-1.3,3.8 -1.9,8.1 -1.9,12.8c0,4.8 0.6,9 1.9,12.8c1.3,3.8 3.1,7 5.5,9.6c2.4,2.6 5.3,4.6 8.6,6c3.4,1.4 7.2,2.1 11.4,2.1c4.2,0 8,-0.7 11.4,-2.1c3.4,-1.4 6.2,-3.4 8.6,-6c2.4,-2.6 4.2,-5.8 5.5,-9.6c1.3,-3.8 1.9,-8 1.9,-12.8z"}),s.a.createElement("path",{style:t,d:"m118.3,13.9l0,25.7l32.5,0l0,12.9l-32.5,0l0,35.3l-16.2,0l0,-86.8l54.7,0l0,12.8l-38.5,0l0,0.1z"}),s.a.createElement("path",{style:t,d:"m186.2,13.9l0,25.7l32.5,0l0,12.9l-32.5,0l0,35.3l-16.2,0l0,-86.8l54.7,0l0,12.8l-38.5,0l0,0.1z"}))},ds=e=>{const t={fill:e.style&&e.style.color||T.i.BLACK};return s.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 69.9 69.9",width:15,height:15},e),s.a.createElement("path",{style:t,d:"M36.7,14l2.7-2.7c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0l-6,6c-0.1,0.1-0.2,0.2-0.3,0.3c0,0-0.1,0.1-0.1,0.2 c0,0.1-0.1,0.1-0.1,0.2c0,0.1,0,0.1-0.1,0.2c0,0.1,0,0.1-0.1,0.2c-0.1,0.3-0.1,0.5,0,0.8c0,0.1,0,0.1,0.1,0.2c0,0.1,0,0.1,0.1,0.2 c0,0.1,0.1,0.1,0.1,0.2c0,0.1,0.1,0.1,0.1,0.2c0.1,0.1,0.2,0.2,0.3,0.3l6,6c0.4,0.4,0.9,0.6,1.4,0.6s1-0.2,1.4-0.6 c0.8-0.8,0.8-2,0-2.8l-2.5-2.5C45.4,19,52,26.2,52,35c0,6-3.1,11.4-8.2,14.5c-0.9,0.6-1.2,1.8-0.7,2.7c0.4,0.6,1,1,1.7,1 c0.4,0,0.7-0.1,1-0.3C52.2,49.1,56,42.3,56,35C56,24,47.5,14.9,36.7,14z"}),s.a.createElement("path",{style:t,d:"M39.8,54.7c0-0.1,0-0.1,0.1-0.2c0-0.1,0-0.1,0.1-0.2c0.1-0.3,0.1-0.5,0-0.8c0-0.1,0-0.1-0.1-0.2c0-0.1,0-0.1-0.1-0.2 c0-0.1-0.1-0.1-0.1-0.2c0-0.1-0.1-0.1-0.1-0.2c-0.1-0.1-0.2-0.2-0.3-0.3l-6-6c-0.8-0.8-2-0.8-2.8,0c-0.8,0.8-0.8,2,0,2.8l2.5,2.5 C24.5,50.9,18,43.7,18,35c0-5.6,2.8-10.8,7.4-14c0.9-0.6,1.1-1.9,0.5-2.8c-0.6-0.9-1.9-1.1-2.8-0.5C17.4,21.6,14,28,14,35 c0,11,8.5,20,19.3,20.9l-2.7,2.7c-0.8,0.8-0.8,2,0,2.8c0.4,0.4,0.9,0.6,1.4,0.6s1-0.2,1.4-0.6l6-6c0.1-0.1,0.2-0.2,0.3-0.3 c0,0,0.1-0.1,0.1-0.2C39.7,54.8,39.8,54.8,39.8,54.7z"}))},us=e=>{const{procID:t,canvasID:n,link:a}=e,i=Object(u.d)((e=>Object(ke.hb)(e,{procID:t,...a}))),o=i.type===T.u.UNLOCK||i.type===T.u.LOCK?Ya(Ha({...i.jump.from,x:i.jump.from.x+.35*i.jump.from.width,y:i.jump.from.y-.15*i.jump.from.height},{...i.jump.to}),Ha({...i.from},{...i.to})):Ya(Ha({...i.jump.from,x:i.jump.from.x+.35*i.jump.from.width,y:i.jump.from.y-.15*i.jump.from.height},{...i.jump.to}),{...i.from,x:i.from.x+.35*i.from.width,y:i.from.y-.35*i.from.height}),l=i.type===T.u.UNLOCK||i.type===T.u.DISABLE?T.i.DARK_RED:i.type===T.u.LOCK||i.type===T.u.ENABLE?T.i.DARK_GREEN:T.i.YELLOW,r=i.type===T.u.DISABLE?T.i.DARK_RED:i.type===T.u.ENABLE?T.i.DARK_GREEN:T.i.YELLOW;return s.a.createElement(s.a.Fragment,null,(i.type===T.u.UNLOCK||i.type===T.u.LOCK)&&s.a.createElement(Wa,{canvasID:n,className:"node-link",id:`link-${i.type}-${i.from.id}-${i.to.id}`,procID:t,from:i.from.id,to:i.to.id,type:i.type,color:l}),s.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/1999/xhtml",className:"node-link no-hover",width:o.width,height:o.height,style:{left:o.left,top:o.top,zIndex:2,opacity:.5}},s.a.createElement("path",{d:o.path,style:{stroke:r},strokeDasharray:6})),(i.type===T.u.ENABLE||i.type===T.u.DISABLE||i.type===T.u.RESET)&&s.a.createElement("span",{className:"jump-link-bt",onContextMenu:e=>e.stopPropagation(),style:{left:i.from.x+.35*i.from.width,top:i.from.y-.35*i.from.height,backgroundColor:l,borderColor:l,borderStyle:"solid",borderWidth:1,zIndex:1e4}},i.type===T.u.ENABLE&&s.a.createElement(rs,{width:18,height:18,style:{transform:"rotate(-45deg)"}}),i.type===T.u.DISABLE&&s.a.createElement(cs,{width:18,height:18,style:{transform:"rotate(-45deg)"}}),i.type===T.u.RESET&&s.a.createElement(ds,{width:18,height:18,style:{transform:"rotate(-45deg)"}})))};const ps=Object(F.a)((e=>e.process.entities.byIds),((e,t)=>t),((e,t)=>t&&e[t]?Object(ke.P)(e[t].present,t,!0):[])),ms=Object(Ke.a)(((e,t)=>{let{id:n}=t;return e.process.entities.byIds[n]&&e.process.entities.byIds[n].present.jumps}),((e,t)=>{let{id:n}=t;return e.process.entities.byIds[n]&&e.process.entities.byIds[n].present.nodes}),((e,t)=>{let{id:n}=t;return e.process.entities.byIds[n]&&e.process.entities.byIds[n].present.subProcesses}),((e,t)=>{let{id:n,page:a}=t;return{id:n,page:a}}),((e,t,n,a)=>{let{id:s,page:i}=a;return s&&e&&t?e.filter((a=>a.from&&a.to&&!Object(ke.V)(t,e,a.from)&&!Object(ke.V)(t,e,a.to)&&(!i&&(!n.allIds.some((e=>n.byIds[e].nodes.includes(a.from)))||!n.allIds.some((e=>n.byIds[e].nodes.includes(a.to))))||i&&n.byIds[i].nodes.includes(a.from)&&n.byIds[i].nodes.includes(a.to)))):[]}));var bs=e=>{const[t]=Object(a.useState)(!0),[n,i]=Object(a.useState)(1),{loading:o,procID:l}=e,r=Object(u.c)(),c=Object(u.e)().getState,d=Object(u.d)((e=>Object(ke.jb)(e,l))),p=Object(u.d)(Ge.d),m=Object(u.d)((e=>ps(e,l))),b=Object(u.d)((e=>ms(e,{id:l,page:d.id}))),y=Object(u.d)((e=>Object(ke.M)(e,{procID:l,page:d.id}))),f=Object(u.d)((e=>e.process.entities.byIds[l]&&Object(ke.T)(e.process.entities.byIds[l].present))),E=Object(u.d)((e=>e.process.entities.byIds[l]?Object(ke.O)(e.process.entities.byIds[l].present,{page:d.id,includeCollapsed:!1}):[])),v=Object(a.useCallback)((e=>{if("process-canvas"!==document.activeCanvas)return;const t=E.filter((t=>{const n=document.getElementById("process-canvas").parentNode.getBoundingClientRect(),a=document.getElementById("process-node-"+t).getBoundingClientRect(),s={left:a.left-n.left,top:a.top-n.top,right:a.left-n.left+a.width,bottom:a.top-n.top+a.height};return Object(L.h)(e,s)}));document.body.dispatchEvent(new CustomEvent(T.J,{detail:t}))}),[E]),x=Object(a.useCallback)((e=>Object(ke.sb)(l,e.detail.offset)(r,c)),[r,c,l]);Object(a.useEffect)((()=>{document.activeCanvas="process-canvas"})),Object(g.a)("process-node-drag",x,document.body),Object(g.a)(T.K,(e=>v(e.detail)),document.body),Object(g.a)(T.H,(()=>t&&document.dispatchEvent(new Event(T.I))),document),Object(g.a)(T.e,(e=>Object(ke.D)(l,e.detail)(r,c)),document),Object(g.a)(T.f,(()=>Object(ke.E)(l)(r,c)),document),Object(g.a)(T.h,(()=>Object(ke.F)(l,"","",!0)(r,c)),document),Object(g.a)(T.g,(e=>Object(ke.ob)(l,e.detail)(r,c)),document),Object(g.a)(T.C,(e=>Object(ke.fb)(l,e.detail?{x:(e.detail.x-document.getElementById("process-canvas").getBoundingClientRect().x)/n,y:(e.detail.y-document.getElementById("process-canvas").getBoundingClientRect().y)/n}:null)(r,c)),document);const I=Object(a.useCallback)(((e,t)=>{const a=document.getElementById("process-canvas").getBoundingClientRect(),s=a.width-T.y*n-24,i=a.height-T.v*n-24,o=e?e.clientX-a.x-T.y*n/2:Math.floor(P()()*(s-24+1))+24,l=e?e.clientY-a.y-T.v*n/2:Math.floor(P()()*(i-24+1))+24;Object(ke.C)(t,d.id,o/n,l/n)(r)}),[r,d,n]),w=Object(a.useMemo)((()=>e=>I(e,T.B.TASK)),[I]),S=Object(a.useMemo)((()=>e=>I(e,T.B.BU)),[I]),j=Object(a.useMemo)((()=>e=>I(e,T.B.BEGIN)),[I]),C=Object(a.useMemo)((()=>e=>I(e,T.B.MILESTONE)),[I]),k=Object(a.useCallback)((e=>Object(ke.J)(l,e)(r,c)),[r,c,l]),D=Object(a.useCallback)((e=>e!==d.name?Object(ke.gb)(l,d.id,e)(r):null),[d,l,r]),[N,,A,R,F]=((e,t,n)=>{const[s,i]=Object(a.useState)(!1),o=Object(a.createRef)(),l=e;Object(a.useEffect)((()=>(n&&(document.activeCanvas=n),s?document.addEventListener("click",d,!1):document.removeEventListener("click",d,!1),()=>{document.removeEventListener("click",d,!1),n&&(document.activeCanvas=n)})));const r=Object(a.useCallback)((()=>{if(o.current){const e=o.current.value;e!==l&&t&&t(e)}i(!1)}),[o,l,t]),c=Object(a.useCallback)((()=>i(!0)),[]),d=Object(a.useCallback)((e=>o.current!==e.target&&r()),[r,o]);return[s,i,o,c,r]})(d.id,D,"process-canvas"),U=Object(a.useCallback)((()=>{F(),Object(ke.eb)(l,null)(r)}),[F,l,r]),[$]=Object(h.c)(),_=Object(L.b)(E.map((e=>({id:e,linksIn:0,linksOut:0}))),"id");return s.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},s.a.createElement(O.b,{id:"process-canvas-context",holdToDisplay:-1},s.a.createElement(es,{canvasID:"process-canvas",procID:l,scale:n,page:d.id},s.a.createElement(Ie,{canvasID:"process-canvas",onScaleUpdate:i,tabIndex:"0"},E.map((e=>s.a.createElement(Qa,{key:e,page:d.id,id:e,canvasID:"process-canvas",procID:l,scale:n,onDelete:k}))),m.filter((e=>void 0!==_[e.from]&&void 0!==_[e.to])).map((e=>s.a.createElement(Wa,{canvasID:"process-canvas",className:"node-link",key:`link-${e.from}-${e.to}`,id:`link-${e.from}-${e.to}`,procID:l,from:e.from,to:e.to,type:e.type,color:e.color}))),b.map((e=>s.a.createElement(Wa,{canvasID:"process-canvas",className:"node-link",key:e.id,id:e.id,procID:l,from:e.from,to:e.to,type:"jump",color:T.i.YELLOW}))),y.map(((e,t)=>s.a.createElement(us,{key:`link-${e.type}-${e.from.id}-${e.to.id}-${t}`,procID:l,canvasID:"process-canvas",link:e,page:d.id})))))),s.a.createElement(ys,{onClick:()=>Object(B.h)(l,T.r.PROCESS),icon:s.a.createElement(ie,{style:{color:T.i.LIGHT_GREY}})}),d.id&&s.a.createElement(gs,{className:"noselect",onClick:U,label:$("Back to main process"),icon:s.a.createElement(je,{style:{color:T.i.WHITE},width:10,height:10})}),s.a.createElement(as,null),o&&s.a.createElement(hs,null),d.id&&(N?s.a.createElement("input",{ref:A,type:"text",defaultValue:d.name,style:Object.assign({},Pe.canvasTitle,{color:"#FFF"}),onKeyDown:Object(L.j)(F)}):s.a.createElement("span",{style:Pe.canvasTitle,onClick:R},s.a.createElement("span",{style:{cursor:"text"}},d.name),s.a.createElement(Ce,{style:{marginLeft:5,cursor:"pointer"}}))),s.a.createElement(O.a,{id:"process-canvas-context",className:"process-canvas-context"},!f&&s.a.createElement(O.c,{onClick:j},"+ ",$("Add Begin")),s.a.createElement(O.c,{onClick:w},"+ ",$("Add Task Node")),s.a.createElement(O.c,{onClick:C},"+ ",$("Add Milestone")),s.a.createElement(O.c,{onClick:S},"+ ",$("Add State Machine Task")),s.a.createElement(O.c,{divider:!0}),s.a.createElement(O.c,{onClick:()=>{const{x:e,y:t}=document.querySelector(".process-canvas-context").getBoundingClientRect();Object(T.p)({x:e,y:t})},disabled:!p},$("Paste Node(s)"))))};const hs=y.b.div`
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.2);
  z-index: 9999;
`,ys=Object(y.b)(te)`
  position: absolute;
  top: 22px;
  right: 22px;
`,gs=Object(y.b)(te)`
  position: absolute;
  top: 22px;
  left: 22px;
`;var fs=e=>{const{procID:t}=e,n=Object(u.d)((e=>e.process.entities.byIds[t]&&e.process.entities.byIds[t].present.editBU));return s.a.createElement("div",{style:{width:"100%",position:"absolute",bottom:T.D,top:T.O}},!n&&s.a.createElement(bs,{procID:t}),n&&s.a.createElement(Ua,{file:n,procID:t}))},Es=y.b.span`
  position: absolute;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  cursor: pointer;

  &:hover svg path {
  fill: #ABABAB !important;
  }

  &:active svg path {
  fill: #888 !important;
  }
`,vs=()=>{const e=Object(u.c)(),t=Object(A.b)("about").bind(null,e),n=Object(u.d)((e=>{let{ui:t}=e;return"about"===t.showModal})),[i]=Object(a.useState)(!1),[o]=Object(h.c)();return s.a.createElement(d.a,{isOpen:n,overlayClassName:"neditor-modal-overlay",className:"neditor-modal-content with-padding",shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,closeTimeoutMS:150,onRequestClose:t},s.a.createElement(Es,{onClick:t},s.a.createElement(v,{style:{color:"#777"},width:10,height:10})),s.a.createElement("div",{style:Object.assign({},i&&{position:"absolute",top:20,left:60,textAlign:"left"})},s.a.createElement(rt,{style:Object.assign({},{marginBottom:"1rem",marginLeft:i?-40:0},i&&{marginBottom:"1.75rem"})}),s.a.createElement("span",{style:{fontSize:"0.75rem"}},o("Version"),":"," ","1.0.0")),i&&s.a.createElement("hr",{style:{margin:"4.5rem 0 0.5rem 0",borderColor:"#3B3B3B"}}),i&&s.a.createElement("p",{style:{paddingRight:10,textAlign:"justify",overflowY:"scroll",maxHeight:"50vh",pointerEvents:"all"}},o("legalStatementContent")))};const xs=[{label:"Create a New Process",accelerator:"Ctrl + N"},{label:"Open File",accelerator:"Ctrl + O"},{label:"Open the last closed File",accelerator:"Ctrl + Shift + T"},{label:"Save File",accelerator:"Ctrl + S"},{label:"Save File As",accelerator:"Ctrl + Shift + S"},{label:"Save All Files",accelerator:"Ctrl + Alt + S"},{label:"Import Process/Import State Machine",accelerator:"Ctrl + I"},{label:"Export Process/Export State Machine",accelerator:"Ctrl + E"},{label:"Close File",accelerator:"Ctrl + W"},{label:"Quit Editor",accelerator:"Ctrl + Q / Alt + F4"},{label:"Undo",accelerator:"Ctrl + Z"},{label:"Redo",accelerator:"Ctrl + Shift + Z"},{label:"Cut",accelerator:"Ctrl + X"},{label:"Copy",accelerator:"Ctrl + C"},{label:"Paste",accelerator:"Ctrl + V"},{label:"Delete",accelerator:"Del"},{label:"Select All",accelerator:"Ctrl + A"},{label:"Previous Document",accelerator:"Ctrl + Shift + Tab"},{label:"Next Document",accelerator:"Ctrl + Tab"},{label:"Zoom In",accelerator:"Ctrl + PageUp"},{label:"Zoom Out",accelerator:"Ctrl + PageDown"},{label:"Reset Zoom",accelerator:"Ctrl + 0"},{label:"Close BU State Canvas",accelerator:"Esc"},{label:"Relocate the canvas ½ unit to the top",accelerator:"↑"},{label:"Relocate the canvas 1 unit to the top",accelerator:"↑ + Shift"},{label:"Relocate the canvas ½ unit to the bottom",accelerator:"↓"},{label:"Relocate the canvas 1 unit to the bottom",accelerator:"↓ + Shift"},{label:"Relocate the canvas ½ unit to the left",accelerator:"←"},{label:"Relocate the canvas 1 unit to the left",accelerator:"← + Shift"},{label:"Relocate the canvas ½ unit to the right",accelerator:"→"},{label:"Relocate the canvas 1 unit to the right",accelerator:"→ + Shift"}];var Is=()=>{const e=Object(u.c)(),t=Object(A.b)("shortcuts").bind(null,e),n=Object(u.d)((e=>{let{ui:t}=e;return"shortcuts"===t.showModal})),[a]=Object(h.c)();return s.a.createElement(d.a,{isOpen:n,overlayClassName:"neditor-modal-overlay",className:"neditor-modal-content with-padding no-center",shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,closeTimeoutMS:150,onRequestClose:t},s.a.createElement(Es,{onClick:t},s.a.createElement(v,{style:{color:"#777"},width:10,height:10})),s.a.createElement(rt,{style:{marginBottom:"1rem",position:"absolute",top:20,left:20}}),s.a.createElement("strong",{style:{marginTop:"4rem"}},a("Shortcuts")),s.a.createElement("hr",{style:{margin:"0.5rem 0 1rem -0.5rem",borderColor:"#3B3B3B"}}),s.a.createElement("div",{style:{maxHeight:"60vh",overflowY:"scroll",paddingRight:10}},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,a("Action")),s.a.createElement("th",null,a("Shortcut")))),s.a.createElement("tbody",null,xs.map(((e,t)=>s.a.createElement("tr",{key:t,className:j()({even:t%2==0})},s.a.createElement("td",null,a(e.label)),s.a.createElement("td",{className:"blue"},e.accelerator))))))))};const ws=window.isStandalone?window.require("electron-json-storage"):localStorage;var Os=e=>{const{t:t}=Object(h.c)(),{optionShowOnce:n,translateText:i,title:o,textMessage:l,id:r,resolve:c,textOK:u}=e,[p,m]=Object(a.useState)(!1),[b,y]=Object(a.useState)(!1);if(n&&!b&&!p)if(m(!0),window.isStandalone)ws.get(`modal-${e.id}-seen`,(function(t,n){if(!t&&!0===n)return e.resolve(),null;m(!1),y(!0)}));else{if("true"===ws.getItem(`modal-${e.id}-seen`))return e.resolve(),null;m(!1),y(!0)}return!p&&s.a.createElement(d.a,{isOpen:!0,overlayClassName:"neditor-modal-overlay",className:"neditor-modal-content",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,closeTimeoutMS:150},s.a.createElement("span",{style:Ss.question},i?t(o):o),i?s.a.createElement("p",null,s.a.createElement(h.a,{i18nKey:l})):s.a.createElement("p",null,l),s.a.createElement("div",{className:"buttons",style:Object.assign({},Ss.buttons,n&&{justifyContent:"space-between"})},n&&s.a.createElement("p",{style:{margin:0}},s.a.createElement("input",{type:"checkbox",name:"showOnce",id:"showOnce"}),s.a.createElement("label",{htmlFor:"showOnce",style:{marginLeft:"0.5rem",marginBottom:0}},t("Don't show this warning again"))),s.a.createElement("button",{style:Ss.button,onClick:()=>{n&&document.querySelector(".neditor-modal-content #showOnce").checked&&(window.isStandalone?ws.set(`modal-${r}-seen`,!0):ws.setItem(`modal-${r}-seen`,!0)),c()}},i?t(u):u)))};const Ss={question:{fontWeight:"bold",marginBottom:"0.5rem"},buttons:{width:"100%",justifyContent:"center",alignItems:"center"},button:{fontSize:"0.8rem"}};var js=n(269),Cs=n.n(js);const ks=window.isStandalone?window.require("electron-json-storage"):localStorage;var Ds=()=>{const e=Object(u.c)(),t=Object(a.useCallback)((()=>Object(A.b)("release-notes")(e)),[e]),n=Object(u.d)((e=>{let{ui:t}=e;return"release-notes"===t.showModal})),[i]=Object(h.c)(),[o,l]=Object(a.useState)();if(!o)if(window.isStandalone)ks.get("auto-update",((e,t)=>{if(e||!t.releaseNotes)return l(i("No release notes yet"));l(t.releaseNotes)}));else{const e=JSON.parse(ks.getItem("auto-update"));if(!(null==e?void 0:e.releaseNotes))return l(i("No release notes yet"));l(e.releaseNotes)}return s.a.createElement(d.a,{isOpen:n,overlayClassName:"neditor-modal-overlay",className:"neditor-modal-content with-padding no-center",shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,closeTimeoutMS:150,onRequestClose:t},s.a.createElement(Es,{onClick:t},s.a.createElement(v,{style:{color:"#777"},width:10,height:10})),s.a.createElement(rt,{style:{marginBottom:"1rem",position:"absolute",top:20,left:20}}),s.a.createElement("strong",{style:{marginTop:"4rem"}},i("Release Notes")),s.a.createElement("hr",{style:{margin:"0.5rem 0 1rem -0.5rem",borderColor:"#3B3B3B"}}),s.a.createElement("div",{style:{maxHeight:"60vh",minWidth:"50vw",overflowY:"scroll",paddingRight:10}},s.a.createElement(Cs.a,{source:o})))},Ns=e=>{const t={fill:"none",stroke:e.style&&e.style.color||"#5C5D5E",strokeWidth:4,strokeMiterlimit:10},n={fill:"none",stroke:e.style&&e.style.color||"#5C5D5E",strokeWidth:6,strokeMiterlimit:10};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100.03 92.44",width:30,height:30},e),s.a.createElement("g",null,s.a.createElement("g",null,s.a.createElement("circle",{style:t,cx:"24.77",cy:"66.87",r:"11.73"}),s.a.createElement("circle",{style:t,cx:"50.13",cy:"23.07",r:"11.73"}),s.a.createElement("circle",{style:t,cx:"75.26",cy:"66.44",r:"11.73"})),s.a.createElement("g",null,s.a.createElement("path",{style:n,d:"M38.51,24.75C27.98,29.2,20.59,39.63,20.59,51.78c0,1.3,0.08,2.57,0.25,3.82"}),s.a.createElement("path",{style:n,d:"M79.06,55.21c0.13-1.13,0.2-2.27,0.2-3.43c0-12.07-7.28-22.43-17.69-26.93"}),s.a.createElement("path",{style:n,d:"M32.74,75.55c4.83,3.5,10.77,5.56,17.18,5.56c6.37,0,12.27-2.03,17.08-5.48"}))))},Ls=s.a.memo((e=>{const{subProcess:t,id:n,type:i,style:o}=e,[,l,r]=Object(m.c)({item:{type:i,id:n,subProcess:t},collect:e=>({isDragging:e.isDragging()})});Object(a.useEffect)((()=>{r(Object(p.b)(),{captureDraggingState:!0})}),[r]);const c=s.a.createElement(Ma,Object.assign({},e,{style:Object.assign({},{marginBottom:"1rem"},o),noentry:i===T.B.BEGIN?1:0,nosubnode:t||i!==T.B.TASK&&i!==T.B.BU?1:0,nojumpnode:i!==T.B.TASK&&i!==T.B.BU?1:0,forceConnected:1}));return s.a.createElement("div",{ref:l},t?s.a.createElement(O.b,{holdToDisplay:-1,id:t},c):c)}));function Ts(e,t){if(!e||!t)return{display:"none"};let{x:n,y:a}=t;const s=`translate(${n}px, ${a}px)`;return{transform:s,WebkitTransform:s,cursor:"-webkit-grabbing"}}var Bs=()=>{const{itemType:e,isDragging:t,initialOffset:n,currentOffset:a}=Object(m.d)((e=>({itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})));return s.a.createElement(As,null,s.a.createElement("div",{style:Ts(n,a)},t&&s.a.createElement(Ma,{type:e,noentry:e===T.B.BEGIN?1:0,nojumpnode:e!==T.B.TASK&&e!==T.B.BU?1:0,nosubnode:e!==T.B.TASK&&e!==T.B.BU?1:0,forceConnected:1,style:{opacity:1}})))};const As=y.b.div`
  position: fixed;
  pointer-events: none;
  z-index: 100000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
`;var Rs=e=>{const{disabled:t,procID:n}=e,[i,o]=Object(a.useState)(!1),l=Object(u.c)(),{t:r}=Object(h.c)(),c=Object(u.d)((e=>Object(ke.kb)(e,n)))||[],d=Object(a.useCallback)((()=>Object(ke.F)(n)(l)),[l,n]),p=Object(a.useCallback)((e=>Object(ke.eb)(n,e)(l)),[l,n]),m=Object(a.useCallback)((e=>Object(ke.K)(n,e)(l)),[l,n]);return s.a.createElement(Ps,{className:"library",closed:i||t?1:0},s.a.createElement(Fs,null,s.a.createElement(Us,{onClick:()=>!t&&o(!i)},s.a.createElement(At,{style:{pointerEvents:"none"}}))),!t&&s.a.createElement($s,{closed:i},s.a.createElement(_s,null,!i&&s.a.createElement(Ms,null,s.a.createElement(Ns,{style:{color:"#3E50FF",margin:"0 1rem 0 1rem"}}),s.a.createElement(Vs,null,r("Nodes"))),s.a.createElement(qs,{closed:i},s.a.createElement(Gs,{closed:i},s.a.createElement(Ls,{className:"node",type:T.B.TASK,small:i?1:0,medium:!i}),!i&&s.a.createElement(Ks,null,r("Task Node"))),s.a.createElement(Gs,{closed:i},s.a.createElement(Ls,{className:"node",type:T.B.BU,small:i?1:0,medium:!i}),!i&&s.a.createElement(Ks,null,r("State Machine Task"))),s.a.createElement(Gs,{closed:i},s.a.createElement(Ls,{className:"node",type:T.B.MILESTONE,small:i?1:0,medium:!i,style:{marginBottom:"0.25rem"}}),!i&&s.a.createElement(Ks,null,r("Milestone"))),s.a.createElement(Gs,{closed:i},s.a.createElement(Ls,{className:"node",type:T.B.BEGIN,small:i?1:0,medium:!i}),!i&&s.a.createElement(Ks,null,r("Begin Node"))))),s.a.createElement(_s,null,!i&&s.a.createElement(Ms,null,s.a.createElement(Et,{style:{color:"#3E50FF",margin:"0 1rem 0 1rem"}}),s.a.createElement(Vs,null,r("Sub-processes"))),s.a.createElement(qs,{closed:i},c.map((e=>s.a.createElement(s.a.Fragment,{key:e.id},s.a.createElement(Gs,{closed:i},s.a.createElement(Ls,{onDoubleClick:()=>p(e.id),subProcess:e.id,className:"node",type:T.B.TASK,small:i?1:0,medium:!i}),!i&&s.a.createElement(Ks,null,e.name)),s.a.createElement(O.a,{id:e.id},s.a.createElement(O.c,{onClick:()=>p(e.id)},r("Edit")),s.a.createElement(O.c,{onClick:()=>m(e.id)},r("Delete")))))),s.a.createElement(Gs,{closed:i},s.a.createElement(zs,{onClick:d},s.a.createElement(se,{width:18,height:18,style:{pointerEvents:"none"}})),!i&&s.a.createElement(Ks,null,r("New Sub-Process")))))),s.a.createElement(Bs,null))};const Ps=y.b.div`
  display: flex;
  align-items: stretch;
  justify-content: center;
  height: 100%;
  background-color: #262829;
  box-shadow: rgba(0,0,0,0.15) 5px 0px 20px 0px;

  ${e=>e.closed&&y.a`
    flex-direction: column;
    justify-content: flex-start;
  `}
`,Fs=y.b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  width: 65px;
  min-height: 65px;
`,Us=y.b.span`
  width: 100%;
  height: 65px;
  min-height: 65px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  ${e=>e.disabled&&y.a`
    cursor: not-allowed;
  `}
`,$s=y.b.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  width: 13vw;
  min-width: 120px;
  max-width: 250px;
  height: 100%;
  padding: 1rem 1.5rem 1rem 1rem;
  overflow: auto;
  overflow-x: hidden;

  ${e=>e.closed&&y.a`
    min-width: 0;
    width: auto;
    height: auto;
    padding: 1rem 0 0.5rem 0;
    background-color: ${T.i.DARK_GREY};
    border-radius: 9px;
  `}
`,_s=y.b.div`
  &:not(:first-child) {
    margin-top: 1rem;
  }
`,Ms=y.b.span`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  margin-bottom: 1rem;
  margin-left: -1rem;
  margin-right: -1rem;
`,Vs=y.b.span`
  font-weight: bold;
  font-size: 1.25rem;
  font-family: Lato;
  word-wrap: break-word;
`,qs=y.b.div`
  border-radius: 9px;
  background-color: ${T.i.DARK_GREY};
  padding: 1rem 0.5rem 0 0.5rem;
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  flex-wrap: wrap;

  ${e=>e.closed&&y.a`
    flex-direction: column;
    padding: 0;
    background-color: none;
  `}
`,Gs=y.b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  margin: 0 0.5rem 0.5rem 0.5rem;
  width: 40%;

  ${e=>e.closed&&y.a`
    margin: 0;
  `}
`,Ks=y.b.span`
  font-size: 0.75rem;
  font-weight: bold;
`,zs=y.b.span`
  display: flex;
  border-radius: 50%;
  height: ${T.z+"px"};
  width: ${T.w+"px"};
  background-color: ${T.i.DARKER_GREY};
  box-shadow: 0 4px 20px 0 rgba(0,0,0,0.2);
  box-sizing: content-box;
  border: none;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: border 0.1s ease-in;
  margin-bottom: 1rem;

  &:hover,
  &:focus {
    background-color: ${T.i.DARKER_GREY_DARK};
  }

  &:active {
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.2);
  }
`;var Ys=e=>{const[t]=Object(h.c)(),{procID:n}=e,[i,o]=Object(a.useState)(!0),[l,r]=Object(a.useState)(!0),c=Object(u.c)(),d=Object(u.d)((e=>Object(ke.kb)(e,n)))||[],p=Object(u.d)((e=>e.process.entities.byIds[n]&&e.process.entities.byIds[n].present.page)),m=Object(a.useCallback)((()=>{const e=document.getElementById("process-pages-wrapper");e.scrollWidth<=e.getBoundingClientRect().width?r(!0):r(!1)}),[]),b=Object(a.useCallback)((()=>{Object(ke.F)(n)(c),m()}),[m,c,n]),y=Object(a.useCallback)((e=>p!==e&&Object(ke.eb)(n,e)(c)),[c,n,p]),g=Object(a.useCallback)((e=>{Object(ke.K)(n,e)(c),m()}),[m,c,n]),f=Object(a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;t*=e?1:-1;const n=document.getElementById("process-pages-wrapper");t<0&&0===n.scrollLeft||(n.scrollBy({left:t,behavior:"smooth"}),n.scrollLeft+t<=0&&!i?o(!0):o(!1),(n.scrollWidth<=n.getBoundingClientRect().width||n.scrollLeft+t>=n.scrollWidth-n.clientWidth)&&!l?r(!0):r(!1))}),[i,l]),E=Object(a.useCallback)((e=>f(e.deltaY>0,Object(L.a)(e.deltaY))),[f]);return s.a.createElement(Hs,null,s.a.createElement(Xs,{onClick:()=>!i&&f(!1),disabled:i},"<"),s.a.createElement(Ws,null,s.a.createElement("div",{style:{overflow:"hidden",width:"100%"}},s.a.createElement(Zs,{onWheel:E,id:"process-pages-wrapper"},s.a.createElement(Qs,{onClick:()=>y(null),active:null===p},t("Process")),d.map((e=>s.a.createElement(s.a.Fragment,{key:e.id},s.a.createElement(O.b,{holdToDisplay:-1,id:"tab-"+e.id},s.a.createElement(Qs,{onClick:()=>y(e.id),active:p===e.id},e.name)),s.a.createElement(O.a,{id:"tab-"+e.id},s.a.createElement(O.c,{onClick:()=>g(e.id)},t("Delete")))))))),s.a.createElement(Js,{shadow:!l},s.a.createElement(te,{onClick:b,noShadow:!0,style:{width:25,height:25,marginLeft:5,marginRight:3},icon:s.a.createElement(se,null)}))),s.a.createElement(Xs,{onClick:()=>!l&&f(!0),disabled:l},">"))};const Hs=y.b.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  background-color: #1f2122;
  width: 100%;
  position: absolute;
  bottom: 0;
  height: ${T.D+"px"};

  & .react-contextmenu-wrapper {
    display: flex;
    flex-direction: row;
    align-items: center;
    flex: 0;
  }
`,Ws=y.b.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  background-color: ${T.i.DARKER_GREY};
  width: calc(100% - 70px);
  height: 30px;
  border-radius: 15px;
`,Zs=y.b.div`
  display: flex;
  align-items: center;
  height: 100%;
  border-radius: 15px 0 0 15px;
  overflow: hidden;
`,Js=y.b.span`
  height: 100%;
  border-left: 2px solid rgb(33, 35, 36);
  display: flex;
  align-items: center;

  ${e=>e.shadow&&y.a`
    box-shadow: -1px 0px 5px 0 rgba(0,0,0,0.2);
  `}
`,Xs=y.b.span`
  display: flex;
  height: 100%;
  width: 35px;  
  align-items: center;
  justify-content: center;
  text-align: center;
  cursor: pointer;

  ${e=>e.disabled&&y.a`
    color: ${T.i.LIGHT_GREY};
    pointer-events: none;
  `}

  ${e=>!e.disabled&&y.a`
    &:hover,
    &:focus {
      font-weight: bold;
      font-size: 16px;
      color: ${T.i.LIGHTER_GREY};
    }
    &:active {
      color: ${T.i.WHITE};
    }
  `}
`,Qs=y.b.span`
  font-family: Lato;
  font-weight: bold;
  font-size: 10px;
  height: 24px;
  flex: 0;
  border-radius: 12px;
  padding: 0 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  margin: 0 3px;
  cursor: pointer;
  white-space: nowrap;

  ${e=>e.active&&y.a`
    background-color: #333536;
  `}
`;var ei=e=>{let{children:t,width:n,height:a,backgroundColor:i,color:o,style:l}=e;return n=parseFloat(n)||24,a=parseFloat(a)||24,s.a.createElement("span",{className:"shadow",style:{...l,display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",borderRadius:"50%",backgroundColor:i||"#FFF",padding:5,width:n,height:a},color:o||"#1c1c1f"},t)};const{ipcRenderer:ti}=window.isStandalone?window.require("electron"):{};var ni=e=>{let{isInEditor:t}=e;const n=Object(u.c)(),i=Object(u.e)().getState,o=Object(u.d)((e=>e.file.recentFiles)),[l]=Object(h.c)();Object(a.useEffect)((()=>Object(qe.n)()(n,i)),[n,i]);const r=Object(a.useCallback)((e=>{e.preventDefault();const{nativeEvent:t}=e;if(!t.dataTransfer)return;const{files:n}=t.dataTransfer;Array.from(n).forEach((e=>{(e.name.endsWith(T.r.BU_EXT)||e.name.endsWith(T.r.PROCESS_EXT)||e.name.endsWith(T.r.NEDIT_EXT))&&(window.isStandalone?ti.send("open-editor",e.path):document.dispatchEvent(new CustomEvent("open-editor",{detail:{path:e.path}})))}))}),[]),c=Object(a.useCallback)((()=>{window.isStandalone?ti.send("open-editor"):document.dispatchEvent(new Event("open-editor")),window.isStandalone?ti.send("new-file",T.r.PROCESS):document.dispatchEvent(new CustomEvent("new-file",{detail:{filetype:T.r.PROCESS}}))}),[]),d=Object(a.useCallback)((()=>{window.isStandalone?ti.send("open-editor"):document.dispatchEvent(new Event("open-editor")),window.isStandalone?ti.send("new-file",T.r.BU):document.dispatchEvent(new CustomEvent("new-file",{detail:{filetype:T.r.BU}}))}),[]),p=Object(a.useCallback)((()=>window.isStandalone?ti.send("open-file"):document.dispatchEvent(new Event("open-file"))),[]),m=Object(a.useCallback)((()=>window.isStandalone?ti.send("quit-app"):document.dispatchEvent(new Event("quit-app"))),[]);return s.a.createElement(ai,{className:"noselect",onDrop:r,isInEditor:t},s.a.createElement(si,null,s.a.createElement(ci,{href:"#!",onClick:m},"✕"),s.a.createElement("h4",null,s.a.createElement(lt,{width:"42",height:"42",style:{marginRight:20}}),s.a.createElement("span",{style:{color:"#c8c8c8"}},"N"),s.a.createElement("span",{style:{color:"#575959"}},"Editor")),s.a.createElement(bi,null,s.a.createElement("div",{style:{marginBottom:"3rem"}},s.a.createElement(mi,null,l("New Project")),s.a.createElement(pi,null,s.a.createElement(di,{key:"bt-1",onClick:c},s.a.createElement(ei,{style:{pointerEvents:"none"},width:"35",height:"35",backgroundColor:"#3c4bff"},s.a.createElement(Et,{style:{color:"#FFF"}})),s.a.createElement(ui,null,l("New Process"))),s.a.createElement(di,{key:"bt-2",onClick:d},s.a.createElement(ei,{style:{pointerEvents:"none"},width:"35",height:"35",backgroundColor:"#ff3366"},s.a.createElement(ft,{style:{color:"#FFF"}})),s.a.createElement(ui,null,l("New State Machine"))))),s.a.createElement("div",null,s.a.createElement(mi,null,l("Open an existing Project")),s.a.createElement(pi,null,s.a.createElement(di,{key:"bt-3",onClick:p},s.a.createElement(ei,{style:{pointerEvents:"none"},width:"35",height:"35",backgroundColor:"#333536"},s.a.createElement(se,null)),s.a.createElement(ui,null,l("Open"))))))),!t&&s.a.createElement(ii,null,s.a.createElement(ri,null,l("Recent documents")),o&&s.a.createElement(oi,null,o.map(((e,t)=>s.a.createElement(li,{key:t,onClick:()=>window.isStandalone?ti.send("open-editor",e.path):document.dispatchEvent(new CustomEvent("open-editor",{detail:{path:e.path}}))},e.type===T.r.PROCESS&&s.a.createElement(ei,{style:{marginRight:10,pointerEvents:"none"},width:"26",height:"26",backgroundColor:"#3c4bff"},s.a.createElement(Et,{style:{color:"#FFF",width:14,height:14}})),e.type===T.r.BU&&s.a.createElement(ei,{style:{marginRight:10,pointerEvents:"none"},width:"26",height:"26",backgroundColor:"#ff3366"},s.a.createElement(ft,{style:{color:"#FFF",width:14,height:14}})),Object(L.d)(e.path)))))))};const ai=y.b.div`
  -webkit-app-region: drag;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: row;
  color: rgb(255, 255, 255);
  background-color: rgba(20, 20, 20, 0.95);
  ${e=>e.isInEditor&&"\n    justify-content: center;\n    padding-top: 10%;\n  "}
`,si=y.b.div`
  width: 66.6667%;
  padding: 3.5rem;
`,ii=y.b.div`
  -webkit-app-region: no-drag;
  width: 33.333333%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
`,oi=y.b.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 0 12px 0 20px;
  margin-right: 12px;
  overflow-y: auto;

  ::-webkit-scrollbar {
    background-color: rgba(0, 0, 0, 0);
    transform: translateX(-8px);
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: ${T.i.DARK_GREY};
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgba(190,192,204,0.1);
    border-radius: 4px;
  }
`,li=y.b.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  min-height: 42px;
  height: 42px;
  border-bottom: 1px solid #2D2D2D;
  color: #FFF;
  font-weight: bold;
  font-family: Lato;
  font-size: 12px;
  cursor: pointer;
`,ri=y.b.h1`
  width: 100%;
  border-bottom: 1px solid #2D2D2D;
  padding: 20px 20px;
  color: #868686;
  font-family: Lato;
  font-size: 14px;
  font-weight: 500;
`,ci=y.b.a`
  -webkit-app-region: no-drag;
  color: rgb(87, 89, 89);
  position: absolute;
  left: 2rem;
  top: 2rem;
  transform: translate(-50%, -50%);
  
  :hover {
    text-decoration: none;
    color: #FFF;
  }
`,di=y.b.div`
  -webkit-app-region: no-drag;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 0.6rem;
  position: relative;
  cursor: pointer;
  margin-right: 75px;
  
  :hover {
    color: orange;
  }
`,ui=y.b.span`
  -webkit-app-region: no-drag;
  margin-top: 1rem;
  position: absolute;
  bottom: -20px;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  cursor: pointer;
`,pi=y.b.div`
  -webkit-app-region: no-drag;
  display: flex;
  flex-direction: row;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
`,mi=y.b.h6`
  border-bottom: 1px solid rgb(87, 89, 89);
  font-size: 0.85rem;
  padding: 0.5rem;
  margin-bottom: 1rem;
  font-weight: normal;
`,bi=y.b.div`
  display: flex;
  flex-direction: column;
  padding: 3rem;
`,{ipcRenderer:hi,remote:yi}=window.isStandalone?window.require("electron"):{},gi=window.isStandalone?window.require("electron-is-dev"):window.isDev;window["__react-beautiful-dnd-disable-dev-warnings"]=!0;const fi=Object(Ke.a)((e=>e.file),(e=>e.files));var Ei=()=>{const[e]=Object(h.c)(),t=Object(u.c)(),n=Object(u.e)().getState,i=Object(u.d)((e=>e.file.currentFile)),o=Object(u.d)(fi),l=Object(u.d)(qe.r),r=Object(a.useCallback)((function(e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a?Object(B.c)(e,a)(t,n):window.isStandalone&&o.some((t=>t.path===e))||Object(B.f)(e,T.r.BU)(t,n)}),[t,o,n]),c=Object(a.useCallback)((e=>{window.isStandalone&&o.some((t=>t.path===e))||Object(B.f)(e,T.r.PROCESS)(t,n)}),[t,o,n]),d=Object(a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(((t,n)=>{e=!0===e;const a=o.find((e=>e.id===i));Object(B.h)(a.id,a.type,e).then(t)}))}),[i,o]),p=Object(a.useCallback)((()=>d(!0)),[d]),m=Object(a.useCallback)((()=>new Promise(((e,t)=>{Promise.all(o.map((e=>new Promise(((t,n)=>Object(B.h)(e.id,e.type,!1).then(t).catch(n)))))).then(e).catch(t)}))),[o]),b=Object(a.useCallback)((async e=>{try{const t=e&&e.detail?e.detail.file:i;if((e&&e.detail?e.detail.filetype:l)===T.r.BU){await De(Os,{id:"export-bu",title:"Export State Machine",textMessage:"warningExportBU",textOK:"OK",translateText:!0,optionShowOnce:!0});const e=await Object(B.a)(t);console.log("State Machine exported successfully",e)}else{await De(Os,{id:"export-bu",title:"Export Process",textMessage:"warningExportProcess",textOK:"OK",translateText:!0,optionShowOnce:!0});const e=await Object(B.b)(t);console.log("Process exported successfully",e)}}catch(e){!1===e?console.log("Export canceled by the user."):console.error("Error exporting: "+e)}}),[i,l]),y=Object(a.useCallback)((async e=>{if(e&&e.detail){const{file:t,filetype:n}=e.detail;if(t&&n===T.r.BU){const e=await De(Ne,{id:"import-bu",title:"Import State Machine",textOK:"OK",textMessage:"warningImportBU",textNo:"Append",textYes:"New File",textCancel:"Cancel",translateText:!0});if(0===e)window.isStandalone?hi.send("import-file",{filetype:n}):document.dispatchEvent(new CustomEvent("import-file",{detail:{fileData:{filetype:n}}}));else{if(1!==e)return!1;window.isStandalone?hi.send("import-file",{filetype:n,file:t}):document.dispatchEvent(new CustomEvent("import-file",{detail:{fileData:{file:t,filetype:n}}}))}}}else window.isStandalone?hi.send("import-file"):document.dispatchEvent(new Event("import-file"))}),[]),g=Object(a.useCallback)((()=>{if(o.length<2)return;const e=o.findIndex((e=>e.id===i)),n=e===o.length-1?0:e+1;Object(qe.o)(o[n].id)(t)}),[i,t,o]),f=Object(a.useCallback)((()=>{if(o.length<2)return;const e=o.findIndex((e=>e.id===i)),n=0===e?o.length-1:e-1;Object(qe.o)(o[n].id)(t)}),[i,t,o]),E=Object(a.useCallback)((async function(n){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)return!0;if(n.hasUnsavedChanges){const s={title:e("saveChangesConfirm",{filename:n.name}),textMessage:e("saveChangesLost"),textYes:e("Save"),textNo:e("Don't save"),textCancel:e("Cancel")};a&&delete s.textCancel;const i=await De(Ne,s);if(0===i)await Object(B.h)(n.id,n.type),await Object(qe.l)(n.id)(t);else{if(1!==i)return!1;await Object(qe.l)(n.id)(t)}}else await Object(qe.l)(n.id)(t);return!0}),[t,e]),v=Object(a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;for(t of o)if(!await E(t,e))return!1;return!0}),[E,o]),x=Object(a.useCallback)((async e=>{e.returnValue=!0,yi.getCurrentWindow().focus(),await v()&&(window.isStandalone?hi.send("hide-tuto"):document.dispatchEvent(new Event("hide-tuto")),window.isStandalone?hi.send("all-files-closed"):document.dispatchEvent(new Event("all-files-closed")),yi.getCurrentWindow().destroy())}),[v]),I=Object(a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.removeEventListener("beforeunload",x,!1),e?await v(!0)&&(window.isStandalone?hi.send("hide-tuto"):document.dispatchEvent(new Event("hide-tuto")),window.isStandalone?hi.send("all-files-closed"):document.dispatchEvent(new Event("all-files-closed")),yi.getCurrentWindow().destroy()):window.isStandalone?hi.send("close-editor"):document.dispatchEvent(new Event("close-editor"))}),[x,v]),w=Object(a.useCallback)((e=>e.detail?f():g()),[g,f]),O=Object(a.useCallback)((e=>E(e.detail)),[E]),S=Object(a.useCallback)((e=>e.preventDefault()),[]),j=Object(a.useCallback)((e=>{e.preventDefault();const{nativeEvent:n}=e;if(!n.dataTransfer)return;const{files:a}=n.dataTransfer;Array.from(a).forEach((async e=>{if(e.name.endsWith(T.r.BU_EXT))if(i&&l===T.r.PROCESS)try{await Object(B.d)(e.path,i)(t),document.body.dispatchEvent(new Event(T.b))}catch(e){console.error("Error import State Machine to the process: "+e)}else r(e.path);else if(e.name.endsWith(T.r.PROCESS_EXT))c(e.path);else if(e.name.endsWith(T.r.NEDIT_EXT))if(i&&l===T.r.BU){const t=await De(Ne,{id:"import-bu",title:"Import State Machine",textOK:"OK",textMessage:"warningImportBU",textNo:"Append",textYes:"New File",translateText:!0});if(0===t)r(e.path,!0,!1);else{if(1!==t)return!1;r(e.path,!0,i)}}else r(e.path,!0,!1)}))}),[i,l,t,r,c]);return Object(a.useEffect)((()=>{Object(qe.n)()(t,n);const e=(e,t)=>window.isStandalone?r(t.filepath,!0,t.appendToFile):r(e.detail.file,!0,e.detail.appendToFile),a=(e,a)=>window.isStandalone?Object(B.e)(a.filepath)(t,n):Object(B.e)(e.detail.file)(t,n),s=(e,t)=>window.isStandalone?c(t.filepath,!0,t.appendToFile):c(e.detail.file,!0,e.detail.appendToFile),i=()=>Object(qe.p)(T.r.BU)(t),o=()=>Object(qe.p)(T.r.PROCESS)(t),l=()=>I(!0);return document.addEventListener(T.E,d,!1),document.addEventListener(T.G,p,!1),document.addEventListener(T.F,m,!1),document.addEventListener(T.q,b,!1),document.addEventListener(T.s,y,!1),document.addEventListener(T.c,O,!1),document.addEventListener(T.N,w,!1),window.isStandalone?(hi.addListener("bu-file",e),hi.addListener("nedit-file",a),hi.addListener("process-file",s),hi.addListener("new-bu",i),hi.addListener("new-process",o),hi.addListener("force-close-editor",l)):(document.body.addEventListener("bu-file",e),document.body.addEventListener("nedit-file",a),document.body.addEventListener("process-file",s),document.body.addEventListener("new-bu",i),document.body.addEventListener("new-process",o),document.body.addEventListener("force-close-editor",l)),gi||window.addEventListener("beforeunload",x,!1),()=>{document.removeEventListener(T.E,d,!1),document.removeEventListener(T.G,p,!1),document.removeEventListener(T.F,m,!1),document.removeEventListener(T.q,b,!1),document.removeEventListener(T.s,y,!1),document.removeEventListener(T.c,O,!1),document.removeEventListener(T.N,w,!1),window.isStandalone?(hi.removeAllListeners("bu-file"),hi.removeAllListeners("nedit-file"),hi.removeAllListeners("process-file"),hi.removeAllListeners("new-bu"),hi.removeAllListeners("new-process"),hi.removeAllListeners("force-close-editor")):(document.body.removeEventListener("bu-file",e),document.body.removeEventListener("nedit-file",a),document.body.removeEventListener("process-file",s),document.body.removeEventListener("new-bu",i),document.body.removeEventListener("new-process",o),document.body.removeEventListener("force-close-editor",l)),gi||window.removeEventListener("beforeunload",x,!1)}}),[x,I,t,b,n,y,O,w,r,c,m,d,p]),s.a.createElement(wi,null,s.a.createElement(pt,{menuTemplate:null}),s.a.createElement(Oi,{onDragOver:S,onDrop:j},l===T.r.PROCESS&&s.a.createElement(Rs,{procID:i,disabled:l!==T.r.PROCESS}),s.a.createElement(Si,null,s.a.createElement(It,{closeTab:E}),l===T.r.BU&&s.a.createElement(Ua,{file:i}),l===T.r.PROCESS&&s.a.createElement(fs,{procID:i}),l===T.r.PROCESS&&s.a.createElement(Ys,{procID:i}),!l&&s.a.createElement(ni,{isInEditor:!0})),l===T.r.PROCESS&&s.a.createElement(Na,{procID:i})),s.a.createElement(vs,null),s.a.createElement(Is,null),s.a.createElement(Ds,null))};const vi=y.b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  margin-top: 2px;
  margin-bottom: 2px;
  width: 100%;
  min-height: 24px;

  ${e=>e.optional&&y.a`
    font-style: italic;
  `}

  ${e=>e.nospace&&y.a`
    justify-content: flex-start;
  `}
`,xi=y.b.input.attrs((e=>({type:e.type||"text",placeholder:"Function",defaultValue:e.defaultValue,onKeyDown:e.onKeyDown})))`
  display: flex;
  flex: 1;
  font-size: ${e=>(e.scale||1)*(e.fontSize||9)+"px"};
  height: ${e=>24*(e.scale||1)+"px"};
  border: none;
  border-radius: ${e=>12*(e.scale||1)+"px"};
  background-color: rgba(0, 0, 0, 0.3);
  color: #FFF;
  font-weight: bold;
  padding-left: ${e=>.75*(e.scale||1)+"rem"};
  padding-right: ${e=>.75*(e.scale||1)+"rem"};
  overflow: hidden;
  min-width: 0;

  ${e=>e.width&&y.a`
    width: ${e.width+"px"};
  `};
`,Ii=y.b.span`
  border-radius: 12px;
  padding: 4px 10px;
  height: 24px;
  background-color: ${T.i.DARKER_GREY};
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &:hover,
  &:focus {
    background-color: ${T.i.DARKER_GREY_DARK};
  }

  &:active {
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.2);
  }
`,wi=y.b.div`
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,Oi=y.b.div`
  position: absolute;
  top: 48px;
  bottom: 0;
  left: 0;
  right: 0;
  overflow: hidden;
  display: flex;
  flex-direction: row;
  color: ${T.i.WHITE};
  background-color: #1b1c1c;
`,Si=y.b.div`
  width: 100%;
  position: relative;
`,ji=document.dispatchEvent.bind(document,new Event(T.H)),Ci=document.dispatchEvent.bind(document,new Event(T.E)),ki=document.dispatchEvent.bind(document,new Event(T.G)),Di=document.dispatchEvent.bind(document,new Event(T.F)),Ni=(e,t)=>document.dispatchEvent(new CustomEvent(T.s,{detail:{file:e,filetype:t}})),Li=(e,t)=>document.dispatchEvent(new CustomEvent(T.q,{detail:{file:e,filetype:t}})),Ti=e=>document.dispatchEvent(new CustomEvent(T.c,{detail:e})),Bi=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return document.dispatchEvent(new CustomEvent(T.N,{detail:e}))};var Ai=n(270),Ri=n.n(Ai),Pi=e=>{const t={fill:e.style&&e.style.fill||"none",stroke:e.style&&e.style.color||"#FFFFFF",strokeWidth:12,strokeMiterlimit:10};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:14,height:22},e,{viewBox:"0 0 133 155.91"}),s.a.createElement("path",{style:t,d:"M20.13,29.09v97.72c0,2.85,3.09,4.62,5.55,3.18l82.42-48.27c2.42-1.42,2.43-4.9,0.03-6.34L25.71,25.93 C23.25,24.46,20.13,26.23,20.13,29.09z"}))},Fi=e=>{const t={fill:e.style&&e.style.color||"#FFF"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:18,height:16},e,{viewBox:"0 0 512 512"}),s.a.createElement("path",{style:t,d:"M1413,147h1a1,1,0,0,1,1,1v18a1,1,0,0,1-1,1h-1a1,1,0,0,1-1-1V148A1,1,0,0,1,1413,147Zm13,0h1a1,1,0,0,1,1,1v18a1,1,0,0,1-1,1h-1a1,1,0,0,1-1-1V148A1,1,0,0,1,1426,147Z",transform:"translate(-1412 -147)"}),s.a.createElement("path",{style:t,d:"M224,435.8V76.1c0-6.7-5.4-12.1-12.2-12.1h-71.6c-6.8,0-12.2,5.4-12.2,12.1v359.7c0,6.7,5.4,12.2,12.2,12.2h71.6   C218.6,448,224,442.6,224,435.8z"}),s.a.createElement("path",{style:t,d:"M371.8,64h-71.6c-6.7,0-12.2,5.4-12.2,12.1v359.7c0,6.7,5.4,12.2,12.2,12.2h71.6c6.7,0,12.2-5.4,12.2-12.2V76.1   C384,69.4,378.6,64,371.8,64z"}))},Ui=e=>{const t={fill:e.style&&e.style.color||"#FFFFFF",stroke:e.style&&e.style.color||"#FFFFFF",strokeWidth:5,strokeLinejoin:"round"},n={fill:"none",stroke:"#FFFFFF",strokeWidth:5,strokeLinecap:"round"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 75 75",width:20,height:20},e),s.a.createElement("polygon",{style:t,points:"39.389,13.769 22.235,28.606 6,28.606 6,47.699 21.989,47.699 39.389,62.75 39.389,13.769"}),s.a.createElement("path",{style:n,d:"M 48.651772,50.269646 69.395223,25.971024"}),s.a.createElement("path",{style:n,d:"M 69.395223,50.269646 48.651772,25.971024"}))},$i=e=>{const t={fill:e.style&&e.style.color||"#FFFFFF",stroke:e.style&&e.style.color||"#FFFFFF",strokeWidth:5,strokeLinejoin:"round"},n={fill:"none",stroke:"#FFFFFF",strokeWidth:5,strokeLinecap:"round"};return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 75 75",width:20,height:20},e),s.a.createElement("polygon",{style:t,points:"39.389,13.769 22.235,28.606 6,28.606 6,47.699 21.989,47.699 39.389,62.75 39.389,13.769"}),s.a.createElement("path",{style:n,d:"M 48.128,49.03 C 50.057,45.934 51.19,42.291 51.19,38.377 C 51.19,34.399 50.026,30.703 48.043,27.577"}),s.a.createElement("path",{style:n,d:"M 55.082,20.537 C 58.777,25.523 60.966,31.694 60.966,38.377 C 60.966,44.998 58.815,51.115 55.178,56.076"}),s.a.createElement("path",{style:n,d:"M 61.71,62.611 C 66.977,55.945 70.128,47.531 70.128,38.378 C 70.128,29.161 66.936,20.696 61.609,14.01"}))};const{ipcRenderer:_i}=window.isStandalone?window.require("electron"):{};var Mi=()=>{const[e,t]=Object(a.useState)(!1),[n,i]=Object(a.useState)(!1),[o,l]=Object(a.useState)(!1),[r,c]=Object(a.useState)(0),[d,u]=Object(a.useState)(0),[p,m]=Object(a.useState)(0),b=Object(a.useRef)(),y=Object(a.useCallback)((e=>{const t=e.target.getBoundingClientRect(),n=(e.clientX-t.x)/t.width;b.current.seekTo(n)}),[]),g=Object(a.useCallback)((()=>{t(!1),window.isStandalone?_i.send("hide-tuto"):document.dispatchEvent(new Event("hide-tuto"))}),[]),[f]=Object(h.c)();return s.a.createElement(Vi,null,s.a.createElement(Wi,{onClick:g},s.a.createElement(v,{style:{color:"#777"},width:10,height:10})),s.a.createElement(rt,{style:{marginBottom:"1rem",position:"absolute",top:20,left:20}}),s.a.createElement("strong",{style:{marginTop:"4.5rem"}},f("Tutorial")),s.a.createElement("hr",{style:{margin:"0.5rem 0 1rem -0.5rem",borderColor:"#3B3B3B"}}),s.a.createElement("p",{style:{textAlign:"justify",WebkitAppRegion:"no-drag"}},f("tutorialContent")),s.a.createElement(qi,null,s.a.createElement(Ri.a,{ref:b,url:null,width:"auto",height:"100%",style:{maxWidth:"100%",display:"inline-block"},progressInterval:150,playing:e,muted:o,onClick:n=>t(!e),onDuration:e=>m(e),onProgress:e=>{c(e.played),u(e.loaded)},onPlay:e=>t(!0),onPause:e=>t(!1)}),n&&s.a.createElement(Gi,{progress:r,loaded:d,className:"player-controls"},!o&&s.a.createElement(Ki,{onClick:e=>l(!0)},s.a.createElement($i,null)),o&&s.a.createElement(Ki,{onClick:e=>l(!1)},s.a.createElement(Ui,null)),!e&&s.a.createElement(Ki,{onClick:e=>t(!0)},s.a.createElement(Pi,{style:{fill:"#FFFFFF"}})),e&&s.a.createElement(Ki,{onClick:e=>t(!1)},s.a.createElement(Fi,null)),s.a.createElement("div",{className:"progress-bar",onClick:y},s.a.createElement("span",{className:"loaded"}),s.a.createElement("span",{className:"progress"})),s.a.createElement(zi,null,`${Object(L.c)(r*p)} / ${Object(L.c)(p)}`)),!n&&s.a.createElement(Yi,null,s.a.createElement(Hi,{onClick:e=>{i(!0),t(!0)}},s.a.createElement(Pi,{style:{fill:"#FFFFFF",marginLeft:5},width:35,height:40})))))};const Vi=y.b.div`
  -webkit-app-region: drag;
  user-select: none;
  background-color: #2B2C2D;
  display: flex;
  flex-direction: column;
  padding-left: 60px;
  padding-right: 60px;
  width: 100vw;
  height: 100vh;
  font-family: Lato;
`,qi=y.b.div`
  -webkit-app-region: no-drag;
  overflow: hidden;
  display: inline-block;
  height: 100%;
  max-width: 100%;
  margin-bottom: 60px;
  text-align: center;
  position: relative;
  align-self: center;

  :not(:hover) > .player-controls {
    opacity: 0;
    pointer-events: none;
  }
`,Gi=y.b.div`
  width: 100%;
  height: 50px;
  position: absolute;
  left: 0;
  bottom: 0;
  right: 0;
  display: flex;
  justify-content: stretch;
  align-items: center;
  padding-left: 12px;
  padding-right: 32px;
  transition: opacity 0.15s linear;

  & .progress-bar {
    background-color: #2B2C2D;
    height: 4.6px;
    border-radius: 2.3px;
    position: relative;
    flex: 1;
  }
  
  & .progress {
    position: absolute;
    left: 0;
    top: 0;
    background-color: ${T.i.PINK};
    height: 4.6px;
    border-radius: 2.3px;
    width: ${e=>100*e.progress+"%"};
    pointer-events: none;
    transition: width 0.1s linear;
  }
  
  & .loaded {
    position: absolute;
    left: 0;
    top: 0;
    background-color: #bbbab9;
    height: 4.6px;
    border-radius: 2.3px;
    width: ${e=>100*e.loaded+"%"};
    pointer-events: none;
  }
`,Ki=y.b.span`
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 40px;
  height: 20px;

  :first-of-type {
    width: 20px;
    margin-left: 5px;
  }
`,zi=y.b.span`
  margin-left: 20px;
  font-size: 0.75rem;
`,Yi=y.b.div`
  background-color: rgba(255, 255, 255, 0.25);
  border: 1px solid #FFF;
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
`,Hi=y.b.span`
  border-radius: 50%;
  border: 1px solid #FFF;
  width: 80px;
  height: 80px;
  display: inline-flex;
  justify-content: center;
  align-items: center;

  :hover {
    background-color: rgba(255, 255, 255, 0.25);
  }
`,Wi=y.b.span`
  -webkit-app-region: no-drag;
  position: absolute;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  cursor: pointer;

  &:hover svg path {
    fill: #ABABAB !important;
  }

  &:active svg path {
    fill: #888 !important;
  }
`;const Zi={BU:"bu",BU_EXT:".bu",NEDIT:"nedit",NEDIT_EXT:".nedit",PROCESS:"npr",PROCESS_EXT:".npr",names:{bu:"State Machines",nedit:"Encoded Behaviors",npr:"Process"}},Ji=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.name;n&&n.split(".").pop()===Zi.BU?document.body.dispatchEvent(new CustomEvent("bu-file",{detail:{file:e,appendToFile:t}})):n&&n.split(".").pop()===Zi.NEDIT?document.body.dispatchEvent(new CustomEvent("nedit-file",{detail:{file:e,appendToFile:t}})):n&&n.split(".").pop()===Zi.PROCESS&&document.body.dispatchEvent(new CustomEvent("process-file",{detail:{file:e,appendToFile:t}}))},Xi=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[Zi.BU,Zi.PROCESS],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return;const n=e.map((e=>({description:Zi.names[e],accept:{"application/xml":"."+e}})));if("showOpenFilePicker"in window){const[e]=await window.showOpenFilePicker({types:n}),t=await e.getFile();console.log(e,t)}else{const n=document.createElement("input");n.addEventListener("change",(e=>{Ji(e.target.files[0],t)})),n.type="file",n.accept=e.map((e=>"."+e)).join(","),n.click()}};window.isStandalone||(document.addEventListener("new-file",(e=>{var t;return(null===(t=e.detail)||void 0===t?void 0:t.filetype)===Zi.BU?document.body.dispatchEvent(new Event("new-bu",{bubbles:!0})):document.body.dispatchEvent(new Event("new-process",{bubbles:!0}))})),document.addEventListener("open-file",(e=>{var t,n;return(null===(t=e.detail)||void 0===t?void 0:t.path)?Ji(null===(n=e.detail)||void 0===n?void 0:n.path):Xi()})),document.addEventListener("import-file",(e=>{var t,n,a;return(null===(t=e.detail)||void 0===t?void 0:t.fileData)?Xi([(null===(n=e.detail)||void 0===n?void 0:n.fileData.filetype)===Zi.BU?Zi.BU:Zi.NEDIT],(null===(a=e.detail)||void 0===a?void 0:a.fileData.file)||null):Xi([Zi.NEDIT])})),document.addEventListener("import-bu",(e=>{var t;return Xi([Zi.BU],null===(t=e.detail)||void 0===t?void 0:t.procID)}))),o.a.render(s.a.createElement((()=>(Object(a.useEffect)((()=>d.a.setAppElement(document.getElementById("root")))),s.a.createElement(u.a,{store:b.a},s.a.createElement("div",{className:"App",onDragOver:e=>e.preventDefault()},s.a.createElement(m.b,{backend:p.a},s.a.createElement(l.a,null,s.a.createElement(r.c,null,s.a.createElement(r.a,{exact:!0,path:"/",component:Ei}),s.a.createElement(r.a,{exact:!0,path:"/tuto",component:Mi})))),s.a.createElement("div",{id:"draggable"}),s.a.createElement("div",{id:"modal-container"}))))),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"j",(function(){return r})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return m}));const a=(e,t)=>e.reduce(((e,n)=>n?(e[n[t]]=n,e):e),{}),s=e=>e.replace(/^.*[\\/]/,"").split(".").shift(),i=(e,t)=>e<t?e:t,o=(e,t)=>e>t?e:t,l=Math.abs,r=e=>t=>{"Enter"===t.key&&e()},c=e=>t=>{if("object"!=typeof e)throw new TypeError(`Wrong callbacks data type. Expected object, received ${typeof e} instead`);"function"==typeof e[t.key]?e[t.key](t):Array.isArray(e[t.key])&&e[t.key].forEach((n=>{"function"==typeof e[t.key]&&n(t)}))},d=()=>"INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName,u=e=>{const t=~~(e/3600),n=~~(e%3600/60),a=~~e%60;let s="";return t>0&&(s+=t+":"+(n<10?"0":"")),s+=n+":"+(a<10?"0":""),s+=""+a,s},p=(e,t)=>Object.keys(e).find((n=>e[n]===t));function m(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}}},[[276,1,2]]]);